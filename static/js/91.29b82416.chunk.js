"use strict";(globalThis.webpackChunkvocechat_web=globalThis.webpackChunkvocechat_web||[]).push([[91],{93916:(e,t,i)=>{i.d(t,{Z:()=>l});var n,s,o=i(70537);function a(){return a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},a.apply(this,arguments)}const r=(e,t)=>{let{title:i,titleId:r,...l}=e;return o.createElement("svg",a({width:25,height:24,viewBox:"0 0 25 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":r},l),i?o.createElement("title",{id:r},i):null,n||(n=o.createElement("g",{clipPath:"url(#clip0_14990_39524)"},o.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12.5 0C5.8724 0 0.5 5.3808 0.5 12.0204C0.5 17.3304 3.938 21.8364 8.7068 23.4252C9.3068 23.5356 9.5252 23.1648 9.5252 22.8456C9.5252 22.5612 9.5156 21.804 9.5096 20.802C6.1712 21.528 5.4668 19.1904 5.4668 19.1904C4.922 17.8008 4.1348 17.4312 4.1348 17.4312C3.0452 16.6872 4.2176 16.7016 4.2176 16.7016C5.4212 16.7856 6.0548 17.94 6.0548 17.94C7.1252 19.776 8.864 19.2456 9.5468 18.9384C9.6572 18.162 9.9668 17.6328 10.31 17.3328C7.646 17.0292 4.844 15.9972 4.844 11.3916C4.844 10.08 5.312 9.006 6.0788 8.166C5.9552 7.8624 5.5436 6.6396 6.1964 4.986C6.1964 4.986 7.2044 4.662 9.4964 6.2172C10.4753 5.95022 11.4853 5.81423 12.5 5.8128C13.52 5.8176 14.546 5.9508 15.5048 6.2172C17.7956 4.662 18.8012 4.9848 18.8012 4.9848C19.4564 6.6396 19.0436 7.8624 18.9212 8.166C19.6892 9.006 20.1548 10.08 20.1548 11.3916C20.1548 16.0092 17.348 17.0256 14.6756 17.3232C15.1064 17.694 15.4892 18.4272 15.4892 19.5492C15.4892 21.1548 15.4748 22.452 15.4748 22.8456C15.4748 23.1672 15.6908 23.5416 16.3004 23.424C18.69 22.6225 20.7672 21.0904 22.2386 19.0441C23.7099 16.9977 24.501 14.5408 24.5 12.0204C24.5 5.3808 19.1264 0 12.5 0Z",fill:"black"}))),s||(s=o.createElement("defs",null,o.createElement("clipPath",{id:"clip0_14990_39524"},o.createElement("rect",{width:24,height:24,fill:"white",transform:"translate(0.5)"})))))},l=(0,o.forwardRef)(r)},16049:(e,t,i)=>{i.d(t,{Z:()=>d});var n,s,o,a,r=i(70537);function l(){return l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},l.apply(this,arguments)}const c=(e,t)=>{let{title:i,titleId:c,...d}=e;return r.createElement("svg",l({width:2443,height:2500,viewBox:"0 0 256 262",xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"xMidYMid",ref:t,"aria-labelledby":c},d),i?r.createElement("title",{id:c},i):null,n||(n=r.createElement("path",{d:"M255.878 133.451c0-10.734-.871-18.567-2.756-26.69H130.55v48.448h71.947c-1.45 12.04-9.283 30.172-26.69 42.356l-.244 1.622 38.755 30.023 2.685.268c24.659-22.774 38.875-56.282 38.875-96.027",fill:"#4285F4"})),s||(s=r.createElement("path",{d:"M130.55 261.1c35.248 0 64.839-11.605 86.453-31.622l-41.196-31.913c-11.024 7.688-25.82 13.055-45.257 13.055-34.523 0-63.824-22.773-74.269-54.25l-1.531.13-40.298 31.187-.527 1.465C35.393 231.798 79.49 261.1 130.55 261.1",fill:"#34A853"})),o||(o=r.createElement("path",{d:"M56.281 156.37c-2.756-8.123-4.351-16.827-4.351-25.82 0-8.994 1.595-17.697 4.206-25.82l-.073-1.73L15.26 71.312l-1.335.635C5.077 89.644 0 109.517 0 130.55s5.077 40.905 13.925 58.602l42.356-32.782",fill:"#FBBC05"})),a||(a=r.createElement("path",{d:"M130.55 50.479c24.514 0 41.05 10.589 50.479 19.438l36.844-35.974C195.245 12.91 165.798 0 130.55 0 79.49 0 35.393 29.301 13.925 71.947l42.211 32.783c10.59-31.477 39.891-54.251 74.414-54.251",fill:"#EB4335"})))},d=(0,r.forwardRef)(c)},49879:(e,t,i)=>{i.d(t,{Z:()=>d});var n=i(70537),s=i(93916),o=i(57889),a=i(69885),r=i(71893),l=i(80683);const c=(0,o.ZP)(a.Z)`
  width: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 12px;
  color: #344054;
  border: 1px solid #d0d5dd;
  background: none !important;
  .icon {
    width: 24px;
    height: 24px;
  }
`,d=e=>{let{type:t="login",source:i="webapp",client_id:o}=e;const{t:a}=(0,r.$)("auth");(0,n.useEffect)((()=>{const e=e=>{const{key:t,newValue:i}=e;if("widget"==t&&i){localStorage.removeItem("widget");const e=window.parent;e&&e.postMessage("RELOAD_WITH_OPEN","*")}};return"widget"==i&&window.addEventListener("storage",e),()=>{"widget"==i&&window.removeEventListener("storage",e)}}),[i]);return(0,l.jsxs)(c,{onClick:()=>{const e=`https://github.com/login/oauth/authorize?client_id=${o}&redirect_uri=${location.origin}/github/cb/${i}.html`;"webapp"==i?location.href=e:window.open(e)},children:[(0,l.jsx)(s.Z,{className:"icon"}),` ${a("login"===t?"login.github":"reg.github")}`]})}},63674:(e,t,i)=>{i.d(t,{Z:()=>x});var n=i(70537),s=i(89156),o=i(27418),a=i(57889),r=i(80308),l=i(16049),c=i(69885),d=i(15312),p=i(71893),u=i(80683);const g=(0,a.ZP)(c.Z)`
  position: relative;
  width: 100%;
  background: white !important;
  border: 1px solid #d0d5dd;
  color: #344054;
  height: 46px;
  overflow: hidden;
  .mask {
    background: inherit;
    position: absolute;
    left: 0;
    top: 0;
    width: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 12px;
    z-index: 998;
    height: 40px;
    .icon {
      width: 24px;
      height: 24px;
    }
  }
  > .hide {
    /* z-index: 1; */
    /* opacity: 0; */
    left: 0;
    top: 0;
    position: absolute;
    width: 100%;
    iframe {
      width: 100% !important;
    }
  }
  &:hover {
     .hide {
      opacity: 0;
      z-index: 999;
    }
  }
`,h=e=>{let{type:t="login",loaded:i,loadError:a}=e;const{t:c}=(0,p.$)("auth"),[h,{isSuccess:x,isLoading:f,error:m}]=(0,d.YA)(),w=localStorage.getItem(r.LJ);return(0,n.useEffect)((()=>{x&&o.ZP.success("Login Successfully")}),[x]),(0,n.useEffect)((()=>{if(m&&"status"in m)if(410===m.status)o.ZP.error("No associated account found, please user admin for an invitation link to join.");else o.ZP.error("Something Error");else;}),[m]),(0,u.jsxs)(g,{disabled:!i||f,children:[(0,u.jsxs)("div",{className:"mask",children:[(0,u.jsx)(l.Z,{className:"icon"}),a?"Script Load Error!":i?`${c("login"===t?"login.google":"reg.google")}`:"Initializing"]}),(0,u.jsx)("div",{className:"hide",children:(0,u.jsx)(s.kZ,{width:"360px",onSuccess:e=>{h({magic_token:w,id_token:e.credential||"",type:"google"})}})})]})},x=e=>{let{type:t="login",clientId:i}=e;const[o,a]=(0,n.useState)(!1),[r,l]=(0,n.useState)(!1);return i?(0,u.jsx)(s.rg,{onScriptLoadError:()=>{l(!0)},onScriptLoadSuccess:()=>{a(!0)},clientId:i,children:(0,u.jsx)(h,{type:t,loaded:o,loadError:r})}):null}},80874:(e,t,i)=>{i.d(t,{Z:()=>o});var n=i(70537),s=i(10336);const o=e=>{let{id:t="root-modal",mask:i=!0,children:o}=e;const[a,r]=(0,n.useState)(null);return(0,n.useEffect)((()=>{const e=document.getElementById(t);if(!e)return;i&&e.classList.add("mask");const n=document.createElement("div");return n.classList.add("wrapper"),e.appendChild(n),r(n),()=>{e.removeChild(n)}}),[t,i]),a?(0,s.createPortal)(o,a):null}},17237:(e,t,i)=>{i.d(t,{Z:()=>c});var n=i(70537),s=i(40182),o=i(57889),a=i(80683);const r=o.ZP.div`
  width: 100%;
  position: relative;
  display: flex;
  overflow: hidden;
  border-radius: 4px;
  border: 1px solid #e5e7eb;
  box-shadow: 0px 1px 2px rgba(31, 41, 55, 0.08);

  .prefix {
    padding: 8px 16px;
    font-weight: 400;
    font-size: 14px;
    line-height: 20px;
    color: #9ca3af;
    background: #f3f4f6;
    border-right: 1px solid #e5e7eb;
  }

  .view {
    position: absolute;
    top: 50%;
    right: 10px;
    transform: translateY(-50%);
    cursor: pointer;
  }
`,l=o.ZP.input`
  width: 100%;
  background: #ffffff;

  font-weight: normal;
  font-size: 14px;
  line-height: 20px;
  color: #333;
  padding: 8px;
  outline: none;

  &:not(.inner) {
    border-radius: 4px;
    border: 1px solid #e5e7eb;
    box-shadow: 0px 1px 2px rgba(31, 41, 55, 0.08);
  }

  &.large {
    font-weight: 400;
    font-size: 14px;
    line-height: 20px;
    padding: 11px 8px;
  }

  &.none {
    outline: none;
    border: none;
    background: none;
    box-shadow: none;
  }

  &:disabled {
    color: #78787c;
    background-color: #f9fafb;
  }

  &::placeholder {
    color: #d1d5db;
  }

  &[type="password"] {
    padding-right: 30px;
  }
`,c=e=>{let{type:t="text",prefix:i="",className:o,...c}=e;const[d,p]=(0,n.useState)(t);return"password"==t?(0,a.jsxs)(r,{className:o,children:[(0,a.jsx)(l,{type:d,className:`inner ${o}`,...c}),(0,a.jsx)("div",{className:"view",onClick:()=>{p((e=>"password"==e?"text":"password"))},children:"password"==d?(0,a.jsx)(s.MBb,{color:"#78787c"}):(0,a.jsx)(s.Rbo,{color:"#78787c"})})]}):i?(0,a.jsxs)(r,{className:o,children:[(0,a.jsx)("span",{className:"prefix",children:i}),(0,a.jsx)(l,{className:`inner ${o}`,type:d,...c})]}):(0,a.jsx)(l,{type:d,className:o,...c})}},40698:(e,t,i)=>{i.d(t,{Z:()=>a});var n=i(57889),s=i(80683);const o=n.ZP.div`
  padding: 32px;
  filter: drop-shadow(0px 25px 50px rgba(31, 41, 55, 0.25));
  border-radius: 8px;
  background-color: #fff;
  min-width: 440px;
  &.compact {
    padding: 16px;
    min-width: 406px;
    .title,
    .desc {
      text-align: left;
    }
  }
  .title {
    text-align: center;
    font-weight: 600;
    font-size: 20px;
    color: #374151;
    margin-bottom: 16px;
  }
  .desc {
    text-align: center;
    font-weight: normal;
    font-size: 14px;
    line-height: 20px;
    color: #6b7280;
    margin-bottom: 8px;
  }
  .btns {
    padding-top: 16px;
    width: 100%;
    display: flex;
    justify-content: flex-end;
    gap: 16px;
    align-items: center;
  }
`,a=e=>{let{title:t="",description:i="",buttons:n,children:a,...r}=e;return(0,s.jsxs)(o,{...r,children:[t&&(0,s.jsx)("h3",{className:"title",children:t}),i&&(0,s.jsx)("p",{className:"desc",children:i}),a,n&&(0,s.jsx)("div",{className:"btns",children:n})]})}},42712:(e,t,i)=>{i.d(t,{Z:()=>o});var n=i(70537),s=i(65809);function o(){const[e,t]=(0,n.useState)(!1),[i,o]=(0,n.useState)(),{data:a}=(0,s.R)(void 0,{refetchOnMountOrArgChange:!0}),[r,{isSuccess:l}]=(0,s.Ku)();(0,n.useEffect)((()=>{a&&o(a)}),[a]),(0,n.useEffect)((()=>{t(!l&&JSON.stringify(a)!==JSON.stringify(i))}),[a,i,l]);return{config:i,changed:e,updateGithubAuthConfig:e=>{o((t=>t?{...t,...e}:e))},updateGithubAuthConfigToServer:async()=>{i&&await r(i)},isSuccess:l}}},25089:(e,t,i)=>{i.d(t,{Z:()=>o});var n=i(70537),s=i(65809);function o(){const[e,t]=(0,n.useState)(!1),[i,o]=(0,n.useState)(""),{data:a}=(0,s.eM)(void 0,{refetchOnMountOrArgChange:!0}),[r,{isSuccess:l}]=(0,s.Qg)();(0,n.useEffect)((()=>{a&&o(a.client_id)}),[a]),(0,n.useEffect)((()=>{t(!l&&(null===a||void 0===a?void 0:a.client_id)!==i)}),[a,i,l]);return{config:a,changed:e,clientId:i,updateClientId:o,updateClientIdToServer:async()=>{i&&await r({client_id:i})},updateGoogleAuthConfig:r,isSuccess:l}}},56539:(e,t,i)=>{i.r(t),i.d(t,{default:()=>L});var n=i(70537),s=i(27418),o=i(80308),a=i(57889),r=i(69885);const l=(0,a.ZP)(r.Z)`
  width: 100%;
  margin-bottom: 16px;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 12px;
  color: #344054;
  border: 1px solid #d0d5dd;
  background: none !important;
  .icon {
    width: 24px;
    height: 24px;
  }
`,c=a.ZP.div`
  display: flex;
  justify-content: center;
  align-items: center;
  height: 100vh;
  .form {
    padding: 36px 40px 32px 40px;
    box-shadow: 0px 4px 8px -2px rgba(16, 24, 40, 0.1), 0px 2px 4px -2px rgba(16, 24, 40, 0.06);
    border-radius: 12px;
    .tips {
      display: flex;
      flex-direction: column;
      align-items: center;
      padding-bottom: 24px;
      .logo {
        width: 56px;
        height: 56px;
        margin-bottom: 28px;
        border-radius: 50%;
      }
      .title {
        font-weight: 600;
        font-size: 24px;
        line-height: 32px;
        color: #101828;
        margin-bottom: 8px;
      }
    }
    .desc {
      font-weight: normal;
      font-size: 16px;
      line-height: 24px;
      color: #667085;
    }
    form {
      display: flex;
      flex-direction: column;
      gap: 20px;
      width: 360px;
    }
    .or {
      border: none;
      position: relative;
      height: 1px;
      background-color: #e4e7ec;
      margin: 26px 0;
      &:after {
        padding: 4px;
        background-color: #fff;
        content: "OR";
        position: absolute;
        left: 50%;
        top: 50%;
        transform: translate3d(-50%, -50%, 0);
        font-size: 14px;
        line-height: 20px;
        color: #667085;
      }
    }
    >.btns{
      display: flex;
      flex-direction: column;
      gap: 15px;
    }
  }
`;var d=i(70479),p=i(15312);const u=i.p+"static/media/metamask.f04d5fb63394197766d0.svg";var g=i(71893),h=i(80683);function x(e){let{login:t}=e;const{t:i}=(0,g.$)("auth"),[s,o]=(0,n.useState)(!1),[a,r]=(0,n.useState)([]),[c]=(0,p.sZ)(),x=(0,n.useRef)();(0,n.useEffect)((()=>{function e(e){r(e)}return x.current||(x.current=new d.Z),d.Z.isMetaMaskInstalled()&&window.ethereum.on("accountsChanged",e),()=>{d.Z.isMetaMaskInstalled()&&window.ethereum.removeListener("accountsChanged",e)}}),[]),(0,n.useEffect)((()=>{if(d.Z.isMetaMaskInstalled())if(a.length>0){var e;const[i]=a;(async e=>{const{data:i,isSuccess:n}=await c(e);if(n){const n=await f(e,i);t({public_address:e,nonce:i,signature:n,type:"metamask"})}})(i),o(!0),null===(e=x.current)||void 0===e||e.stopOnboarding()}else o(!1)}),[a]);const f=async(e,t)=>await window.ethereum.request({method:"personal_sign",params:[t,e,"hello from "]});return(0,h.jsxs)(l,{disabled:s,onClick:async()=>{if(d.Z.isMetaMaskInstalled()){o(!0);try{const e=await window.ethereum.request({method:"eth_requestAccounts"});r(e)}catch(t){window.ethereum.request({method:"wallet_requestPermissions",params:[{eth_accounts:{}}]})}o(!1)}else{var e;null===(e=x.current)||void 0===e||e.startOnboarding()}},children:[(0,h.jsx)("img",{className:"icon",src:u,alt:"meta mask icon"}),i("login.metamask")]})}var f=i(40698),m=i(80874);const w=e=>{let{issuer:t}=e;const[i,{data:s,isLoading:o,isSuccess:a}]=(0,p.CB)();return(0,n.useEffect)((()=>{if(a&&s){const{url:e}=s;location.href=e}}),[s,a]),(0,h.jsxs)(l,{disabled:o||a,onClick:()=>{i({issuer:t.domain,redirect_uri:`${location.origin}/#/login`})},children:[!!t.favicon&&(0,h.jsx)("img",{src:t.favicon,className:"icon",alt:"icon"}),o?"Loading...":`Login with ${t.domain}`]})},b=(0,a.ZP)(f.Z)`
  text-align: center;
  padding: 32px 32px 16px;

  > *:first-child {
    margin-bottom: 32px;
  }

  > .button {
    > .icon {
      width: 24px;
      height: 24px;
    }

    &.buttonCancel {
      color: #8f8f8f;
    }
  }
`,v=e=>{let{issuers:t}=e;const{t:i}=(0,g.$)("auth"),[s,o]=(0,n.useState)(!1);return t?(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(l,{onClick:()=>{o(!0)},children:i("login.oidc")}),s&&(0,h.jsx)(m.Z,{id:"modal-modal",children:(0,h.jsxs)(b,{title:"Login with OIDC",children:[t.filter((e=>e.enable)).map(((e,t)=>(0,h.jsx)(w,{issuer:e},t))),(0,h.jsx)(r.Z,{className:"border_less ghost buttonCancel",onClick:()=>{o(!1)},children:"Close"})]})})]}):null};var j=i(17237),y=i(15924);const C=(0,a.ZP)(r.Z)`
  width: 100%;
  margin-bottom: 16px;
`;function k(){const e=(0,y.s0)();return(0,h.jsx)(C,{onClick:()=>{e("/send_magic_link")},children:"Sign in with Magic Link"})}function Z(){const{t:e}=(0,g.$)("auth"),t=(0,y.s0)();return(0,h.jsxs)("div",{className:"flex gap-1 mt-7 text-sm text-[#667085] justify-center",children:[(0,h.jsx)("span",{children:e("login.no_account")}),(0,h.jsx)("a",{className:"text-[#22d3ee] cursor-pointer",onClick:()=>{t("/register")},children:e("sign_up")})]})}var E=i(65809),S=i(25089),_=i(42712),N=i(63674),P=i(49879);function L(){const{t:e}=(0,g.$)("auth"),{data:t}=(0,E.n8)(),[i,{isSuccess:a,isLoading:l,error:d}]=(0,p.YA)(),{clientId:u}=(0,S.Z)(),{config:f}=(0,_.Z)(),{data:m,isSuccess:w}=(0,E.ww)(),[b,y]=(0,n.useState)({email:"",password:""});(0,n.useEffect)((()=>{const e=new URLSearchParams(location.search),t=e.get("code"),n=e.get("state"),s=e.get("magic_token"),o=e.get("exists");if(t&&n&&i({code:t,state:n,type:"oidc"}),s&&"undefined"!==typeof o){"true"==o?i({magic_token:s,type:"magiclink"}):location.href=`?magic_token=${s}#/register/set_name/login`}}),[]),(0,n.useEffect)((()=>{if(d)switch(d.status){case 401:case 404:s.ZP.error("Username or Password incorrect");break;case 410:s.ZP.error("No associated account found, please user admin for an invitation link to join.");break;case 451:s.ZP.error("License error: Domain incorrect!");break;default:s.ZP.error("Something Error")}else;}),[d]),(0,n.useEffect)((()=>{a&&s.ZP.success("Login Successfully")}),[a]);const C=e=>{const{type:t}=e.target.dataset,{value:i}=e.target;t&&y((e=>(e[t]=i,{...e})))},{email:L,password:M}=b;if(!w)return null;const{magic_link:O,github:I,google:$,metamask:z,oidc:A=[],who_can_sign_up:R}=m,B=t&&O,q=$&&u,T=B||q||z||A.length>0||I;return(0,h.jsx)(c,{children:(0,h.jsxs)("div",{className:"form",children:[(0,h.jsxs)("div",{className:"tips",children:[(0,h.jsx)("img",{src:`${o.ZP}/resource/organization/logo`,alt:"logo",className:"logo"}),(0,h.jsx)("h2",{className:"title",children:e("login.title")}),(0,h.jsx)("span",{className:"desc",children:e("login.desc")})]}),(0,h.jsxs)("form",{onSubmit:e=>{e.preventDefault(),i({...b,type:"password"})},children:[(0,h.jsx)(j.Z,{className:"large",name:"email",value:L,required:!0,placeholder:e("placeholder_email"),"data-type":"email",onChange:C}),(0,h.jsx)(j.Z,{className:"large",type:"password",value:M,name:"password",required:!0,"data-type":"password",onChange:C,placeholder:e("placeholder_pwd")}),(0,h.jsx)(r.Z,{type:"submit",disabled:l,children:l?"Signing":e("sign_in")})]}),T&&(0,h.jsx)("hr",{className:"or"}),(0,h.jsxs)("div",{className:"btns",children:[B&&(0,h.jsx)(k,{}),q&&(0,h.jsx)(N.Z,{clientId:u}),I&&(0,h.jsx)(P.Z,{client_id:null===f||void 0===f?void 0:f.client_id}),z&&(0,h.jsx)(x,{login:i}),A.length>0&&(0,h.jsx)(v,{issuers:A})]}),"EveryOne"===R&&(0,h.jsx)(Z,{})]})})}}}]);