"use strict";(globalThis.webpackChunkvocechat_web=globalThis.webpackChunkvocechat_web||[]).push([[725],{92725:(e,a,s)=>{s.r(a),s.d(a,{default:()=>x});var t=s(70537),n=s(27418),o=s(80308),r=s(17237),i=s(69885),c=s(15312),l=s(80683);function d(){return(0,l.jsxs)("div",{className:"flex flex-col items-center",children:[(0,l.jsx)("div",{className:"font-bold text-3xl text-gray-800 mt-3",children:"Magic link Sent"}),(0,l.jsx)("p",{className:"text-center text-gray-400 mb-6",children:"Login to your email client, and continue next step"}),(0,l.jsx)("p",{className:"text-center text-gray-400",children:"You can close this window now."})]})}var m=s(14566),u=s(15924);function g(e){let{token:a}=e;const{t:s}=(0,m.$G)("auth"),n=(0,u.s0)();return(0,t.useEffect)((()=>{"ontouchstart"in document.documentElement&&a&&(location.href=`https://join.voce.chat/download?link=${encodeURIComponent(`${location.origin}?magic_token=${a}`)}`)}),[a]),(0,l.jsxs)("div",{className:"flex gap-1 mt-7 text-sm text-[#667085] justify-center",children:[(0,l.jsx)("span",{children:s("reg.have_account")}),(0,l.jsx)("a",{onClick:()=>{n("/login")},className:"text-[#22d3ee] cursor-pointer",children:s("sign_in")})]})}var h=s(65809),p=s(44917);function x(){const{t:e}=(0,m.$G)("auth"),[a,{isLoading:s,data:u,isSuccess:x}]=(0,c.uk)(),[f,{isLoading:w}]=(0,c.N0)(),{data:j,isSuccess:_}=(0,h.ww)(),[v,y]=(0,t.useState)(""),[N,k]=(0,t.useState)({email:"",password:"",confirmPassword:""});(0,t.useEffect)((()=>{const e=new URLSearchParams(location.search).get("magic_token");e&&(localStorage.setItem(o.LJ,e),y(e))}),[]),(0,t.useEffect)((()=>{if(x&&u){const{new_magic_token:e,mail_is_sent:a}=u;!a&&e&&(location.href=`?magic_token=${e}#/register/set_name`)}}),[x,u]);const P=e=>{const{type:a}=e.target.dataset,{value:s}=e.target;k((e=>(e[a]=s,{...e})))};if(!_)return null;const{who_can_sign_up:S}=j;if("EveryOne"!==S&&!v)return(0,l.jsx)(l.Fragment,{children:"Sign up method is updated to Invitation Link Only"});const{email:b,password:Z,confirmPassword:C}=N;if(null!==u&&void 0!==u&&u.mail_is_sent)return(0,l.jsx)(d,{});const L=s||w;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"tips",children:[(0,l.jsx)("img",{src:`${o.ZP}/resource/organization/logo`,alt:"logo",className:"logo"}),(0,l.jsx)("h2",{className:"title",children:e("reg.title")}),(0,l.jsx)("span",{className:"desc",children:e("reg.desc")})]}),(0,l.jsxs)("form",{onSubmit:async e=>{e.preventDefault();const{email:s,password:t,confirmPassword:o}=N;if(t!==o)return void n.ZP.error("Not Same Password!");const{data:r}=await f(s);r?a({magic_token:v,email:s,password:t}):n.ZP.error("Email already registered!")},autoSave:"false",autoComplete:"true",children:[(0,l.jsx)(r.Z,{className:"large",name:"email",value:b,required:!0,type:"email",placeholder:e("placeholder_email"),"data-type":"email",onChange:P}),(0,l.jsx)(r.Z,{className:"large",type:"password",value:Z,name:"password",required:!0,minLength:6,"data-type":"password",onChange:P,placeholder:e("placeholder_pwd")}),(0,l.jsx)(r.Z,{className:"large",required:!0,onBlur:()=>{const{password:e,confirmPassword:a}=N;e!==a&&n.ZP.error("Not Same Password!")},type:"password",minLength:6,name:"confirmPassword",value:C,"data-type":"confirmPassword",onChange:P,placeholder:e("placeholder_confirm_pwd")}),(0,l.jsx)(i.Z,{type:"submit",disabled:L,children:e(L?"signing_up":"sign_up")})]}),(0,l.jsx)("hr",{className:"or"}),(0,l.jsx)("div",{className:"flex flex-col gap-3 py-3",children:(0,l.jsx)(p.Z,{type:"register"})}),(0,l.jsx)(g,{token:v})]})}}}]);