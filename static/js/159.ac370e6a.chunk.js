"use strict";(globalThis.webpackChunkvocechat_web=globalThis.webpackChunkvocechat_web||[]).push([[159],{94727:(e,r,t)=>{t.d(r,{Z:()=>i});var a,s,l=t(70537);function n(){return n=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},n.apply(this,arguments)}const o=(e,r)=>{let{title:t,titleId:o,...i}=e;return l.createElement("svg",n({stroke:"currentColor",fill:"currentColor",strokeWidth:0,viewBox:"0 0 20 20",color:"#78787c",height:"1em",width:"1em",xmlns:"http://www.w3.org/2000/svg",style:{color:"rgb(120, 120, 124)"},ref:r,"aria-labelledby":o},i),t?l.createElement("title",{id:o},t):null,a||(a=l.createElement("path",{fillRule:"evenodd",d:"M3.707 2.293a1 1 0 00-1.414 1.414l14 14a1 1 0 001.414-1.414l-1.473-1.473A10.014 10.014 0 0019.542 10C18.268 5.943 14.478 3 10 3a9.958 9.958 0 00-4.512 1.074l-1.78-1.781zm4.261 4.26l1.514 1.515a2.003 2.003 0 012.45 2.45l1.514 1.514a4 4 0 00-5.478-5.478z",clipRule:"evenodd"})),s||(s=l.createElement("path",{d:"M12.454 16.697L9.75 13.992a4 4 0 01-3.742-3.741L2.335 6.578A9.98 9.98 0 00.458 10c1.274 4.057 5.065 7 9.542 7 .847 0 1.669-.105 2.454-.303z"})))},i=(0,l.forwardRef)(o)},19747:(e,r,t)=>{t.d(r,{Z:()=>i});var a,s,l=t(70537);function n(){return n=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},n.apply(this,arguments)}const o=(e,r)=>{let{title:t,titleId:o,...i}=e;return l.createElement("svg",n({stroke:"currentColor",fill:"currentColor",strokeWidth:0,viewBox:"0 0 20 20",color:"#78787c",height:"1em",width:"1em",xmlns:"http://www.w3.org/2000/svg",style:{color:"rgb(120, 120, 124)"},ref:r,"aria-labelledby":o},i),t?l.createElement("title",{id:o},t):null,a||(a=l.createElement("path",{d:"M10 12a2 2 0 100-4 2 2 0 000 4z"})),s||(s=l.createElement("path",{fillRule:"evenodd",d:"M.458 10C1.732 5.943 5.522 3 10 3s8.268 2.943 9.542 7c-1.274 4.057-5.064 7-9.542 7S1.732 14.057.458 10zM14 10a4 4 0 11-8 0 4 4 0 018 0z",clipRule:"evenodd"})))},i=(0,l.forwardRef)(o)},989:(e,r,t)=>{t.d(r,{Z:()=>i});var a,s,l=t(70537);function n(){return n=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},n.apply(this,arguments)}const o=(e,r)=>{let{title:t,titleId:o,...i}=e;return l.createElement("svg",n({width:20,height:20,viewBox:"0 0 20 20",stroke:"#088AB2",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:r,"aria-labelledby":o},i),t?l.createElement("title",{id:o},t):null,a||(a=l.createElement("g",{clipPath:"url(#clip0_1130_82786)"},l.createElement("path",{d:"M9.99984 13.3334V10M9.99984 6.66669H10.0082M18.3332 10C18.3332 14.6024 14.6022 18.3334 9.99984 18.3334C5.39746 18.3334 1.6665 14.6024 1.6665 10C1.6665 5.39765 5.39746 1.66669 9.99984 1.66669C14.6022 1.66669 18.3332 5.39765 18.3332 10Z",strokeWidth:1.66667,strokeLinecap:"round",strokeLinejoin:"round"}))),s||(s=l.createElement("defs",null,l.createElement("clipPath",{id:"clip0_1130_82786"},l.createElement("rect",{width:20,height:20})))))},i=(0,l.forwardRef)(o)},99487:(e,r,t)=>{t.d(r,{Z:()=>i});var a=t(70537),s=t(57425),l=t(94727),n=t(19747),o=t(80683);const i=e=>{let{type:r="text",prefix:t="",className:i="",...c}=e;const[d,u]=(0,a.useState)(r),m=i.includes("large"),x=i.includes("none"),p="password"==r,h=(0,s.Z)("w-full text-sm text-gray-800 dark:text-gray-200 p-2 outline-none \n    bg-inherit\n  disabled:text-gray-500 disabled:bg-gray-100 \n  dark:disabled:text-gray-500 \n  dark:disabled:bg-gray-800/50\n  dark:disabled:border-gray-600 \n  placeholder:text-gray-400",m&&"py-3",x&&"!border-none bg-transparent shadow-none",p&&"pr-[30px]");return"password"==r?(0,o.jsxs)("div",{className:`w-full relative flex overflow-hidden rounded border border-solid border-gray-200 dark:border-gray-400 shadow-sm ${i}`,children:[(0,o.jsx)("input",{type:d,autoComplete:"password"==d?"current-password":"on",className:`${h} ${i}`,...c}),(0,o.jsx)("div",{className:"absolute top-1/2 right-2.5 -translate-y-1/2 cursor-pointer",onClick:()=>{u((e=>"password"==e?"text":"password"))},children:"password"==d?(0,o.jsx)(l.Z,{className:"fill-gray-500"}):(0,o.jsx)(n.Z,{className:"fill-gray-500"})})]}):t?(0,o.jsxs)("div",{className:`w-full relative flex overflow-hidden rounded border border-solid border-gray-200 dark:border-gray-400 shadow-sm bg-white dark:bg-gray-800 ${i}`,children:["string"===typeof t?(0,o.jsx)("span",{className:"px-4 py-2 text-sm text-gray-500 dark:text-gray-300 bg-gray-100 dark:bg-gray-800 shadow-[rgb(0_0_0_/_10%)_-1px_0px_0px_inset]",children:t}):(0,o.jsx)("span",{className:"flex-center p-2 bg-transparent",children:t}),(0,o.jsx)("input",{className:`${h} ${i}`,type:r,...c})]}):(0,o.jsx)("input",{type:d,className:`${h} rounded border border-solid border-gray-200 dark:border-gray-400 shadow-sm ${i}`,...c})}},27459:(e,r,t)=>{t.d(r,{Z:()=>o});var a=t(70537),s=t(80683);const l="",n=[],o=e=>{let{options:r,values:t=n,value:o=l,defaultValue:i="",onChange:c}=e;const d=(0,a.useId)(),[u,m]=(0,a.useState)(i),x=o!==l?o:u;return(0,s.jsx)("form",{className:"w-full flex flex-col gap-2",children:r.map(((e,r)=>(0,s.jsxs)("div",{className:"relative bg-transparent",children:[(0,s.jsx)("input",{className:"absolute top-0 left-0 w-full h-full opacity-0 cursor-pointer peer z-50",type:"radio",checked:(t!==n?t.indexOf(x):x)===r,onChange:()=>{const e=t===n?r:t[r];o===l&&m(e),c&&c(e)},id:`${d}-${r}`}),(0,s.jsx)("div",{className:"drop-shadow-sm text-left px-2 py-3 border border-solid border-gray-300 dark:border-gray-400 rounded-lg w-full h-full bg-white dark:bg-gray-800 peer-checked:bg-primary-400 text-sm text-gray-500 dark:text-gray-300  peer-checked:text-white",children:(0,s.jsx)("label",{className:"ml-6",htmlFor:`${d}-${r}`,children:e})}),(0,s.jsx)("div",{className:"absolute top-1/2 left-3 -translate-y-1/2 w-3.5 h-3.5 rounded-full border border-solid border-gray-300 peer-checked:hidden"}),(0,s.jsx)("div",{className:"absolute top-1/2 left-3 -translate-y-1/2 w-3.5 h-3.5 rounded-full border border-solid border-white invisible peer-checked:visible flex-center",children:(0,s.jsx)("div",{className:"w-1 h-1 bg-white rounded-full"})})]},r)))})}},67284:(e,r,t)=>{t.d(r,{Z:()=>m});var a=t(70537),s=t(80308),l=t(6144),n=t(65809),o=t(66160),i=t(63965);const c=(0,s.FA)()[4].value,d=(0,s.J5)()[0].value,u={expire:c,times:d};function m(e){const[r,t]=(0,a.useState)(""),s=(0,o.CG)((r=>r.channels.byId[null!==e&&void 0!==e?e:0])),{data:m,isSuccess:x}=(0,n.n8)(),[p,{data:h,isLoading:g}]=(0,l.CU)(),[f,{data:b,isLoading:v}]=(0,l.Xi)(),{copied:w,copy:y}=(0,i.Z)({enableToast:!1});(0,a.useEffect)((()=>{!e||null!==s&&void 0!==s&&s.is_public?p({expire:c,times:d}):f({cid:e,expire:c,times:d})}),[e,s]),(0,a.useEffect)((()=>{const e=h||b;e&&x&&t(e)}),[h,b,x]);return{enableSMTP:m,generating:v||g,generateNewLink:function(){let r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u;const{expire:t,times:a}=r;!e||null!==s&&void 0!==s&&s.is_public?p({expire:t,times:a}):f({cid:e,expire:t,times:a})},link:r,linkCopied:w,copyLink:()=>{y(r)}}}},90322:(e,r,t)=>{t.r(r),t.d(r,{default:()=>O});var a=t(70537),s=t(62471),l=t(14566);const n=(0,a.createContext)(null);const o=()=>{const e=(0,a.useContext)(n);return e},i=(0,a.memo)((e=>{let{header:r,footer:t,children:s,wrapper:l,startIndex:o=0}=e;const[i,c]=(0,a.useState)(o),[d,u]=(0,a.useState)(!1),m=(0,a.useRef)(!0),x=(0,a.useRef)(!1),p=(0,a.useRef)((()=>{})),h=a.Children.toArray(s).length;m.current=i<h-1,x.current=i>0;const g=(0,a.useRef)((()=>{m.current&&c((e=>e+1))})),f=(0,a.useRef)((()=>{x.current&&(p.current=null,c((e=>e-1)))})),b=(0,a.useRef)((e=>{e>=0&&e<h&&(p.current=null,c(e))})),v=(0,a.useRef)((e=>{p.current=e})),w=(0,a.useRef)((async()=>{if(m.current&&p.current)try{u(!0),await p.current(),u(!1),p.current=null,g.current()}catch(e){throw u(!1),e}else g.current()})),y=(0,a.useMemo)((()=>({nextStep:w.current,previousStep:f.current,handleStep:v.current,isLoading:d,activeStep:i,stepCount:h,isFirstStep:!x.current,isLastStep:!m.current,goToStep:b.current})),[i,h,d]),j=(0,a.useMemo)((()=>a.Children.toArray(s)[i]),[i,s,r,t]),N=(0,a.useMemo)((()=>l?(0,a.cloneElement)(l,{children:j}):j),[l,j]);return(0,a.createElement)(n.Provider,{value:y},r,N,t)}));var c=t(57425),d=t(47912);const u=[{name:"welcomePage",label:(0,d.t)("welcome:onboarding.welcome_page")},{name:"serverName",label:(0,d.t)("welcome:onboarding.set_name")},{name:"adminAccount",label:(0,d.t)("welcome:onboarding.admin_account")},{name:"whoCanSignUp",label:(0,d.t)("welcome:onboarding.who_sign_up")},{name:"inviteLink",label:(0,d.t)("welcome:onboarding.invites"),canJumpTo:["whoCanSignUp"]},{name:"donePage",label:(0,d.t)("welcome:onboarding.done"),canJumpTo:["whoCanSignUp","inviteLink"]}];var m=t(27418),x=t(3074),p=t(15312),h=t(65809),g=t(21645),f=t(66160),b=t(4472),v=t(99487),w=t(80683);const y=e=>{let{serverName:r}=e;const{t:t}=(0,l.$G)("welcome",{keyPrefix:"onboarding"}),{nextStep:s}=o(),n=(0,a.useRef)(),i=(0,f.CG)((e=>!!e.authData.token)),c=(0,x.I0)(),[d,{isLoading:u,isError:y,isSuccess:j}]=(0,h.QK)(),[N,{isLoading:k,isError:_}]=(0,p.YA)(),{data:C}=(0,h.z3)(),[S,{isLoading:E,isSuccess:Z}]=(0,h.e2)(),[$,L]=(0,a.useState)(""),[P,R]=(0,a.useState)(""),[O,G]=(0,a.useState)("");return(0,a.useEffect)((()=>{y&&m.ZP.error("Failed to sign up")}),[y]),(0,a.useEffect)((()=>{j&&N({email:$,password:P,type:"password"})}),[j]),(0,a.useEffect)((()=>{_&&m.ZP.error("Login failed")}),[_]),(0,a.useEffect)((()=>{i&&C&&(c((0,g.R4)(!0)),S({...C,name:r}))}),[i]),(0,a.useEffect)((()=>{Z&&s()}),[Z]),(0,w.jsxs)("div",{className:"h-full flex-center flex-col text-center w-[360px] m-auto dark:text-gray-100",children:[(0,w.jsx)("span",{className:"text-2xl mb-2 font-bold",children:t("admin_title")}),(0,w.jsx)("span",{className:"text-sm mb-6",children:t("admin_desc")}),(0,w.jsxs)("form",{ref:n,action:"/",className:"flex flex-col gap-2 w-full",children:[(0,w.jsx)(v.Z,{className:"large",placeholder:"Enter your email",type:"email",required:!0,value:$,onChange:e=>L(e.target.value)}),(0,w.jsx)(v.Z,{className:"large",type:"password",required:!0,minLength:6,placeholder:"Enter your password",value:P,onChange:e=>R(e.target.value)}),(0,w.jsx)(v.Z,{className:"large",type:"password",required:!0,minLength:6,placeholder:"Confirm your password",value:O,onChange:e=>G(e.target.value)})]}),(0,w.jsx)(b.Z,{className:"mt-6 w-full",onClick:async()=>{const e=null===n||void 0===n?void 0:n.current;if(e){if(!e.checkValidity())return void e.reportValidity();d({email:$,name:"Admin",password:P,gender:0})}},children:u||k||E?"...":t("sign")})]})};var j=t(15924);const N=t.p+"static/media/play.ada446bc1d007eef6447.svg";function k(e){let{serverName:r}=e;const{t:t}=(0,l.$G)("welcome",{keyPrefix:"onboarding"}),a=(0,j.s0)();return(0,w.jsxs)("div",{className:"h-full px-2 flex-center flex-col text-center md:w-[588px] m-auto dark:text-gray-100",children:[(0,w.jsx)("span",{className:"text-2xl font-bold mb-2",children:t("done_welcome",{serverName:r})}),(0,w.jsx)("span",{className:"text-sm mb-12",children:t("done_title")}),(0,w.jsx)("span",{className:"text-xl mb-12",children:(0,w.jsx)(l.cC,{i18nKey:"onboarding.done_desc",ns:"welcome",children:(0,w.jsx)("span",{className:"font-bold"})})}),(0,w.jsxs)(b.Z,{className:"!w-32 h-auto flex flex-col items-center py-3",onClick:()=>a("/"),children:[(0,w.jsx)("img",{className:"mb-2",src:N,alt:"play icon"}),(0,w.jsx)("span",{className:"text-sm",children:t("enter")})]})]})}var _=t(67284),C=t(989);const S=e=>{let{refreshInviteLink:r}=e;const{t:t}=(0,l.$G)("welcome",{keyPrefix:"onboarding"}),{t:s}=(0,l.$G)(),[n,{isSuccess:o,isLoading:i}]=(0,h.UT)(),{data:c,isSuccess:d}=(0,h.wH)(),[u,x]=(0,a.useState)(location.origin);return(0,a.useEffect)((()=>{d&&c&&x(c)}),[d]),(0,a.useEffect)((()=>{o&&(r(),m.Am.success(s("tip.update")))}),[o]),(0,w.jsxs)("div",{className:"absolute left-1/2 -translate-x-1/2 bottom-8 border-2 border-solid border-primary-300 dark:border-primary-700 bg-primary-25 dark:bg-primary-900 rounded-lg px-2 py-3 flex justify-start gap-4",children:[(0,w.jsx)(C.Z,{}),(0,w.jsxs)("div",{className:"flex flex-col items-start gap-2",children:[(0,w.jsx)("span",{className:"text-sm text-primary-700 dark:text-primary-300 mb-1",children:t("update_domain_tip")}),(0,w.jsxs)("div",{className:"w-[300px] md:w-[400px] rounded flex gap-2",children:[(0,w.jsx)(v.Z,{type:"url",className:"!shadow-none md:!bg-transparent",placeholder:"Frontend URL",value:u,onChange:e=>{x(e.target.value)}}),(0,w.jsx)(b.Z,{disabled:!u||i,onClick:()=>{n(u)},className:"small ",children:s("action.update")})]})]})]})};function E(){const{t:e}=(0,l.$G)("welcome",{keyPrefix:"onboarding"}),{t:r}=(0,l.$G)(),{nextStep:t}=o(),{link:a,linkCopied:s,copyLink:n,generateNewLink:i}=(0,_.Z)();return(0,w.jsxs)("div",{className:"px-2 h-full flex-center flex-col relative dark:text-gray-100",children:[(0,w.jsx)("span",{className:"text-2xl mb-2 font-bold",children:e("invite_title")}),(0,w.jsx)("span",{className:"text-sm mb-10 text-gray-400 dark:text-gray-600",children:e("last_tip")}),(0,w.jsx)("span",{className:"text-sm text-gray-500 mb-2 font-semibold",children:e("last_desc")}),(0,w.jsxs)("div",{className:"w-full md:w-[400px] rounded shadow-md flex border border-solid border-gray-100",children:[(0,w.jsx)(v.Z,{className:"large !border-none !shadow-none",readOnly:!0,placeholder:"Generating",value:a}),(0,w.jsx)(b.Z,{onClick:n,className:"ghost small border_less !px-2 md:hover:!text-primary-600",children:s?"Copied":r("action.copy")})]}),(0,w.jsx)(b.Z,{className:"w-32 h-11 mt-6",onClick:t,children:e("done")}),(0,w.jsx)(S,{refreshInviteLink:i})]})}const Z=e=>{let{serverName:r,setServerName:t}=e;const{t:a}=(0,l.$G)("welcome",{keyPrefix:"onboarding"}),{nextStep:s}=o();return(0,w.jsxs)("div",{className:"h-full flex-center flex-col text-center w-[360px] m-auto dark:text-gray-200",children:[(0,w.jsx)("span",{className:"text-2xl mb-2 font-bold",children:a("new_server")}),(0,w.jsx)("span",{className:"text-sm mb-6 text-gray-400 dark:text-gray-600",children:a("server_desc")}),(0,w.jsx)(v.Z,{className:"h-11 px-3.5 py-2.5 border-gray-300 rounded-lg shadow",placeholder:a("placeholder_server"),value:r,onChange:e=>t(e.target.value)}),(0,w.jsx)(b.Z,{className:"w-full mt-6",onClick:()=>{""!==r?s():m.ZP.error("Please enter server name!")},children:a("create_server")})]})};function $(){const{t:e}=(0,l.$G)("welcome",{keyPrefix:"onboarding"}),{nextStep:r}=o();return(0,w.jsxs)("div",{className:"flex-center flex-col h-full text-center dark:text-gray-100",children:[(0,w.jsx)("span",{className:"text-2xl mb-2 font-bold",children:e("welcome")}),(0,w.jsx)("span",{className:"text-sm mb-6",children:e("welcome_desc")}),(0,w.jsxs)(b.Z,{className:"!w-32 h-auto flex flex-col gap-2 items-center py-3 text-sm",onClick:r,children:[(0,w.jsx)("img",{src:N,alt:"play icon"}),(0,w.jsx)("span",{children:e("start")})]})]})}var L=t(27459);function P(){const{t:e}=(0,l.$G)("welcome"),{t:r}=(0,l.$G)("setting"),{nextStep:t}=o(),{data:s,refetch:n}=(0,h.ww)(),[i,{isSuccess:c,error:d}]=(0,h.QP)(),[u,x]=(0,a.useState)();return(0,a.useEffect)((()=>{n()}),[]),(0,a.useEffect)((()=>{s&&(s.who_can_sign_up,x(s.who_can_sign_up))}),[s]),(0,a.useEffect)((()=>{void 0!==d&&m.ZP.error(`Failed to update sign up rule: ${d.data}`)}),[d]),(0,a.useEffect)((()=>{c&&t()}),[c]),(0,w.jsxs)("div",{className:"h-full px-2 flex-center flex-col text-center w-full md:w-[512px] m-auto dark:text-gray-100",children:[(0,w.jsx)("span",{className:"font-bold text-2xl mb-2",children:e("onboarding.invite_title")}),(0,w.jsx)("span",{className:"text-sm mb-6",children:e("onboarding.invite_desc")}),u&&(0,w.jsx)(L.Z,{options:[r("overview.sign_up.everyone"),r("overview.sign_up.invite")],values:["EveryOne","InvitationOnly"],value:u,onChange:x}),(0,w.jsx)(b.Z,{className:"w-32 mt-6",disabled:!u,onClick:()=>{void 0!==s&&(s.who_can_sign_up!==u?i({...s,who_can_sign_up:u}):t())},children:e("onboarding.confirm")})]})}const R=()=>{var e;const{activeStep:r,goToStep:t}=o(),s=(null===(e=u[r])||void 0===e?void 0:e.canJumpTo)||[];return(0,w.jsx)("div",{className:"hidden md:flex absolute top-5 w-full justify-center gap-2 z-10",children:u.map(((e,l)=>{const n=s.includes(e.name),o=`${(0,c.Z)("text-sm text-gray-600",n&&"cursor-pointer md:hover:text-gray-500",l===r&&"font-bold text-black",l>=r&&"text-gray-400")}`;return(0,w.jsxs)(a.Fragment,{children:[(0,w.jsx)("span",{className:o,onClick:()=>{n&&t(l)},children:e.label}),l!==u.length-1&&(0,w.jsx)("span",{className:o,children:"\u2192"})]},l)}))})};function O(){const{t:e}=(0,l.$G)("welcome"),[r,t]=(0,a.useState)("");return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(s.q,{children:(0,w.jsx)("title",{children:e("onboarding.title")})}),(0,w.jsx)("div",{className:"h-screen bg-gray-200 dark:bg-gray-900 overflow-y-auto",children:(0,w.jsxs)(i,{header:(0,w.jsx)(R,{}),children:[(0,w.jsx)($,{}),(0,w.jsx)(Z,{serverName:r,setServerName:t}),(0,w.jsx)(y,{serverName:r}),(0,w.jsx)(P,{}),(0,w.jsx)(E,{}),(0,w.jsx)(k,{serverName:r})]})})]})}}}]);