"use strict";(globalThis.webpackChunkvocechat_web=globalThis.webpackChunkvocechat_web||[]).push([[954],{24041:(e,t,i)=>{i.d(t,{Z:()=>o});var n,r=i(70537);function s(){return s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},s.apply(this,arguments)}const a=(e,t)=>{let{title:i,titleId:a,...o}=e;return r.createElement("svg",s({width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":a},o),i?r.createElement("title",{id:a},i):null,n||(n=r.createElement("path",{d:"M8.11904 0C3.91105 0 0.5 3.41105 0.5 7.61905C0.5 11.827 3.91105 15.2381 8.11904 15.2381C12.3271 15.2381 15.7381 11.827 15.7381 7.61905C15.7381 3.41105 12.3263 0 8.11904 0ZM11.7053 10.128L10.628 11.2053L8.11904 8.69714L5.61009 11.2053L4.53277 10.128L7.04095 7.61905L4.532 5.1101L5.60934 4.03353L8.11829 6.54248L10.6272 4.03353L11.7045 5.1101L9.19638 7.61905L11.7053 10.128Z",fill:"#6C737F"})))},o=(0,r.forwardRef)(a)},11972:(e,t,i)=>{i.d(t,{Z:()=>o});var n,r=i(70537);function s(){return s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},s.apply(this,arguments)}const a=(e,t)=>{let{title:i,titleId:a,...o}=e;return r.createElement("svg",s({width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":a},o),i?r.createElement("title",{id:a},i):null,n||(n=r.createElement("path",{d:"M16.5303 11.7204L16.4462 11.6478C16.1526 11.4299 15.7359 11.4541 15.4697 11.7204L12.7503 14.4397L12.75 7.75003L12.7432 7.64826C12.6935 7.28218 12.3797 7.00003 12 7.00003L11.8982 7.00688C11.5322 7.05654 11.25 7.37033 11.25 7.75003L11.2503 14.4417L8.52961 11.7198L8.4455 11.6472C8.15193 11.4293 7.73527 11.4534 7.46895 11.7196C7.176 12.0124 7.17591 12.4873 7.46875 12.7803L11.4687 16.7818L11.5529 16.8544C11.8465 17.0724 12.2632 17.0482 12.5295 16.7819L16.5303 12.7811L16.6029 12.6969C16.8208 12.4033 16.7966 11.9867 16.5303 11.7204ZM6.25 3C4.45507 3 3 4.45507 3 6.25V17.75C3 19.5449 4.45507 21 6.25 21H17.75C19.5449 21 21 19.5449 21 17.75V6.25C21 4.45507 19.5449 3 17.75 3H6.25ZM4.5 6.25C4.5 5.2835 5.2835 4.5 6.25 4.5H17.75C18.7165 4.5 19.5 5.2835 19.5 6.25V17.75C19.5 18.7165 18.7165 19.5 17.75 19.5H6.25C5.2835 19.5 4.5 18.7165 4.5 17.75V6.25Z",fill:"#616161"})))},o=(0,r.forwardRef)(a)},10189:(e,t,i)=>{i.d(t,{Z:()=>o});var n,r=i(70537);function s(){return s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},s.apply(this,arguments)}const a=(e,t)=>{let{title:i,titleId:a,...o}=e;return r.createElement("svg",s({width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":a},o),i?r.createElement("title",{id:a},i):null,n||(n=r.createElement("path",{d:"M14.2958 16.2945C13.9055 16.6853 13.906 17.3184 14.2968 17.7087C14.6876 18.0989 15.3207 18.0985 15.711 17.7077L20.7076 12.7043C21.0976 12.3137 21.0974 11.681 20.7072 11.2906L15.7106 6.29297C15.3201 5.9024 14.6869 5.90234 14.2964 6.29282C13.9058 6.6833 13.9057 7.31647 14.2962 7.70703L17.589 11H11C6.66509 11 3.13546 14.4478 3.00381 18.7508L3 19C3 19.5523 3.44772 20 4 20C4.55228 20 5 19.5523 5 19C5 15.7616 7.56557 13.1224 10.7751 13.0041L11 13H17.586L14.2958 16.2945Z",fill:"#667085"})))},o=(0,r.forwardRef)(a)},79180:(e,t,i)=>{i.d(t,{Z:()=>f});var n=i(70537),r=i(57889),s=i(97943),a=i(81721),o=i(18225),l=i(80874),d=i(80683);const c=r.F4`
  from {
    background: transparent;
  }
  to {
    background: rgba(1, 1, 1, 0.9);
  }
`,p=r.ZP.div`
  transition: all 0.5s ease;
  width: 100vw;
  height: 100vh;
  animation: ${c} 0.3s ease-in-out forwards;
  display: flex;
  align-items: center;
  justify-content: center;

  .box {
    position: relative;
    transition: all 0.2s ease;
    display: flex;
    flex-direction: column;
    justify-content: flex-start;
    gap: 10px;

    > .loading {
      position: absolute;
      top: 40%;
      left: 50%;
      transform: translateX(-50%);
    }

    > .image {
      overflow: auto;

      img {
        max-width: 70vw;
        max-height: 80vh;
      }
    }

    &.loading .image img {
      filter: blur(2px);
    }

    .origin {
      font-weight: bold;
      font-size: 14px;
      color: #aaa;

      &:hover {
        text-decoration: underline;
        color: #fff;
      }
    }
  }
`,f=e=>{let{download:t=!0,data:i,closeModal:r}=e;const[c,f]=(0,n.useState)(null===i||void 0===i?void 0:i.thumbnail),[u,h]=(0,n.useState)(!0),x=(0,n.useRef)(null);if((0,s.O)(x,r),(0,a.z)("Escape",(()=>{r()}),{eventTypes:["keyup"]}),(0,n.useEffect)((()=>{if(i){const{originUrl:e}=i;e||h(!1);const t=new Image;t.src=e,t.onload=()=>{f(e),h(!1)},t.onerror=()=>{h(!1)}}}),[i]),!i)return null;const{originUrl:g,downloadLink:m,name:v,type:w}=i;return(0,d.jsx)(l.Z,{children:(0,d.jsx)(p,{children:(0,d.jsxs)("div",{className:"box "+(u?"loading":""),ref:x,children:[(0,d.jsx)("div",{className:"image",children:(0,d.jsx)("img",{src:c,alt:"preview",className:"animate__animated animate__fadeIn animate__faster"})}),t&&(0,d.jsx)("a",{className:"origin",download:v,type:w,href:m||g,rel:"noreferrer",children:"Download original"}),u&&(0,d.jsx)("div",{className:"loading",children:(0,d.jsx)(o.Z,{})})]})})})}},84006:(e,t,i)=>{i.d(t,{Z:()=>p});var n=i(70537),r=(i(85012),i(69495),i(55403)),s=i.n(r),a=i(85606),o=i(57889),l=i(79180),d=i(80683);const c=o.ZP.div`
  * {
    user-select: text;
  }
  .toastui-editor-contents {
    display: flex;
    flex-direction: column;
    align-items: flex-start;
  }
`,p=e=>{let{content:t}=e;const i=(0,n.useRef)(null),[r,o]=(0,n.useState)(null);(0,n.useEffect)((()=>{const e=null===i||void 0===i?void 0:i.current;e&&e.addEventListener("click",(e=>{e.stopPropagation();const t=e.target;if(t&&"IMG"==t.nodeName){const e=new URL(t.src),i=`${e.origin}${e.pathname}?file_path=${e.searchParams.get("file_path")}`;o({originUrl:i})}}),!0)}),[]);return(0,d.jsxs)(d.Fragment,{children:[r&&(0,d.jsx)(l.Z,{download:!1,data:r,closeModal:()=>{o(null)}}),(0,d.jsx)(c,{ref:i,children:(0,d.jsx)(a.A,{initialValue:t,plugins:[s()]})})]})}},96954:(e,t,i)=>{i.d(t,{Z:()=>p});var n=i(70537),r=i(57889),s=i(17150),a=i(19076),o=i(64631),l=i(11855),d=i(80683);const c=r.ZP.div`
  display: flex;
  flex-direction: column;
  border-radius: var(--br);
  background-color: #f4f4f5;
`,p=e=>{let{id:t=""}=e;const{favorites:i}=(0,l.Z)({}),[r,p]=(0,n.useState)(null);return(0,n.useEffect)((()=>{const e=i.find((e=>e.id==t)),{messages:n}=e||{};if(!n)return;const r=n.map((e=>{let{from_mid:t}=e;return+t}))||[];p((0,d.jsx)(c,{"data-favorite-mids":r.join(","),className:"favorite",children:(0,d.jsx)("div",{className:"list",children:n.map(((e,t)=>{const{user:i={},download:n,content:r,content_type:l,properties:c,thumbnail:p}=e;return(0,d.jsxs)(s.Z,{className:"archive",children:[i&&(0,d.jsx)("div",{className:"avatar",children:(0,d.jsx)(o.Z,{url:i.avatar,name:i.name})}),(0,d.jsxs)("div",{className:"details",children:[(0,d.jsx)("div",{className:"up",children:(0,d.jsx)("span",{className:"name",children:(null===i||void 0===i?void 0:i.name)||"Deleted User"})}),(0,d.jsx)("div",{className:"down",children:(0,a.Z)({download:n,content:r,content_type:l,properties:c,thumbnail:p})})]})]},t)}))})}))}),[i,t]),t?r:null}},34115:(e,t,i)=>{i.d(t,{Z:()=>d});var n=i(7829),r=i(57889),s=i(71044),a=i(66160),o=i(80683);const l=r.ZP.span`
  padding: 0 2px;
  color: #1fe1f9;
  &.clickable {
    cursor: pointer;
  }
`,d=e=>{let{uid:t,popover:i=!0,cid:r,textOnly:d=!1}=e;const c=(0,a.CG)((e=>e.users.byId))[t];return c?d?`@${c.name}`:(0,o.jsx)(n.ZP,{disabled:!i,interactive:!0,placement:"top",trigger:"click",content:(0,o.jsx)(s.Z,{uid:t,type:"card",cid:r}),children:(0,o.jsx)(l,{className:i?"clickable":"",children:`@${c.name}`})}):null}},19076:(e,t,i)=>{i.d(t,{Z:()=>T});var n=i(70537),r=i(61241),s=i(7699),a=i.n(s),o=i(96919),l=i.n(o),d=i(80308),c=i(34115),p=i(57889),f=i(17150),u=i(64631),h=i(10189),x=i(21812),g=i(24783);var m=i(71893),v=i(80683);const w=p.ZP.div`
  display: flex;
  flex-direction: column;
  border-radius: var(--br);
  background-color: #f4f4f5;
  > .tip {
    padding: 8px 8px 0 8px;
    display: flex;
    align-items: center;
    gap: 4px;
    .icon {
      width: 16px;
      height: 16px;
      path {
        fill: #98a2b3;
      }
    }
    font-weight: 400;
    font-size: 12px;
    line-height: 18px;
    color: #98a2b3;
  }
`,b=e=>{let{context:t,to:i,from_uid:r,id:s}=e;const{t:a}=(0,m.$)(),{normalizeMessage:o,messages:l}=function(){const[e,t]=(0,n.useState)(null),[i,r]=(0,n.useState)(null),[s,{data:a,isError:o,isLoading:l,isSuccess:d}]=(0,g.uv)();return(0,n.useEffect)((()=>{if(a&&d){const t=(0,x.Hr)(a,e);r(t)}}),[a,d,e]),(0,n.useEffect)((()=>{e&&s(e)}),[e]),{normalizeMessage:e=>{t(e)},messages:i,isError:o,isLoading:l,isSuccess:d}}(),[d,c]=(0,n.useState)(null);return(0,n.useEffect)((()=>{s&&o(s)}),[s]),(0,n.useEffect)((()=>{if(l){const e=l.map((e=>{let{from_mid:t}=e;return t}))||[];c((0,v.jsxs)(w,{"data-forwarded-mids":e.join(","),children:[(0,v.jsxs)("h4",{className:"tip",children:[(0,v.jsx)(h.Z,{className:"icon"}),a("action.forward")]}),(0,v.jsx)("div",{className:"list",children:l.map(((e,n)=>{const{user:s={},download:a,content:o,content_type:l,properties:d,thumbnail:c}=e;return(0,v.jsxs)(f.Z,{className:"archive",children:[s&&(0,v.jsx)("div",{className:"avatar",children:(0,v.jsx)(u.Z,{url:s.avatar,name:s.name})}),(0,v.jsxs)("div",{className:"details",children:[(0,v.jsx)("div",{className:"up",children:(0,v.jsx)("span",{className:"name",children:(null===s||void 0===s?void 0:s.name)||"Deleted User"})}),(0,v.jsx)("div",{className:"down",children:T({download:a,context:t,to:i,from_uid:r,content:o,content_type:l,properties:d,thumbnail:c})})]})]},n)}))})]}))}}),[l,t,i,r]),s?d:null};var y=i(84006);const j=p.ZP.div`
  background: #f3f4f6;
  border: 1px solid #d4d4d4;
  box-sizing: border-box;
  border-radius: 6px;
  width: 370px;
  height: 66px;
  &.sending {
    opacity: 0.9;
  }
  * {
    user-select: text;
  }
  .basic {
    padding: 8px;
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 8px;
    .icon {
      width: 36px;
      height: 48px;
    }
    .info {
      display: flex;
      flex-direction: column;
      gap: 4px;
      width: 100%;
      overflow: hidden;
      .name {
        font-weight: 600;
        font-size: 14px;
        line-height: 20px;
        color: #1c1c1e;
        white-space: nowrap;
        text-overflow: ellipsis;
      }
      .details {
        white-space: nowrap;
        font-weight: 400;
        font-size: 12px;
        line-height: 18px;
        color: #616161;
        display: flex;
        gap: 16px;
        .from strong {
          font-weight: bold;
        }
      }
    }
    .download {
      white-space: nowrap;
    }
    .cancel {
      cursor: pointer;
    }
  }
`;var _=i(92443);i(51388);const Z=p.ZP.div`
  position: relative;
  width: fit-content;
  height: fit-content;
  > img {
    max-width: 480px;
    cursor: zoom-in;
    object-fit: cover;
  }
  .overlay {
    position: absolute;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    background: rgba(255, 255, 255, 0.4);
    display: flex;
    justify-content: center;
    align-items: center;
    .progress {
      width: 15px;
      height: 15px;
      .CircularProgressbar-path {
        stroke: #444;
      }
    }
  }
`,k=e=>{let{uploading:t,progress:i,thumbnail:r,download:s,content:a,properties:o}=e;const[l,d]=(0,n.useState)(r),{width:c=0,height:p=0}=(0,x.CW)(o);return(0,n.useEffect)((()=>{const e=r,t=new Image;t.onload=()=>{d(e)},t.onerror=()=>{d("")},t.src=e}),[r]),(0,v.jsxs)(Z,{children:[t&&(0,v.jsx)("div",{className:"overlay",children:(0,v.jsx)("div",{className:"progress",children:(0,v.jsx)(_.Ip,{value:i,strokeWidth:50,styles:(0,_.y3)({strokeLinecap:"butt"})})})}),(0,v.jsx)("img",{className:"img preview",style:{width:c?`${c}px`:"",height:p?`${p}px`:""},"data-meta":JSON.stringify(o),"data-origin":a,"data-download":s,src:l})]})};var L=i(53517),N=i(1823),C=i(88332),E=i(66160);var $=i(34265),S=i(62432);const P=p.ZP.div`
  background: #ecfdff;
  border-radius: 4px;
  height: 8px;
  overflow: hidden;
  .progress {
    transition: all 0.25s ease;
    height: 8px;
    background: #088ab2;
    border-radius: 4px;
  }
`,z=e=>{let{value:t,width:i="100%"}=e;return(0,v.jsx)(P,{style:{width:i},children:(0,v.jsx)("div",{className:"progress",style:{width:`${t}%`}})})};var F=i(11972),O=i(24041);const M=e=>e.startsWith("blob:"),R=e=>{let{context:t,to:i,created_at:r,from_uid:s,content:o="",download:l="",thumbnail:d="",properties:c={local_id:0,name:"",size:0,content_type:""}}=e;const[p,f]=(0,n.useState)(null),[u,h]=(0,n.useState)(!1),g=function(e){let{context:t="user",id:i=0}=e;const n=(0,E.TL)(),r="channel"==t?N.nF:C.Fs;return e=>{n(r({id:i,mid:e})),n((0,L.Gd)(e))}}({context:t,id:i}),{sendMessage:m,isSuccess:w,isSending:b}=(0,S.Z)({context:t,from:s,to:i}),{stopUploading:y,data:_,uploadFile:Z,progress:P,isSuccess:R}=(0,$.Z)(),U=(0,E.CG)((e=>e.users.byId[s])),{size:I=0,name:D,content_type:T}=null!==c&&void 0!==c?c:{};(0,n.useEffect)((()=>{M(o)&&(async e=>{let{url:t,name:i,type:n}=e;try{if(h(!0),n.startsWith("image")){const e=await(0,x.Ad)(t);f(e)}let e=await fetch(t).then((e=>e.blob())).then((e=>new File([e],i,{type:n})));await Z(e),h(!1)}catch(r){h(!1)}})({url:o,name:D,type:T})}),[o,D,T]),(0,n.useEffect)((()=>{const e=null!==c&&void 0!==c?c:{},t=p?{...e,...p}:e;if(R&&M(o)){const{path:e}=_;m({ignoreLocal:!0,type:"file",content:{path:e},properties:t})}}),[R,_,c,o]),(0,n.useEffect)((()=>{w&&URL.revokeObjectURL(o)}),[w,o]);if(!c)return null;const G=(0,x.LP)(T,D);if(!o||!D)return null;const H=u||b;return(0,x.Or)(T,I)?(0,v.jsx)(k,{uploading:H,progress:P,properties:{...p,...c},content:o,download:l,thumbnail:d},null===c||void 0===c?void 0:c.local_id):(0,v.jsx)(j,{className:"file_message "+(H?"sending":""),children:(0,v.jsxs)("div",{className:"basic",children:[G,(0,v.jsxs)("div",{className:"info",children:[(0,v.jsx)("span",{className:"name",children:D}),(0,v.jsx)("span",{className:"details",children:H?(0,v.jsx)(z,{value:P,width:"80%"}):(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)("i",{className:"size",children:(0,x.td)(I)}),(0,v.jsx)("i",{className:"time",children:a()(r).fromNow()}),U&&(0,v.jsxs)("i",{className:"from",children:["by ",(0,v.jsx)("strong",{children:U.name})]})]})})]}),H?(0,v.jsx)(O.Z,{className:"cancel",onClick:()=>{y(),URL.revokeObjectURL(o),g(c.local_id)}}):(0,v.jsx)("a",{className:"download",download:D,href:`${o}&download=true`,children:(0,v.jsx)(F.Z,{})})]})})},U=p.ZP.a`
  background: #f3f4f6;
  border: 1px solid #d4d4d4;
  box-sizing: border-box;
  border-radius: 6px;
  padding: 12px 8px;
  display: flex;
  align-items: center;
  gap: 8px;
  width: 380px;
  .favicon {
    display: flex;
    width: 48px;
    height: 48px;
    border-radius: 4px;
    img {
      object-fit: contain;
    }
  }
  .info {
    display: flex;
    flex-direction: column;
    .title {
      font-style: normal;
      font-weight: 600;
      font-size: 14px;
      line-height: 20px;
      color: #1c1c1e;
    }
    .desc {
      font-weight: 500;
      font-size: 12px;
      line-height: 18px;
      color: #616161;
    }
    .link {
      font-weight: 400;
      font-size: 10px;
      line-height: 18px;
      color: #616161;
    }
    .dots {
      width: 288px;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }
  }
`,I=p.ZP.a`
  width: 380px;
  padding: 12px;
  background: #f3f4f6;
  border: 1px solid #d4d4d4;
  box-sizing: border-box;
  border-radius: 6px;
  display: flex;
  flex-direction: column;
  .title {
    font-weight: 600;
    font-size: 16px;
    line-height: 24px;
    color: #06aed4;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  }
  .desc {
    font-weight: 400;
    font-size: 12px;
    line-height: 18px;
    color: #616161;
    margin-bottom: 8px;
    width: 356px;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  }
  .image {
    width: 100%;
    height: 180px;
    img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }
  }
`;function D(e){let{url:t=""}=e;const[i,r]=(0,n.useState)(""),[s]=(0,g.rf)(),[a,o]=(0,n.useState)(null);(0,n.useEffect)((()=>{(async e=>{var t;const{data:i}=await s(e),n=(null===i||void 0===i?void 0:i.title)||(null===i||void 0===i?void 0:i.site_name)||"",a=(null===i||void 0===i?void 0:i.description)||"",l=(null===i||void 0===i||null===(t=i.images.find((e=>!!e.url)))||void 0===t?void 0:t.url)||"",d=(null===i||void 0===i?void 0:i.favicon_url)||`${new URL(e).origin}/favicon.ico`;r(d),o({title:n,description:a,ogImage:l})})(t)}),[t]);if(!t||!a||!a.title)return null;const{title:l,description:d,ogImage:c}=a;return c?(0,v.jsxs)(I,{href:t,target:"_blank",children:[(0,v.jsx)("h3",{className:"title",children:l}),(0,v.jsx)("p",{className:"desc dots",children:d}),(0,v.jsx)("div",{className:"image",children:(0,v.jsx)("img",{src:c,alt:"og image"})})]}):(0,v.jsxs)(U,{href:t,target:"_blank",children:[i&&(0,v.jsx)("div",{className:"favicon",children:(0,v.jsx)("img",{onError:()=>{r("")},src:i,alt:"favicon"})}),(0,v.jsxs)("div",{className:"info",children:[(0,v.jsx)("h3",{className:"title",children:l}),(0,v.jsx)("p",{className:"desc dots",children:d}),(0,v.jsx)("span",{className:"link dots",children:t})]})]})}const T=e=>{let{context:t,to:i=0,from_uid:s=0,created_at:o,properties:p,content_type:f,content:u,download:h,thumbnail:x,edited:g=!1}=e,m=null;switch(f){case d.bT.text:m=(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(r.Z,{componentDecorator:(e,t,i)=>(0,v.jsxs)(n.Fragment,{children:[(0,v.jsx)("a",{className:"link",target:"_blank",href:e,rel:"noreferrer",children:t},i),!e.startsWith("mailto")&&(0,v.jsx)(D,{url:e})]},i),children:l()(u,/(\s{1}@[0-9]+\s{1})/g,((e,t)=>{const n=e.trim().slice(1);return(0,v.jsx)(c.Z,{uid:+n,cid:i},t)}))}),g&&(0,v.jsx)("span",{className:"edited",title:a()(+g).format("YYYY-MM-DD h:mm:ss A"),children:"(edited)"})]});break;case d.bT.markdown:m=(0,v.jsx)(y.Z,{content:u});break;case d.bT.file:m=(0,v.jsx)(R,{properties:p,context:t,to:i,download:h,thumbnail:x,from_uid:s,created_at:o,content:u});break;case d.bT.archive:m=(0,v.jsx)(b,{properties:p,context:t,to:i,from_uid:s,created_at:o,id:u,thumbnail:x})}return m}},17150:(e,t,i)=>{i.d(t,{Z:()=>n});const n=i(57889).ZP.div`
  position: relative;
  display: flex;
  align-items: flex-start;
  gap: 16px;
  padding: 4px 8px;
  margin: 8px 0;
  border-radius: 8px;
  &[data-highlight="true"] {
    background: #f5f6f7;
  }
  &.pinned {
    background: #ecfdff;
  }
  &:hover,
  &.contextVisible,
  &.preview {
    background: #f5f6f7;
    .cmds {
      visibility: visible;
    }
  }
  &.readonly:hover {
    background: none;
  }
  > .avatar {
    flex-shrink: 0;
    cursor: pointer;
    width: 40px;
    height: 40px;
    img {
      object-fit: cover;
      width: 100%;
      height: 100%;
      border-radius: 50%;
    }
  }
  > .details {
    width: 100%;
    display: flex;
    flex-direction: column;
    gap: 8px;
    .up {
      display: flex;
      align-items: center;
      gap: 8px;
      font-weight: 500;
      .name {
        color: #06b6d4;
        font-style: normal;
        font-size: 14px;
        line-height: 20px;
      }
      .time {
        color: #bfbfbf;
        font-size: 12px;
        line-height: 18px;
      }
    }
    .down {
      user-select: text;
      color: #374151;
      font-weight: normal;
      font-size: 14px;
      line-height: 20px;
      word-break: break-all;
      white-space: pre-wrap;
      .edited {
        margin-left: 5px;
        color: #999;
        font-size: 10px;
      }
      &.sending {
        opacity: 0.9;
      }
      > .link {
        text-decoration: none;
        border-radius: 2px;
        /* background-color: #f5feff; */
        padding: 2px;
        color: #1fe1f9;
      }
    }
  }
  &.archive {
    gap: 8px;
    .avatar {
      width: 24px;
      height: 24px;
    }
    > .details {
      gap: 0;
      .up .name {
        font-weight: 600;
        color: #475467;
      }
      .down {
        color: #475467;
      }
    }
  }
  &.pinned {
    padding-top: 26px;
    > .details {
      position: relative;
      &:before {
        position: absolute;
        left: 0;
        top: -4px;
        transform: translateY(-100%);
        content: attr(data-pin-tip);
        font-weight: 400;
        font-size: 12px;
        line-height: 18px;
        color: #98a2b3;
      }
    }
  }
`},11855:(e,t,i)=>{i.d(t,{Z:()=>a});var n=i(70537),r=i(24783),s=i(66160);function a(e){let{cid:t=null,uid:i=null}=e;const[a]=(0,r.DJ)(),[o]=(0,r.mK)(),[l,d]=(0,n.useState)([]),{favs:c=[]}=(0,s.CG)((e=>({favs:e.favorites})));return(0,n.useEffect)((()=>{let e=[];e=t?c.filter((e=>!!e.messages&&e.messages.every((e=>e.source.gid==t)))):c,e=i?e.filter((e=>!!e.messages&&e.messages.every((e=>e.source.uid==i)))):e,d(e)}),[t,i,c]),{isFavorited:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(!e)return!1;let t=[];return l.forEach((e=>{var i;if(1==(null===e||void 0===e||null===(i=e.messages)||void 0===i?void 0:i.length)){const i=e.messages.map((e=>e.from_mid));t=[...t,...i]}})),t.findIndex((t=>t==e))>-1},addFavorite:async e=>{const t=Array.isArray(e)?e.map((e=>+e)):[+e];if(0==t.length)return;return!("error"in await o(t))},removeFavorite:e=>{e&&a(e)},favorites:l}}},62432:(e,t,i)=>{i.d(t,{Z:()=>d});var n=i(27418),r=i(53517),s=i(6144),a=i(52334),o=i(24783),l=i(66160);const d=e=>{const{context:t="user",from:i=0,to:d=0}=e||{},c=(0,l.TL)(),p=(0,l.CG)((e=>e.ui.uploadFiles[`${t}_${d}`]||[])),[f,{isError:u,isLoading:h,isSuccess:x}]=(0,o.qt)(),[g,{isLoading:m,isSuccess:v,isError:w}]=(0,s.R4)(),[b,{isLoading:y,isSuccess:j,isError:_}]=(0,a.bm)(),Z="user"==t?b:g,k=()=>{c((0,r.XS)(`${t}_${d}`))};return{setReplying:e=>{0===p.length?c((0,r.MQ)({mid:e,key:`${t}_${d}`})):n.ZP.error("Only text is supported when replying a message")},removeReplying:k,sendMessages:async e=>{let{type:t="text",content:i,users:n=[],channels:r=[]}=e;if(n.length)for await(const s of n)await b({type:t,id:s,content:i});if(r.length)for await(const s of r)await g({type:t,id:s,content:i})},sendMessage:async e=>{let{type:t="text",content:n="",properties:r,reply_mid:s,...a}=e;s?(k(),await f({from_uid:i,reply_mid:s,type:t,content:n})):await Z({id:d,content:n,properties:r,type:t,from_uid:i,...a})},isError:w||_||u,isSending:y||m||h,isSuccess:v||j||x}}},34265:(e,t,i)=>{i.d(t,{Z:()=>d});var n=i(70537),r=i(27418),s=i(12564),a=i(80308),o=i(24783),l=i(66160);const d=e=>{const{context:t,id:i}=e||{context:"channel",id:0},d=(0,l.TL)(),{stageFiles:c,replying:p}=(0,l.CG)((e=>({stageFiles:e.ui.uploadFiles[`${t}_${i}`]||[],replying:e.message.replying[`${t}_${i}`]}))),[f,u]=(0,n.useState)(null),h=(0,n.useRef)(!1),x=(0,n.useRef)(0),g=(0,n.useRef)(1),[m,{isLoading:v}]=(0,o.$_)(),[w,{isLoading:b,isError:y}]=(0,o.Yh)(),j=e=>{const{file_id:t,chunk:i,is_last:n}=e,r=new FormData;return r.append("file_id",t),r.append("chunk_data",i),r.append("chunk_is_last",`${n}`),w(r)};return{stopUploading:()=>{h.current=!0},data:f,isUploading:v||b,progress:+Number(x.current/g.current*100).toFixed(2),uploadFile:async e=>{if(!e)return;u(null);const{name:t=`-${+new Date}.${e.type.split("/")[1]}`,type:i,size:n}=e,s=await m({content_type:i,filename:t});if("error"in s)return void r.ZP.error("Prepare Upload File Error");const o=s.data;let l=null;if(h.current=!1,g.current=1,x.current=0,n<=2e6)l=await j({file_id:o,chunk:e,is_last:!0}),x.current=1;else{g.current=Math.ceil(n/a.Pb);const t=g.current,r=new Array(t);for await(const[n]of r.entries()){if(h.current)break;try{const t=e.slice(a.Pb*n,a.Pb*(n+1),i);l=await j({file_id:o,chunk:t,is_last:n==r.length-1}),x.current++}catch(w){return}}}if(!l||"error"in l)return;const{path:d,size:c,hash:p}=l.data,f=encodeURIComponent(d),v={name:t,file_type:i,path:d,size:c,hash:p,url:`${a.ZP}/resource/file?file_path=${f}`,thumbnail:i.startsWith("image")?`${a.ZP}/resource/file?file_path=${f}&thumbnail=true`:"",download:`${a.ZP}/resource/file?file_path=${f}&download=true`};return u(v),v},isError:y,isSuccess:!!f,stageFiles:c,addStageFile:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};p?r.ZP.error("Only text is supported when replying a message"):d((0,s.tD)({context:t,id:i,data:e}))},resetStageFiles:()=>{d((0,s.tD)({context:t,id:i,operation:"reset"}))},removeStageFile:e=>{d((0,s.tD)({context:t,id:i,operation:"remove",index:e}))},updateStageFile:function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};d((0,s.tD)({context:t,id:i,operation:"update",index:e,...n}))}}}}}]);