"use strict";(globalThis.webpackChunkvocechat_web=globalThis.webpackChunkvocechat_web||[]).push([[15],{94557:(e,t,n)=>{n.d(t,{Z:()=>l});var r=n(14566),s=n(65809),a=n(21812),o=n(80683);const l=e=>{let{empty:t=!1,version:n,children:l}=e;const{t:i}=(0,r.$G)(),{data:c,isSuccess:d}=(0,s.p5)();if(!d)return null;return(0,a.yC)(c,n)<0?t?null:(0,o.jsxs)("div",{className:"flex flex-col gap-2 items-start border border-solid border-orange-500 p-3 rounded-lg w-fit",children:[(0,o.jsx)("span",{className:"text-gray-400 text-sm",children:(0,o.jsx)(r.cC,{i18nKey:"server_update.version_needed",children:(0,o.jsx)("strong",{className:"font-bold",children:{version:n}})})}),(0,o.jsx)("span",{className:"text-gray-400 text-sm",children:(0,o.jsx)(r.cC,{i18nKey:"server_update.current_version",children:(0,o.jsx)("strong",{className:"font-bold",children:{version:c}})})}),(0,o.jsx)("span",{className:"text-gray-400 text-sm",children:i("server_update.update_tip")}),(0,o.jsxs)("a",{className:"text-blue-500 underline",href:"https://doc.voce.chat/install/install-by-docker#update-vocechat-docker",target:"_blank",rel:"noopener noreferrer",children:[i("server_update.howto"),"  \ud83d\udcd6 "]})]}):l}},17237:(e,t,n)=>{n.d(t,{Z:()=>c});var r=n(70537),s=n(40182),a=n(87442),o=n(80683);const l=a.ZP.div`
  width: 100%;
  position: relative;
  display: flex;
  overflow: hidden;
  border-radius: 4px;
  border: 1px solid #e5e7eb;
  box-shadow: 0px 1px 2px rgba(31, 41, 55, 0.08);

  .prefix {
    padding: 8px 16px;
    font-weight: 400;
    font-size: 14px;
    line-height: 20px;
    color: #9ca3af;
    background: #f3f4f6;
    border-right: 1px solid #e5e7eb;
  }

  .view {
    position: absolute;
    top: 50%;
    right: 10px;
    transform: translateY(-50%);
    cursor: pointer;
  }
`,i=a.ZP.input`
  width: 100%;
  background: #ffffff;
  font-weight: normal;
  font-size: 14px;
  line-height: 20px;
  color: #333;
  padding: 8px;
  outline: none;

  &:not(.inner) {
    border-radius: 4px;
    border: 1px solid #e5e7eb;
    box-shadow: 0px 1px 2px rgba(31, 41, 55, 0.08);
  }

  &.large {
    font-weight: 400;
    font-size: 14px;
    line-height: 20px;
    padding: 11px 8px;
  }

  &.none {
    outline: none;
    border: none;
    background: none;
    box-shadow: none;
  }

  &:disabled {
    color: #78787c;
    background-color: #f9fafb;
  }

  &::placeholder {
    color: #d1d5db;
  }

  &[type="password"] {
    padding-right: 30px;
  }
`,c=e=>{let{type:t="text",prefix:n="",className:a,...c}=e;const[d,u]=(0,r.useState)(t);return"password"==t?(0,o.jsxs)(l,{className:a,children:[(0,o.jsx)(i,{type:d,autoComplete:"password"==d?"current-password":"on",className:`inner ${a}`,...c}),(0,o.jsx)("div",{className:"view",onClick:()=>{u((e=>"password"==e?"text":"password"))},children:"password"==d?(0,o.jsx)(s.MBb,{color:"#78787c"}):(0,o.jsx)(s.Rbo,{color:"#78787c"})})]}):n?(0,o.jsxs)(l,{className:a,children:[(0,o.jsx)("span",{className:"prefix",children:n}),(0,o.jsx)(i,{className:`inner ${a}`,type:d,...c})]}):(0,o.jsx)(i,{type:d,className:a,...c})}},15621:(e,t,n)=>{n.d(t,{Z:()=>l});var r=n(70537),s=n(80683);const a="",o=[],l=e=>{let{options:t,values:n=o,value:l=a,defaultValue:i="",onChange:c}=e;const d=(0,r.useId)(),[u,p]=(0,r.useState)(i),m=l!==a?l:u;return(0,s.jsx)("form",{className:"w-full flex flex-col gap-2",children:t.map(((e,t)=>(0,s.jsxs)("div",{className:"relative bg-transparent",children:[(0,s.jsx)("input",{className:"absolute top-0 left-0 w-full h-full opacity-0 cursor-pointer peer z-50",type:"radio",checked:(n!==o?n.indexOf(m):m)===t,onChange:()=>{const e=n===o?t:n[t];l===a&&p(e),c&&c(e)},id:`${d}-${t}`}),(0,s.jsx)("div",{className:"drop-shadow px-2 py-3 border border-solid border-[#d0d5dd] rounded-lg w-full h-full bg-white peer-checked:bg-primary-400 text-sm text-gray-500  peer-checked:text-white",children:(0,s.jsx)("label",{className:"ml-6",htmlFor:`${d}-${t}`,children:e})}),(0,s.jsx)("div",{className:"absolute top-1/2 left-3 -translate-y-1/2 w-3.5 h-3.5 rounded-full border border-gray-300 peer-checked:hidden"}),(0,s.jsx)("div",{className:"absolute top-1/2 left-3 -translate-y-1/2 w-3.5 h-3.5 rounded-full border border-white invisible peer-checked:visible flex-center",children:(0,s.jsx)("div",{className:"w-1 h-1 bg-white rounded-full"})})]},t)))})}},26209:(e,t,n)=>{n.d(t,{Z:()=>o});var r=n(70537),s=n(34108),a=n(27418);const o=e=>{const{enableToast:t=!0}=e||{},[n,o]=(0,r.useState)(!1);(0,r.useEffect)((()=>{n&&t&&a.ZP.success("Copied!")}),[n]);const l=e=>{const t=document.createElement("textarea");t.value=e,t.setAttribute("readonly",""),t.style.position="absolute",t.style.left="-9999px",document.body.appendChild(t);const n=document.getSelection();if(!n)return!1;const r=n.rangeCount>0&&n.getRangeAt(0);t.select();const s=document.execCommand("copy");return document.body.removeChild(t),r&&(n.removeAllRanges(),n.addRange(r)),s};return{copied:n,copy:function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=0;return n||(t?(0,s.VP)(e).then((()=>{o(!0),r=window.setTimeout((()=>{o(!1)}),500)})):(o(l(e)),r=window.setTimeout((()=>{o(!1)}),500))),()=>{clearTimeout(r)}}}}},4884:(e,t,n)=>{n.d(t,{Z:()=>l});var r=n(70537),s=n(26209),a=n(65809),o=n(6144);function l(e){const[t,n]=(0,r.useState)(""),{data:l,isSuccess:i}=(0,a.n8)(),[c,{data:d,isLoading:u}]=(0,o.CU)(),{copied:p,copy:m}=(0,s.Z)({enableToast:!1});(0,r.useEffect)((()=>{c(e)}),[e]),(0,r.useEffect)((()=>{d&&i&&n(d)}),[d,i]);return{enableSMTP:l,generating:u,generateNewLink:e?c.bind(null,e):()=>{c()},link:t,linkCopied:p,copyLink:()=>{m(t)}}}},33237:(e,t,n)=>{n.r(t),n.d(t,{default:()=>I});var r=n(70537),s=n(62471);const a=(0,r.createContext)(null);const o=()=>{const e=(0,r.useContext)(a);return e},l=(0,r.memo)((e=>{let{header:t,footer:n,children:s,wrapper:o,startIndex:l=0}=e;const[i,c]=(0,r.useState)(l),[d,u]=(0,r.useState)(!1),p=(0,r.useRef)(!0),m=(0,r.useRef)(!1),x=(0,r.useRef)((()=>{})),h=r.Children.toArray(s).length;p.current=i<h-1,m.current=i>0;const f=(0,r.useRef)((()=>{p.current&&c((e=>e+1))})),g=(0,r.useRef)((()=>{m.current&&(x.current=null,c((e=>e-1)))})),b=(0,r.useRef)((e=>{e>=0&&e<h&&(x.current=null,c(e))})),v=(0,r.useRef)((e=>{x.current=e})),w=(0,r.useRef)((async()=>{if(p.current&&x.current)try{u(!0),await x.current(),u(!1),x.current=null,f.current()}catch(e){throw u(!1),e}else f.current()})),j=(0,r.useMemo)((()=>({nextStep:w.current,previousStep:g.current,handleStep:v.current,isLoading:d,activeStep:i,stepCount:h,isFirstStep:!m.current,isLastStep:!p.current,goToStep:b.current})),[i,h,d]),y=(0,r.useMemo)((()=>r.Children.toArray(s)[i]),[i,s,t,n]),N=(0,r.useMemo)((()=>o?(0,r.cloneElement)(o,{children:y}):y),[o,y]);return(0,r.createElement)(a.Provider,{value:j},t,N,n)}));var i=n(69885);const c=n.p+"static/media/play.ada446bc1d007eef6447.svg";var d=n(14566),u=n(80683);function p(){const{t:e}=(0,d.$G)("welcome",{keyPrefix:"onboarding"}),{nextStep:t}=o();return(0,u.jsxs)("div",{className:"flex-center flex-col h-full text-center",children:[(0,u.jsx)("span",{className:"text-2xl mb-2 font-bold",children:e("welcome")}),(0,u.jsx)("span",{className:"text-sm mb-6",children:e("welcome_desc")}),(0,u.jsxs)(i.Z,{className:"!w-32 flex flex-col gap-2 items-center py-3 text-sm",onClick:t,children:[(0,u.jsx)("img",{src:c,alt:"play icon"}),(0,u.jsx)("span",{children:e("start")})]})]})}var m=n(27418),x=n(17237);const h=e=>{let{serverName:t,setServerName:n}=e;const{t:r}=(0,d.$G)("welcome",{keyPrefix:"onboarding"}),{nextStep:s}=o();return(0,u.jsxs)("div",{className:"h-full flex-center flex-col text-center w-[360px] m-auto",children:[(0,u.jsx)("span",{className:"text-2xl mb-2 font-bold",children:r("new_server")}),(0,u.jsx)("span",{className:"text-sm mb-6 text-gray-400 ",children:r("server_desc")}),(0,u.jsx)(x.Z,{className:"h-11 px-3.5 py-2.5 border-gray-300 rounded-lg shadow",placeholder:r("placeholder_server"),value:t,onChange:e=>n(e.target.value)}),(0,u.jsx)(i.Z,{className:"w-full mt-6",onClick:()=>{""!==t?s():m.ZP.error("Please enter server name!")},children:r("create_server")})]})};var f=n(3074),g=n(65809),b=n(15312),v=n(21645),w=n(66160);const j=e=>{let{serverName:t}=e;const{t:n}=(0,d.$G)("welcome",{keyPrefix:"onboarding"}),{nextStep:s}=o(),a=(0,r.useRef)(),l=(0,w.CG)((e=>!!e.authData.token)),c=(0,f.I0)(),[p,{isLoading:h,isError:j,isSuccess:y}]=(0,g.QK)(),[N,{isLoading:C,isError:k}]=(0,b.YA)(),{data:_}=(0,g.z3)(),[S,{isLoading:E,isSuccess:Z}]=(0,g.e2)(),[P,L]=(0,r.useState)(""),[$,R]=(0,r.useState)(""),[G,T]=(0,r.useState)("");return(0,r.useEffect)((()=>{j&&m.ZP.error("Failed to sign up")}),[j]),(0,r.useEffect)((()=>{y&&N({email:P,password:$,type:"password"})}),[y]),(0,r.useEffect)((()=>{k&&m.ZP.error("Login failed")}),[k]),(0,r.useEffect)((()=>{l&&_&&(c((0,v.R4)(!0)),S({..._,name:t}))}),[l]),(0,r.useEffect)((()=>{Z&&s()}),[Z]),(0,u.jsxs)("div",{className:"h-full flex-center flex-col text-center w-[360px] m-auto",children:[(0,u.jsx)("span",{className:"text-2xl mb-2 font-bold",children:n("admin_title")}),(0,u.jsx)("span",{className:"text-sm mb-6",children:n("admin_desc")}),(0,u.jsxs)("form",{ref:a,action:"/",className:"flex flex-col gap-2 w-full",children:[(0,u.jsx)(x.Z,{className:"large",placeholder:"Enter your email",type:"email",required:!0,value:P,onChange:e=>L(e.target.value)}),(0,u.jsx)(x.Z,{className:"large",type:"password",required:!0,minLength:6,placeholder:"Enter your password",value:$,onChange:e=>R(e.target.value)}),(0,u.jsx)(x.Z,{className:"large",type:"password",required:!0,minLength:6,placeholder:"Confirm your password",value:G,onChange:e=>T(e.target.value)})]}),(0,u.jsx)(i.Z,{className:"mt-6 w-full",onClick:async()=>{const e=null===a||void 0===a?void 0:a.current;if(e){if(!e.checkValidity())return void e.reportValidity();p({email:P,name:"Admin",password:$,gender:0})}},children:h||C||E?"...":n("sign")})]})};var y=n(15621);function N(){const{t:e}=(0,d.$G)("welcome"),{t:t}=(0,d.$G)("setting"),{nextStep:n}=o(),{data:s,refetch:a}=(0,g.ww)(),[l,{isSuccess:c,error:p}]=(0,g.QP)(),[x,h]=(0,r.useState)();return(0,r.useEffect)((()=>{a()}),[]),(0,r.useEffect)((()=>{s&&h(s.who_can_sign_up)}),[s]),(0,r.useEffect)((()=>{void 0!==p&&m.ZP.error(`Failed to update sign up rule: ${p.data}`)}),[p]),(0,r.useEffect)((()=>{c&&n()}),[c]),(0,u.jsxs)("div",{className:"h-full flex-center flex-col text-center w-[512px] m-auto",children:[(0,u.jsx)("span",{className:"font-bold text-2xl mb-2",children:e("onboarding.invite_title")}),(0,u.jsx)("span",{className:"text-sm mb-6",children:e("onboarding.invite_desc")}),x&&(0,u.jsx)(y.Z,{options:[t("overview.sign_up.everyone"),t("overview.sign_up.invite")],values:["EveryOne","InvitationOnly"],value:x,onChange:h}),(0,u.jsx)(i.Z,{className:"w-32 mt-6",disabled:!x,onClick:()=>{void 0!==s&&(s.who_can_sign_up!==x?l({...s,who_can_sign_up:x}):n())},children:e("onboarding.confirm")})]})}var C,k,_=n(4884),S=n(94557);function E(){return E=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},E.apply(this,arguments)}const Z=(e,t)=>{let{title:n,titleId:s,...a}=e;return r.createElement("svg",E({width:20,height:20,viewBox:"0 0 20 20",stroke:"#088AB2",fill:"white",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":s},a),n?r.createElement("title",{id:s},n):null,C||(C=r.createElement("g",{clipPath:"url(#clip0_1130_82786)"},r.createElement("path",{d:"M9.99984 13.3334V10M9.99984 6.66669H10.0082M18.3332 10C18.3332 14.6024 14.6022 18.3334 9.99984 18.3334C5.39746 18.3334 1.6665 14.6024 1.6665 10C1.6665 5.39765 5.39746 1.66669 9.99984 1.66669C14.6022 1.66669 18.3332 5.39765 18.3332 10Z",strokeWidth:1.66667,strokeLinecap:"round",strokeLinejoin:"round"}))),k||(k=r.createElement("defs",null,r.createElement("clipPath",{id:"clip0_1130_82786"},r.createElement("rect",{width:20,height:20})))))},P=(0,r.forwardRef)(Z),L=e=>{let{refreshInviteLink:t}=e;const{t:n}=(0,d.$G)("welcome",{keyPrefix:"onboarding"}),{t:s}=(0,d.$G)(),[a,{isSuccess:o,isLoading:l}]=(0,g.UT)(),{data:c,isSuccess:p}=(0,g.wH)(),[h,f]=(0,r.useState)(location.origin);return(0,r.useEffect)((()=>{p&&c&&f(c)}),[p]),(0,r.useEffect)((()=>{o&&(t(),m.Am.success(s("tip.update")))}),[o]),(0,u.jsxs)("div",{className:"absolute left-1/2 -translate-x-1/2 bottom-8 border-2 border-solid border-[#67E3F9] bg-[#F5FEFF] rounded-lg px-2 py-3 flex justify-start gap-4",children:[(0,u.jsx)(P,{}),(0,u.jsxs)("div",{className:"flex flex-col items-start gap-2",children:[(0,u.jsx)("span",{className:"text-sm text-[#0E7090] mb-1",children:n("update_domain_tip")}),(0,u.jsxs)("div",{className:"w-[400px] rounded flex gap-2",children:[(0,u.jsx)(x.Z,{type:"url",className:"!shadow-none !bg-transparent",placeholder:"Frontend URL",value:h,onChange:e=>{f(e.target.value)}}),(0,u.jsx)(i.Z,{disabled:!h||l,onClick:()=>{a(h)},className:"small ",children:s("action.update")})]})]})]})};function $(){const{t:e}=(0,d.$G)("welcome",{keyPrefix:"onboarding"}),{t:t}=(0,d.$G)(),{nextStep:n}=o(),{link:r,linkCopied:s,copyLink:a,generateNewLink:l}=(0,_.Z)();return(0,u.jsxs)("div",{className:"h-full flex-center flex-col relative",children:[(0,u.jsx)("span",{className:"text-2xl mb-2 font-bold",children:e("invite_title")}),(0,u.jsx)("span",{className:"text-sm mb-10 text-gray-400",children:e("last_tip")}),(0,u.jsx)("span",{className:"text-sm text-gray-500 mb-2 font-semibold",children:e("last_desc")}),(0,u.jsxs)("div",{className:"w-[400px] rounded shadow-md flex border border-solid border-gray-100",children:[(0,u.jsx)(x.Z,{className:"large !border-none !shadow-none",readOnly:!0,placeholder:"Generating",value:r}),(0,u.jsx)(i.Z,{onClick:a,className:"ghost small border_less !px-2 hover:!text-[#088ab2]",children:s?"Copied":t("action.copy")})]}),(0,u.jsx)(i.Z,{className:"w-32 h-11 mt-6",onClick:n,children:e("done")}),(0,u.jsx)(S.Z,{version:"0.3.3",empty:!0,children:(0,u.jsx)(L,{refreshInviteLink:l})})]})}var R=n(15924);function G(e){let{serverName:t}=e;const{t:n}=(0,d.$G)("welcome",{keyPrefix:"onboarding"}),r=(0,R.s0)();return(0,u.jsxs)("div",{className:"h-full flex-center flex-col text-center w-[588px] m-auto",children:[(0,u.jsx)("span",{className:"text-2xl font-bold mb-2",children:n("done_welcome",{serverName:t})}),(0,u.jsx)("span",{className:"text-sm mb-12",children:n("done_title")}),(0,u.jsx)("span",{className:"text-xl mb-12",children:(0,u.jsx)(d.cC,{i18nKey:"onboarding.done_desc",ns:"welcome",children:(0,u.jsx)("span",{className:"font-bold"})})}),(0,u.jsxs)(i.Z,{className:"!w-32 flex flex-col items-center py-3",onClick:()=>r("/"),children:[(0,u.jsx)("img",{className:"mb-2",src:c,alt:"play icon"}),(0,u.jsx)("span",{className:"text-sm",children:n("enter")})]})]})}var T=n(47912);const F=[{name:"welcomePage",label:(0,T.t)("welcome:onboarding.welcome_page")},{name:"serverName",label:(0,T.t)("welcome:onboarding.set_name")},{name:"adminAccount",label:(0,T.t)("welcome:onboarding.admin_account")},{name:"whoCanSignUp",label:(0,T.t)("welcome:onboarding.who_sign_up")},{name:"inviteLink",label:(0,T.t)("welcome:onboarding.invites"),canJumpTo:["whoCanSignUp"]},{name:"donePage",label:(0,T.t)("welcome:onboarding.done"),canJumpTo:["whoCanSignUp","inviteLink"]}];var A=n(57425);const O=()=>{var e;const{activeStep:t,goToStep:n}=o(),s=(null===(e=F[t])||void 0===e?void 0:e.canJumpTo)||[];return(0,u.jsx)("div",{className:"absolute top-5 w-full flex justify-center gap-2 z-10",children:F.map(((e,a)=>{const o=s.includes(e.name),l=`${(0,A.Z)("text-sm text-gray-600",o&&"cursor-pointer hover:text-gray-500",a===t&&"font-bold text-black",a>=t&&"text-gray-400")}`;return(0,u.jsxs)(r.Fragment,{children:[(0,u.jsx)("span",{className:l,onClick:()=>{o&&n(a)},children:e.label}),a!==F.length-1&&(0,u.jsx)("span",{className:l,children:"\u2192"})]},a)}))})};function I(){const{t:e}=(0,d.$G)("welcome"),[t,n]=(0,r.useState)("");return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(s.q,{children:(0,u.jsx)("title",{children:e("onboarding.title")})}),(0,u.jsx)("div",{className:"h-screen overflow-y-auto",children:(0,u.jsxs)(l,{header:(0,u.jsx)(O,{}),children:[(0,u.jsx)(p,{}),(0,u.jsx)(h,{serverName:t,setServerName:n}),(0,u.jsx)(j,{serverName:t}),(0,u.jsx)(N,{}),(0,u.jsx)($,{}),(0,u.jsx)(G,{serverName:t})]})})]})}},34108:(e,t,n)=>{function r(e,t,n,r){return new(n||(n=Promise))((function(s,a){function o(e){try{i(r.next(e))}catch(t){a(t)}}function l(e){try{i(r.throw(e))}catch(t){a(t)}}function i(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,l)}i((r=r.apply(e,t||[])).next())}))}function s(e){return r(this,void 0,void 0,(function*(){const t=URL.createObjectURL(e),n=yield function(e){return r(this,void 0,void 0,(function*(){return new Promise((function(t,n){const r=document.createElement("img");r.crossOrigin="anonymous",r.src=e,r.onload=function(e){const n=e.target;t(n)},r.onabort=n,r.onerror=n}))}))}(t);return yield function(e){return r(this,void 0,void 0,(function*(){return new Promise((function(t,n){const r=document.createElement("canvas"),s=r.getContext("2d");if(s){const{width:a,height:o}=e;r.width=a,r.height=o,s.drawImage(e,0,0,a,o),r.toBlob((function(e){e?t(e):n("Cannot get blob from image element")}),"image/png",1)}}))}))}(n)}))}function a(e){return r(this,void 0,void 0,(function*(){const t={[e.type]:e},n=new ClipboardItem(t);yield navigator.clipboard.write([n])}))}function o(e){return r(this,void 0,void 0,(function*(){const t=yield function(e){return r(this,void 0,void 0,(function*(){const t=yield fetch(`${e}`);return yield t.blob()}))}(e);if(function(e){return e.type.includes("jpeg")}(t)){const e=yield s(t);return yield a(e),t}if(function(e){return e.type.includes("png")}(t))return yield a(t),t;throw new Error("Cannot copy this type of image to clipboard")}))}n.d(t,{VP:()=>o})}}]);