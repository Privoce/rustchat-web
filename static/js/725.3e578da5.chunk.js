"use strict";(globalThis.webpackChunkvocechat_web=globalThis.webpackChunkvocechat_web||[]).push([[725],{93916:(e,t,n)=>{n.d(t,{Z:()=>l});var o,i,r=n(70537);function a(){return a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},a.apply(this,arguments)}const s=(e,t)=>{let{title:n,titleId:s,...l}=e;return r.createElement("svg",a({width:25,height:24,viewBox:"0 0 25 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":s},l),n?r.createElement("title",{id:s},n):null,o||(o=r.createElement("g",{clipPath:"url(#clip0_14990_39524)"},r.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12.5 0C5.8724 0 0.5 5.3808 0.5 12.0204C0.5 17.3304 3.938 21.8364 8.7068 23.4252C9.3068 23.5356 9.5252 23.1648 9.5252 22.8456C9.5252 22.5612 9.5156 21.804 9.5096 20.802C6.1712 21.528 5.4668 19.1904 5.4668 19.1904C4.922 17.8008 4.1348 17.4312 4.1348 17.4312C3.0452 16.6872 4.2176 16.7016 4.2176 16.7016C5.4212 16.7856 6.0548 17.94 6.0548 17.94C7.1252 19.776 8.864 19.2456 9.5468 18.9384C9.6572 18.162 9.9668 17.6328 10.31 17.3328C7.646 17.0292 4.844 15.9972 4.844 11.3916C4.844 10.08 5.312 9.006 6.0788 8.166C5.9552 7.8624 5.5436 6.6396 6.1964 4.986C6.1964 4.986 7.2044 4.662 9.4964 6.2172C10.4753 5.95022 11.4853 5.81423 12.5 5.8128C13.52 5.8176 14.546 5.9508 15.5048 6.2172C17.7956 4.662 18.8012 4.9848 18.8012 4.9848C19.4564 6.6396 19.0436 7.8624 18.9212 8.166C19.6892 9.006 20.1548 10.08 20.1548 11.3916C20.1548 16.0092 17.348 17.0256 14.6756 17.3232C15.1064 17.694 15.4892 18.4272 15.4892 19.5492C15.4892 21.1548 15.4748 22.452 15.4748 22.8456C15.4748 23.1672 15.6908 23.5416 16.3004 23.424C18.69 22.6225 20.7672 21.0904 22.2386 19.0441C23.7099 16.9977 24.501 14.5408 24.5 12.0204C24.5 5.3808 19.1264 0 12.5 0Z",fill:"black"}))),i||(i=r.createElement("defs",null,r.createElement("clipPath",{id:"clip0_14990_39524"},r.createElement("rect",{width:24,height:24,fill:"white",transform:"translate(0.5)"})))))},l=(0,r.forwardRef)(s)},16049:(e,t,n)=>{n.d(t,{Z:()=>d});var o,i,r,a,s=n(70537);function l(){return l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},l.apply(this,arguments)}const c=(e,t)=>{let{title:n,titleId:c,...d}=e;return s.createElement("svg",l({width:2443,height:2500,viewBox:"0 0 256 262",xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"xMidYMid",ref:t,"aria-labelledby":c},d),n?s.createElement("title",{id:c},n):null,o||(o=s.createElement("path",{d:"M255.878 133.451c0-10.734-.871-18.567-2.756-26.69H130.55v48.448h71.947c-1.45 12.04-9.283 30.172-26.69 42.356l-.244 1.622 38.755 30.023 2.685.268c24.659-22.774 38.875-56.282 38.875-96.027",fill:"#4285F4"})),i||(i=s.createElement("path",{d:"M130.55 261.1c35.248 0 64.839-11.605 86.453-31.622l-41.196-31.913c-11.024 7.688-25.82 13.055-45.257 13.055-34.523 0-63.824-22.773-74.269-54.25l-1.531.13-40.298 31.187-.527 1.465C35.393 231.798 79.49 261.1 130.55 261.1",fill:"#34A853"})),r||(r=s.createElement("path",{d:"M56.281 156.37c-2.756-8.123-4.351-16.827-4.351-25.82 0-8.994 1.595-17.697 4.206-25.82l-.073-1.73L15.26 71.312l-1.335.635C5.077 89.644 0 109.517 0 130.55s5.077 40.905 13.925 58.602l42.356-32.782",fill:"#FBBC05"})),a||(a=s.createElement("path",{d:"M130.55 50.479c24.514 0 41.05 10.589 50.479 19.438l36.844-35.974C195.245 12.91 165.798 0 130.55 0 79.49 0 35.393 29.301 13.925 71.947l42.211 32.783c10.59-31.477 39.891-54.251 74.414-54.251",fill:"#EB4335"})))},d=(0,s.forwardRef)(c)},49879:(e,t,n)=>{n.d(t,{Z:()=>d});var o=n(70537),i=n(93916),r=n(57889),a=n(69885),s=n(14566),l=n(80683);const c=(0,r.ZP)(a.Z)`
  width: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 12px;
  color: #344054;
  border: 1px solid #d0d5dd;
  background: none !important;
  .icon {
    width: 24px;
    height: 24px;
  }
`,d=e=>{let{type:t="login",source:n="webapp",client_id:r}=e;const{t:a}=(0,s.$G)("auth");(0,o.useEffect)((()=>{const e=e=>{const{key:t,newValue:n}=e;if("widget"==t&&n){localStorage.removeItem("widget");const e=window.parent;e&&e.postMessage("RELOAD_WITH_OPEN","*")}};return"widget"==n&&window.addEventListener("storage",e),()=>{"widget"==n&&window.removeEventListener("storage",e)}}),[n]);return(0,l.jsxs)(c,{onClick:()=>{const e=`https://github.com/login/oauth/authorize?client_id=${r}&redirect_uri=${location.origin}/github/cb/${n}.html`;"webapp"==n?location.href=e:window.open(e)},children:[(0,l.jsx)(i.Z,{className:"icon"}),` ${a("login"===t?"login.github":"reg.github")}`]})}},63674:(e,t,n)=>{n.d(t,{Z:()=>f});var o=n(70537),i=n(89156),r=n(27418),a=n(57889),s=n(80308),l=n(16049),c=n(69885),d=n(15312),u=n(14566),p=n(80683);const g=(0,a.ZP)(c.Z)`
  position: relative;
  width: 100%;
  background: white !important;
  border: 1px solid #d0d5dd;
  color: #344054;
  height: 46px;
  overflow: hidden;
  .mask {
    background: inherit;
    position: absolute;
    left: 0;
    top: 0;
    width: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 12px;
    z-index: 998;
    height: 40px;
    .icon {
      width: 24px;
      height: 24px;
    }
  }
  > .hide {
    /* z-index: 1; */
    /* opacity: 0; */
    left: 0;
    top: 0;
    position: absolute;
    width: 100%;
    iframe {
      width: 100% !important;
    }
  }
  &:hover {
     .hide {
      opacity: 0;
      z-index: 999;
    }
  }
`,h=e=>{let{type:t="login",loaded:n,loadError:a}=e;const{t:c}=(0,u.$G)("auth"),[h,{isSuccess:f,isLoading:m,error:x}]=(0,d.YA)(),w=localStorage.getItem(s.LJ);return(0,o.useEffect)((()=>{f&&r.ZP.success("Login Successfully")}),[f]),(0,o.useEffect)((()=>{if(x&&"status"in x)if(410===x.status)r.ZP.error("No associated account found, please contact user admin for an invitation link to join.");else r.ZP.error("Something Error");else;}),[x]),(0,p.jsxs)(g,{disabled:!n||m,children:[(0,p.jsxs)("div",{className:"mask",children:[(0,p.jsx)(l.Z,{className:"icon"}),a?"Script Load Error!":n?`${c("login"===t?"login.google":"reg.google")}`:"Initializing"]}),(0,p.jsx)("div",{className:"hide",children:(0,p.jsx)(i.kZ,{width:"360px",onSuccess:e=>{h({magic_token:w,id_token:e.credential||"",type:"google"})}})})]})},f=e=>{let{type:t="login",clientId:n}=e;const[r,a]=(0,o.useState)(!1),[s,l]=(0,o.useState)(!1);return n?(0,p.jsx)(i.rg,{onScriptLoadError:()=>{l(!0)},onScriptLoadSuccess:()=>{a(!0)},clientId:n,children:(0,p.jsx)(h,{type:t,loaded:r,loadError:s})}):null}},17237:(e,t,n)=>{n.d(t,{Z:()=>c});var o=n(70537),i=n(40182),r=n(57889),a=n(80683);const s=r.ZP.div`
  width: 100%;
  position: relative;
  display: flex;
  overflow: hidden;
  border-radius: 4px;
  border: 1px solid #e5e7eb;
  box-shadow: 0px 1px 2px rgba(31, 41, 55, 0.08);

  .prefix {
    padding: 8px 16px;
    font-weight: 400;
    font-size: 14px;
    line-height: 20px;
    color: #9ca3af;
    background: #f3f4f6;
    border-right: 1px solid #e5e7eb;
  }

  .view {
    position: absolute;
    top: 50%;
    right: 10px;
    transform: translateY(-50%);
    cursor: pointer;
  }
`,l=r.ZP.input`
  width: 100%;
  background: #ffffff;

  font-weight: normal;
  font-size: 14px;
  line-height: 20px;
  color: #333;
  padding: 8px;
  outline: none;

  &:not(.inner) {
    border-radius: 4px;
    border: 1px solid #e5e7eb;
    box-shadow: 0px 1px 2px rgba(31, 41, 55, 0.08);
  }

  &.large {
    font-weight: 400;
    font-size: 14px;
    line-height: 20px;
    padding: 11px 8px;
  }

  &.none {
    outline: none;
    border: none;
    background: none;
    box-shadow: none;
  }

  &:disabled {
    color: #78787c;
    background-color: #f9fafb;
  }

  &::placeholder {
    color: #d1d5db;
  }

  &[type="password"] {
    padding-right: 30px;
  }
`,c=e=>{let{type:t="text",prefix:n="",className:r,...c}=e;const[d,u]=(0,o.useState)(t);return"password"==t?(0,a.jsxs)(s,{className:r,children:[(0,a.jsx)(l,{type:d,className:`inner ${r}`,...c}),(0,a.jsx)("div",{className:"view",onClick:()=>{u((e=>"password"==e?"text":"password"))},children:"password"==d?(0,a.jsx)(i.MBb,{color:"#78787c"}):(0,a.jsx)(i.Rbo,{color:"#78787c"})})]}):n?(0,a.jsxs)(s,{className:r,children:[(0,a.jsx)("span",{className:"prefix",children:n}),(0,a.jsx)(l,{className:`inner ${r}`,type:d,...c})]}):(0,a.jsx)(l,{type:d,className:r,...c})}},42712:(e,t,n)=>{n.d(t,{Z:()=>r});var o=n(70537),i=n(65809);function r(){const[e,t]=(0,o.useState)(!1),[n,r]=(0,o.useState)(),{data:a}=(0,i.R)(void 0,{refetchOnMountOrArgChange:!0}),[s,{isSuccess:l}]=(0,i.Ku)();(0,o.useEffect)((()=>{a&&r(a)}),[a]),(0,o.useEffect)((()=>{t(!l&&JSON.stringify(a)!==JSON.stringify(n))}),[a,n,l]);return{config:n,changed:e,updateGithubAuthConfig:e=>{r((t=>t?{...t,...e}:e))},updateGithubAuthConfigToServer:async()=>{n&&await s(n)},isSuccess:l}}},25089:(e,t,n)=>{n.d(t,{Z:()=>r});var o=n(70537),i=n(65809);function r(){const[e,t]=(0,o.useState)(!1),[n,r]=(0,o.useState)(""),{data:a}=(0,i.eM)(void 0,{refetchOnMountOrArgChange:!0}),[s,{isSuccess:l}]=(0,i.Qg)();(0,o.useEffect)((()=>{a&&r(a.client_id)}),[a]),(0,o.useEffect)((()=>{t(!l&&(null===a||void 0===a?void 0:a.client_id)!==n)}),[a,n,l]);return{config:a,changed:e,clientId:n,updateClientId:r,updateClientIdToServer:async()=>{n&&await s({client_id:n})},updateGoogleAuthConfig:s,isSuccess:l}}},92725:(e,t,n)=>{n.r(t),n.d(t,{default:()=>w});var o=n(70537),i=n(27418),r=n(80308),a=n(17237),s=n(69885),l=n(15312),c=n(80683);function d(){return(0,c.jsxs)("div",{className:"flex flex-col items-center",children:[(0,c.jsx)("div",{className:"font-bold text-3xl text-gray-800 mt-3",children:"Magic link Sent"}),(0,c.jsx)("p",{className:"text-center text-gray-400 mb-6",children:"Login to your email client, and continue next step"}),(0,c.jsx)("p",{className:"text-center text-gray-400",children:"You can close this window now."})]})}var u=n(14566);function p(e){let{token:t}=e;const{t:n}=(0,u.$G)("auth");return(0,o.useEffect)((()=>{"ontouchstart"in document.documentElement&&t&&(location.href=`https://join.voce.chat/download?link=${encodeURIComponent(`${location.origin}?magic_token=${t}`)}`)}),[t]),(0,c.jsxs)("div",{className:"flex gap-1 mt-7 text-sm text-[#667085] justify-center",children:[(0,c.jsx)("span",{children:n("reg.have_account")}),(0,c.jsx)("a",{onClick:()=>{location.href="/#/login"},className:"text-[#22d3ee] cursor-pointer",children:n("sign_in")})]})}var g=n(65809),h=n(42712),f=n(25089),m=n(63674),x=n(49879);function w(){const{t:e}=(0,u.$G)("auth"),[t,{isLoading:n,data:w,isSuccess:v}]=(0,l.uk)(),[b,{isLoading:y}]=(0,l.N0)(),[j,C]=(0,o.useState)(""),[S,E]=(0,o.useState)({email:"",password:"",confirmPassword:""});(0,o.useEffect)((()=>{const e=new URLSearchParams(location.search).get("magic_token");e&&(localStorage.setItem(r.LJ,e),C(e))}),[]),(0,o.useEffect)((()=>{if(v&&w){const{new_magic_token:e,mail_is_sent:t}=w;!t&&e&&(location.href=`?magic_token=${e}#/register/set_name`)}}),[v,w]);const _=e=>{const{type:t}=e.target.dataset,{value:n}=e.target;E((e=>(e[t]=n,{...e})))},{clientId:k}=(0,f.Z)(),{config:N}=(0,h.Z)(),{data:Z,isSuccess:P}=(0,g.ww)();if(!P)return null;const{github:L,google:I,who_can_sign_up:O}=Z,R=I&&k;if("EveryOne"!==O&&!j)return(0,c.jsx)(c.Fragment,{children:"Sign up method is updated to Invitation Link Only"});const{email:$,password:M,confirmPassword:z}=S;if(null!==w&&void 0!==w&&w.mail_is_sent)return(0,c.jsx)(d,{});const A=n||y;return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("div",{className:"tips",children:[(0,c.jsx)("img",{src:`${r.ZP}/resource/organization/logo`,alt:"logo",className:"logo"}),(0,c.jsx)("h2",{className:"title",children:e("reg.title")}),(0,c.jsx)("span",{className:"desc",children:e("reg.desc")})]}),(0,c.jsxs)("form",{onSubmit:async e=>{e.preventDefault();const{email:n,password:o,confirmPassword:r}=S;if(o!==r)return void i.ZP.error("Not Same Password!");const{data:a}=await b(n);a?t({magic_token:j,email:n,password:o}):i.ZP.error("Email already registered!")},autoSave:"false",autoComplete:"true",children:[(0,c.jsx)(a.Z,{className:"large",name:"email",value:$,required:!0,type:"email",placeholder:e("placeholder_email"),"data-type":"email",onChange:_}),(0,c.jsx)(a.Z,{className:"large",type:"password",value:M,name:"password",required:!0,minLength:6,"data-type":"password",onChange:_,placeholder:e("placeholder_pwd")}),(0,c.jsx)(a.Z,{className:"large",required:!0,onBlur:()=>{const{password:e,confirmPassword:t}=S;e!==t&&i.ZP.error("Not Same Password!")},type:"password",minLength:6,name:"confirmPassword",value:z,"data-type":"confirmPassword",onChange:_,placeholder:e("placeholder_confirm_pwd")}),(0,c.jsx)(s.Z,{type:"submit",disabled:A,children:A?"Signing Up":e("sign_up")})]}),(0,c.jsx)("hr",{className:"or"}),(0,c.jsxs)("div",{className:"flex flex-col gap-3",children:[R&&(0,c.jsx)(m.Z,{type:"register",clientId:k}),L&&(0,c.jsx)(x.Z,{type:"register",client_id:null===N||void 0===N?void 0:N.client_id})]}),(0,c.jsx)(p,{token:j})]})}},89156:(e,t,n)=>{n.d(t,{kZ:()=>c,rg:()=>r});var o=n(70537);const i=(0,o.createContext)(null);function r(e){let{clientId:t,onScriptLoadSuccess:n,onScriptLoadError:r,children:a}=e;const s=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{onScriptLoadSuccess:t,onScriptLoadError:n}=e,[i,r]=(0,o.useState)(!1),a=(0,o.useRef)(t);a.current=t;const s=(0,o.useRef)(n);return s.current=n,(0,o.useEffect)((()=>{const e=document.createElement("script");return e.src="https://accounts.google.com/gsi/client",e.async=!0,e.defer=!0,e.onload=()=>{var e;r(!0),null===(e=a.current)||void 0===e||e.call(a)},e.onerror=()=>{var e;r(!1),null===(e=s.current)||void 0===e||e.call(s)},document.body.appendChild(e),()=>{document.body.removeChild(e)}}),[]),i}({onScriptLoadSuccess:n,onScriptLoadError:r}),l=(0,o.useMemo)((()=>({clientId:t,scriptLoadedSuccessfully:s})),[t,s]);return o.createElement(i.Provider,{value:l},a)}function a(){const e=(0,o.useContext)(i);if(!e)throw new Error("Google OAuth components must be used within GoogleOAuthProvider");return e}function s(e){var t;return null!==(t=null===e||void 0===e?void 0:e.clientId)&&void 0!==t?t:null===e||void 0===e?void 0:e.client_id}const l={large:40,medium:32,small:20};function c(e){let{onSuccess:t,onError:n,useOneTap:i,promptMomentNotification:r,type:c="standard",theme:d="outline",size:u="large",text:p,shape:g,logo_alignment:h,width:f,locale:m,...x}=e;const w=(0,o.useRef)(null),{clientId:v,scriptLoadedSuccessfully:b}=a(),y=(0,o.useRef)(t);y.current=t;const j=(0,o.useRef)(n);j.current=n;const C=(0,o.useRef)(r);return C.current=r,(0,o.useEffect)((()=>{var e,t,n;if(b)return null===(e=window.google)||void 0===e||e.accounts.id.initialize({client_id:v,callback:e=>{var t;if(!(null===e||void 0===e?void 0:e.credential))return null===(t=j.current)||void 0===t?void 0:t.call(j);const{credential:n,select_by:o}=e;y.current({credential:n,clientId:s(e),select_by:o})},...x}),null===(t=window.google)||void 0===t||t.accounts.id.renderButton(w.current,{type:c,theme:d,size:u,text:p,shape:g,logo_alignment:h,width:f,locale:m}),i&&(null===(n=window.google)||void 0===n||n.accounts.id.prompt(C.current)),()=>{var e;i&&(null===(e=window.google)||void 0===e||e.accounts.id.cancel())}}),[v,b,i,c,d,u,p,g,h,f,m]),o.createElement("div",{ref:w,style:{height:l[u]}})}}}]);