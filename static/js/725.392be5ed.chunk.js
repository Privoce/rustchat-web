"use strict";(globalThis.webpackChunkvocechat_web=globalThis.webpackChunkvocechat_web||[]).push([[725],{92725:(e,a,t)=>{t.r(a),t.d(a,{default:()=>f});var s=t(70537),n=t(27418),r=t(80308),o=t(68975),i=t(69885),l=t(15312),c=t(80683);function d(){return(0,c.jsxs)("div",{className:"flex flex-col items-center",children:[(0,c.jsx)("div",{className:"font-bold text-3xl text-gray-800 dark:text-white mt-3",children:"Magic link Sent"}),(0,c.jsx)("p",{className:"text-center text-gray-400 dark:text-gray-300 mb-6",children:"Login to your email client, and continue next step"}),(0,c.jsx)("p",{className:"text-center text-gray-400 dark:text-gray-300",children:"You can close this window now."})]})}var m=t(14566),u=t(15924);function g(e){let{token:a}=e;const{t:t}=(0,m.$G)("auth"),n=(0,u.s0)();return(0,s.useEffect)((()=>{"ontouchstart"in document.documentElement&&a&&(location.href=`https://join.voce.chat/download?link=${encodeURIComponent(`${location.origin}?magic_token=${a}`)}`)}),[a]),(0,c.jsxs)("div",{className:"flex gap-1 mt-7 text-sm text-[#667085] dark:text-gray-100 justify-center",children:[(0,c.jsx)("span",{children:t("reg.have_account")}),(0,c.jsx)("a",{onClick:()=>{n("/login")},className:"text-[#22d3ee] cursor-pointer",children:t("sign_in")})]})}var x=t(88143),h=t(65809),p=t(44917);function f(){const{t:e}=(0,m.$G)("auth"),[a,{isLoading:t,data:u,isSuccess:f}]=(0,l.uk)(),[w,{isLoading:j}]=(0,l.N0)(),{data:y,isSuccess:_}=(0,h.ww)(),[k,v]=(0,s.useState)(""),[N,b]=(0,s.useState)({email:"",password:"",confirmPassword:""});(0,s.useEffect)((()=>{const e=new URLSearchParams(location.search).get("magic_token");e&&(localStorage.setItem(r.LJ,e),v(e))}),[]),(0,s.useEffect)((()=>{if(f&&u){const{new_magic_token:e,mail_is_sent:a}=u;!a&&e&&(location.href=`?magic_token=${e}#/register/set_name`)}}),[f,u]);const P=e=>{const{type:a}=e.target.dataset,{value:t}=e.target;b((e=>(e[a]=t,{...e})))};if(!_)return null;const{who_can_sign_up:S}=y;if("EveryOne"!==S&&!k)return(0,c.jsx)(c.Fragment,{children:"Sign up method is updated to Invitation Link Only"});const{email:Z,password:C,confirmPassword:L}=N;if(null!==u&&void 0!==u&&u.mail_is_sent)return(0,c.jsx)(d,{});const $=t||j;return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("div",{className:"flex-center flex-col pb-6",children:[(0,c.jsx)("img",{src:`${r.ZP}/resource/organization/logo`,alt:"logo",className:"w-14 h-14 md:mb-7 rounded-full"}),(0,c.jsx)("h2",{className:"font-semibold text-2xl text-gray-800 dark:text-white md:mb-2",children:e("reg.title")}),(0,c.jsx)("span",{className:"hidden md:block text-gray-400 dark:text-gray-100",children:e("reg.desc")})]}),(0,c.jsxs)("form",{className:"flex flex-col gap-5 w-80 md:min-w-[360px]",onSubmit:async e=>{e.preventDefault();const{email:t,password:s,confirmPassword:r}=N;if(s!==r)return void n.ZP.error("Not Same Password!");const{data:o}=await w(t);o?a({magic_token:k,email:t,password:s}):n.ZP.error("Email already registered!")},autoSave:"false",autoComplete:"true",children:[(0,c.jsx)(o.Z,{className:"large",name:"email",value:Z,required:!0,type:"email",placeholder:e("placeholder_email"),"data-type":"email",onChange:P}),(0,c.jsx)(o.Z,{className:"large",type:"password",value:C,name:"password",required:!0,minLength:6,"data-type":"password",onChange:P,placeholder:e("placeholder_pwd")}),(0,c.jsx)(o.Z,{className:"large",required:!0,onBlur:()=>{const{password:e,confirmPassword:a}=N;e!==a&&n.ZP.error("Not Same Password!")},type:"password",minLength:6,name:"confirmPassword",value:L,"data-type":"confirmPassword",onChange:P,placeholder:e("placeholder_confirm_pwd")}),(0,c.jsx)(i.Z,{type:"submit",disabled:$,children:e($?"signing_up":"sign_up")})]}),(0,c.jsx)(x.Z,{content:"OR"}),(0,c.jsx)("div",{className:"flex flex-col gap-3 py-3",children:(0,c.jsx)(p.Z,{type:"register"})}),(0,c.jsx)(g,{token:k})]})}}}]);