"use strict";(globalThis.webpackChunkvocechat_web=globalThis.webpackChunkvocechat_web||[]).push([[286],{66286:(e,a,s)=>{s.r(a),s.d(a,{default:()=>w});var t=s(70537),n=s(27418),r=s(80308),c=s(68975),i=s(69885),l=s(15924),o=s(80683);function d(){const e=(0,l.s0)();return(0,o.jsx)(i.Z,{className:"w-full",onClick:()=>{e("/send_magic_link")},children:"Sign in with Magic Link"})}var m=s(14566);function g(e){let{smtp:a=!1}=e;const{t:s}=(0,m.$G)("auth"),t=(0,l.s0)();return(0,o.jsxs)("div",{className:"flex gap-1 mt-7 text-sm text-slate-500 dark:text-gray-100 justify-center",children:[(0,o.jsx)("span",{children:s("login.no_account")}),(0,o.jsx)("a",{className:"text-primary-400 cursor-pointer",onClick:()=>{t(a?"/send_magic_link":"/register")},children:s("sign_up")})]})}var u=s(15312),p=s(65809),h=s(25089),x=s(44917),f=s(88143);function w(){const{t:e}=(0,m.$G)("auth"),{t:a}=(0,m.$G)(),{data:s}=(0,p.n8)(),[l,{isSuccess:w,isLoading:k,error:j}]=(0,u.YA)(),{clientId:_}=(0,h.Z)(),{data:b,isSuccess:y}=(0,p.ww)(),[v,N]=(0,t.useState)({email:"",password:""});(0,t.useEffect)((()=>{const e=new URLSearchParams(location.search),a=e.get("code"),s=e.get("state"),t=e.get("magic_token"),n=e.get("exists");if(a&&s&&l({code:a,state:s,type:"oidc"}),t&&"undefined"!==typeof n){"true"==n?l({magic_token:t,type:"magiclink"}):location.href=`?magic_token=${t}#/register/set_name/login`}}),[]),(0,t.useEffect)((()=>{if(j)switch(j.status){case 401:case 404:n.ZP.error("Username or Password incorrect");break;case 410:n.ZP.error("No associated account found, please contact user admin for an invitation link to join.");break;case"PARSING_ERROR":break;default:n.ZP.error("Something Error")}else;}),[j]),(0,t.useEffect)((()=>{w&&n.ZP.success(a("tip.login"))}),[w]);const Z=e=>{const{type:a}=e.target.dataset,{value:s}=e.target;a&&N((e=>(e[a]=s,{...e})))},{email:S,password:P}=v;if(!y)return null;const{magic_link:C,github:E,google:R,metamask:$,oidc:G=[],who_can_sign_up:L}=b,O=s&&C,q=O||R&&_||$||G.length>0||E;return(0,o.jsx)("div",{className:"flex-center h-screen dark:bg-gray-700",children:(0,o.jsxs)("div",{className:"py-8 px-10 shadow-md rounded-xl",children:[(0,o.jsxs)("div",{className:"flex-center flex-col pb-6",children:[(0,o.jsx)("img",{src:`${r.ZP}/resource/organization/logo`,alt:"logo",className:"w-14 h-14 mb-3 md:mb-7 rounded-full"}),(0,o.jsx)("h2",{className:"font-semibold text-2xl text-gray-800 dark:text-white md:mb-2",children:e("login.title")}),(0,o.jsx)("span",{className:"text-gray-400 dark:text-gray-100",children:e("login.desc")})]}),(0,o.jsxs)("form",{className:"flex flex-col gap-5 w-80 md:min-w-[360px] ",onSubmit:e=>{e.preventDefault(),l({...v,type:"password"})},children:[(0,o.jsx)(c.Z,{className:"large",name:"email",value:S,type:"email",required:!0,placeholder:e("placeholder_email"),"data-type":"email",onChange:Z}),(0,o.jsx)(c.Z,{className:"large",type:"password",value:P,name:"password",required:!0,"data-type":"password",onChange:Z,placeholder:e("placeholder_pwd")}),(0,o.jsx)(i.Z,{type:"submit",disabled:k,children:k?"Signing":e("sign_in")})]}),q&&(0,o.jsx)(f.Z,{content:"OR"}),(0,o.jsxs)("div",{className:"flex flex-col gap-4",children:[O&&(0,o.jsx)(d,{}),(0,o.jsx)(x.Z,{})]}),"EveryOne"===L&&(0,o.jsx)(g,{smtp:s})]})})}}}]);