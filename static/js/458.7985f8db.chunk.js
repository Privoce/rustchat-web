"use strict";(globalThis.webpackChunkvocechat_web=globalThis.webpackChunkvocechat_web||[]).push([[458],{87826:(e,t,n)=>{n.d(t,{Z:()=>c});var i,l,a,o=n(70537);function r(){return r=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},r.apply(this,arguments)}const s=(e,t)=>{let{title:n,titleId:s,...c}=e;return o.createElement("svg",r({width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":s},c),n?o.createElement("title",{id:s},n):null,i||(i=o.createElement("path",{d:"M0 8C0 3.58172 3.58172 0 8 0C12.4183 0 16 3.58172 16 8C16 12.4183 12.4183 16 8 16C3.58172 16 0 12.4183 0 8Z",fill:"url(#paint0_linear_14171_23293)"})),l||(l=o.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12.2431 5.96725C12.4162 5.86325 12.6357 5.87375 12.7982 5.99425C12.9602 6.11525 13.0342 6.32125 12.9857 6.51725L11.9857 10.5173C11.9297 10.7403 11.7297 10.8963 11.5002 10.8963H4.50018C4.27068 10.8963 4.07068 10.7397 4.01468 10.5173L3.01468 6.51725C2.96618 6.32125 3.04018 6.11525 3.20218 5.99425C3.36518 5.87425 3.58418 5.86375 3.75768 5.96725L5.84918 7.22225L7.58468 4.61875C7.59654 4.60096 7.61307 4.58921 7.62965 4.57743C7.63964 4.57033 7.64966 4.56321 7.65868 4.55475L7.17718 4.07275C7.08018 3.97575 7.08018 3.81625 7.17718 3.71925L7.82368 3.07275C7.92068 2.97575 8.08018 2.97575 8.17718 3.07275L8.82368 3.71925C8.92068 3.81625 8.92068 3.97575 8.82368 4.07275L8.34218 4.55475C8.3512 4.56338 8.3614 4.57062 8.37161 4.57787C8.38802 4.58951 8.40447 4.60119 8.41618 4.61875L10.1517 7.22225L12.2431 5.96725ZM4.00025 11.3962H12.0002V12.3963H4.00025V11.3962Z",fill:"#ECE9FE"})),a||(a=o.createElement("defs",null,o.createElement("linearGradient",{id:"paint0_linear_14171_23293",x1:0,y1:0,x2:16,y2:-1.66785e-9,gradientUnits:"userSpaceOnUse"},o.createElement("stop",{stopColor:"#7F56D9"}),o.createElement("stop",{offset:1,stopColor:"#9E77ED"})))))},c=(0,o.forwardRef)(s)},64631:(e,t,n)=>{n.d(t,{Z:()=>r});var i=n(70537),l=n(21812),a=n(80683);const o=e=>{let{url:t="",name:n="Deleted User",type:o="user",...r}=e;const[s,c]=(0,i.useState)("");return(0,i.useEffect)((()=>{if(t)c(t);else{const e=(0,l.eD)({initials:(0,l.Qm)(n),background:"channel"==o?"#EAECF0":void 0,foreground:"channel"==o?"#475467":void 0});c(e)}}),[t,n]),s?(0,a.jsx)("img",{src:s,onError:e=>{const t=(0,l.eD)({initials:(0,l.Qm)(n),background:"channel"==o?"#EAECF0":void 0,foreground:"channel"==o?"#475467":void 0});c(t)},...r}):null},r=(0,i.memo)(o,((e,t)=>e.url==t.url))},79198:(e,t,n)=>{n.d(t,{Z:()=>a});var i=n(63211),l=n(80683);const a=e=>{let{items:t=[],hideMenu:n=null}=e;return(0,l.jsx)(i.Z,{children:t.map((e=>{const{title:t,icon:i=null,handler:a=(e=>{e.preventDefault(),n&&n()}),underline:o=!1,danger:r=!1}=e;return(0,l.jsxs)("li",{className:`item ${o?"bottom_line":""} ${r?"danger":""}`,onClick:e=>{e.stopPropagation(),e.preventDefault(),a(e),n&&n()},children:[i,t]},t)}))})}},71044:(e,t,n)=>{n.d(t,{Z:()=>y});var i,l=n(70537),a=n(64084),o=n(7829);function r(){return r=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},r.apply(this,arguments)}const s=(e,t)=>{let{title:n,titleId:a,...o}=e;return l.createElement("svg",r({width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":a},o),n?l.createElement("title",{id:a},n):null,i||(i=l.createElement("path",{d:"M12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C10.3596 22 8.77516 21.6039 7.35578 20.8583L3.06538 21.9753C2.6111 22.0937 2.1469 21.8213 2.02858 21.367C1.99199 21.2266 1.99198 21.0791 2.02855 20.9386L3.1449 16.6502C2.3972 15.2294 2 13.6428 2 12C2 6.47715 6.47715 2 12 2Z",fill:"#22CCEE"})))},c=(0,l.forwardRef)(s);var d;function u(){return u=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},u.apply(this,arguments)}const p=(e,t)=>{let{title:n,titleId:i,...a}=e;return l.createElement("svg",u({width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":i},a),n?l.createElement("title",{id:i},n):null,d||(d=l.createElement("path",{d:"M8 12C8 13.1046 7.10457 14 6 14C4.89543 14 4 13.1046 4 12C4 10.8954 4.89543 10 6 10C7.10457 10 8 10.8954 8 12ZM14 12C14 13.1046 13.1046 14 12 14C10.8954 14 10 13.1046 10 12C10 10.8954 10.8954 10 12 10C13.1046 10 14 10.8954 14 12ZM18 14C19.1046 14 20 13.1046 20 12C20 10.8954 19.1046 10 18 10C16.8954 10 16 10.8954 16 12C16 13.1046 16.8954 14 18 14Z",fill:"#616161"})))},m=(0,l.forwardRef)(p);var h=n(64631);const x=n(57889).ZP.div`
  z-index: 9999;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  margin-top: 80px;
  width: 432px;
  gap: 4px;
  .icons {
    margin-top: 24px;
    display: flex;
    align-items: center;
    gap: 8px;
    .icon {
      cursor: pointer;
      font-weight: 500;
      font-size: 14px;
      line-height: 20px;
      color: #22ccee;
      display: flex;
      align-items: center;
      flex-direction: column;
      gap: 4px;
      background: #f9fafb;
      border-radius: 8px;
      width: 128px;
      padding: 14px 0 12px 0;

      &:not(.disabled):hover {
        background: #f2f4f7;
      }
      &.call,
      &.more {
        svg path {
          fill: #22ccee;
        }
      }
      &.disabled {
        color: #667085;
        svg path {
          fill: #667085;
        }
      }
      .txt {
        user-select: none;
      }
    }
  }
  &.card {
    padding: 16px;
    width: 280px;
    background: #ffffff;
    box-shadow: 0px 20px 25px 20px rgba(31, 41, 55, 0.1), 0px 10px 10px rgba(31, 41, 55, 0.04);
    border-radius: 6px;
    .icons {
      padding-bottom: 2px;
    }
  }
`;var v=n(63211),f=n(50911),g=n(66160),b=n(71893),C=n(80683);const w=e=>{let{uid:t,type:n="embed",cid:i}=e;const{t:l}=(0,b.$)("member"),{t:r}=(0,b.$)(),{canCopyEmail:s,copyEmail:d,removeFromChannel:u,canRemoveFromChannel:p,canRemove:w,removeUser:y}=(0,f.Z)({uid:t,cid:i}),{data:j}=(0,g.CG)((e=>({data:e.users.byId[t]})));if(!j)return null;const{name:E,email:Z,avatar:k}=j,N="embed"==n&&w,O=Z||p||N;return(0,C.jsxs)(x,{className:n,children:[(0,C.jsx)(h.Z,{className:"rounded-full w-20 h-20 object-cover",url:k,name:E}),(0,C.jsx)("h2",{className:"text-lg select-text font-bold text-[#1c1c1e]",children:E}),(0,C.jsx)("span",{className:"text-sm text-[#98a2b3] select-text",children:Z}),(0,C.jsxs)("ul",{className:"icons",children:[(0,C.jsx)(a.OL,{to:`/chat/dm/${t}`,children:(0,C.jsxs)("li",{className:"icon chat",children:[(0,C.jsx)(c,{}),(0,C.jsx)("span",{className:"txt",children:l("send_msg")})]})}),(0,C.jsx)(o.ZP,{disabled:!O,interactive:!0,popperOptions:{strategy:"fixed"},placement:"bottom-start",trigger:"click",hideOnClick:!0,content:(0,C.jsxs)(v.Z,{children:[s&&(0,C.jsx)("li",{className:"item",onClick:d.bind(void 0,Z),children:l("copy_email")}),p&&(0,C.jsx)("li",{className:"item danger",onClick:u.bind(null,t),children:l("remove_from_channel")}),N&&(0,C.jsx)("li",{className:"item danger",onClick:y.bind(null,t),children:l("remove")})]}),children:(0,C.jsxs)("li",{className:"icon more "+(O?"":"disabled"),children:[(0,C.jsx)(m,{}),(0,C.jsx)("span",{className:"txt",children:r("more")})]})})]})]})},y=(0,l.memo)(w)},6458:(e,t,n)=>{n.d(t,{Z:()=>g});var i=n(70537),l=n(15924),a=n(7829),o=n(87826),r=n(64631),s=n(71044),c=n(50911),d=n(79198),u=n(71893),p=n(80683);const m=e=>{let{enable:t=!1,uid:n,cid:i,visible:l,hide:o,children:r}=e;const{t:s}=(0,u.$)("member"),{copyEmail:m,canCopyEmail:h,startChat:x,canRemove:v,canRemoveFromChannel:f,removeFromChannel:g,removeUser:b}=(0,c.Z)({uid:n,cid:i});return(0,p.jsx)(a.ZP,{disabled:!t,visible:l,followCursor:"initial",interactive:!0,placement:"right-start",popperOptions:{strategy:"fixed"},onClickOutside:o,content:(0,p.jsx)(d.Z,{hideMenu:o,items:[{title:s("send_msg"),handler:x},h&&{title:s("copy_email"),handler:m},f&&{danger:!0,title:s("remove_from_channel"),handler:g},v&&{danger:!0,title:s("remove"),handler:b}].filter(Boolean)}),children:r},n)};const h=n(57889).ZP.div`
  display: flex;
  align-items: center;
  justify-content: flex-start;
  gap: 8px;
  padding: 8px;
  border-radius: 8px;
  user-select: none;
  &.interactive {
    &:hover,
    &.active {
      background: rgba(116, 127, 141, 0.1);
    }
  }
  .avatar {
    cursor: pointer;
    width: ${e=>{let{size:t}=e;return`${t}px`}};
    height: ${e=>{let{size:t}=e;return`${t}px`}};
    position: relative;
    img {
      object-fit: cover;
      border-radius: 50%;
      width: 100%;
      height: 100%;
    }
    .status {
      position: absolute;
      bottom: -2px;
      right: -6px;
      width: 12px;
      height: 12px;
      box-sizing: content-box;
      border-radius: 50%;
      border: 2px solid #fff;
      &.online {
        background-color: #22c55e;
      }
      &.offline {
        background-color: #a1a1aa;
      }
      &.alert {
        background-color: #dc2626;
      }
    }
  }
  .name {
    font-weight: 600;
    font-size: 14px;
    line-height: 20px;
    color: #52525b;
    max-width: 190px;
    overflow: hidden;
    text-overflow: ellipsis;
  }
  /* session nav */
  &.compact {
    padding: 0;
    .avatar .status {
      width: 15px;
      height: 15px;
    }
  }
`;var x=n(47438),v=n(66160);const f=e=>{let{cid:t,uid:n,owner:i=!1,dm:c=!1,interactive:d=!0,popover:u=!1,compact:f=!1,avatarSize:g=32,enableContextMenu:b=!1}=e;const C=(0,l.s0)(),{visible:w,handleContextMenuEvent:y,hideContextMenu:j}=(0,x.Z)(),{curr:E,loginUid:Z}=(0,v.CG)((e=>{var t;return{curr:e.users.byId[n],loginUid:null===(t=e.authData.user)||void 0===t?void 0:t.uid}})),k=()=>{C(`/chat/dm/${n}`)};if(!E)return null;const N=E.online||E.uid==Z;return u?(0,p.jsx)(m,{cid:t,uid:n,enable:b,visible:w,hide:j,children:(0,p.jsx)(a.ZP,{inertia:!0,interactive:!0,placement:"left",trigger:"click",content:(0,p.jsx)(s.Z,{uid:n,type:"card",cid:t}),children:(0,p.jsxs)(h,{size:g,className:`${d?"interactive":""} ${f?"compact":""}`,onDoubleClick:c?k:void 0,onContextMenu:b?y:void 0,children:[(0,p.jsxs)("div",{className:"avatar",children:[(0,p.jsx)(r.Z,{url:E.avatar,name:E.name,alt:"avatar"}),(0,p.jsx)("div",{className:"status "+(N?"online":"offline")})]}),!f&&(0,p.jsx)("span",{className:"name",title:null===E||void 0===E?void 0:E.name,children:null===E||void 0===E?void 0:E.name}),i&&(0,p.jsx)(o.Z,{})]})})}):(0,p.jsx)(m,{cid:t,uid:n,enable:b,visible:w,hide:j,children:(0,p.jsxs)(h,{size:g,className:`${d?"interactive":""} ${f?"compact":""}`,onDoubleClick:c?k:void 0,onContextMenu:b?y:void 0,children:[(0,p.jsxs)("div",{className:"avatar",children:[(0,p.jsx)(r.Z,{url:E.avatar,name:E.name,alt:"avatar"}),(0,p.jsx)("div",{className:"status "+(N?"online":"offline")})]}),!f&&(0,p.jsx)("span",{className:"name",title:null===E||void 0===E?void 0:E.name,children:null===E||void 0===E?void 0:E.name}),i&&(0,p.jsx)(o.Z,{})]})})},g=(0,i.memo)(f,((e,t)=>e.uid==t.uid))},63211:(e,t,n)=>{n.d(t,{Z:()=>i});const i=n(57889).ZP.ul`
  display: flex;
  flex-direction: column;
  gap: 2px;
  padding: 4px;
  background-color: #fff;
  box-shadow: 0 20px 25px 20px rgba(31, 41, 55, 0.1), 0 10px 10px rgba(31, 41, 55, 0.04);
  border-radius: 12px;
  min-width: 200px;
  .item {
    position: relative;
    display: flex;
    align-items: center;
    gap: 14px;
    white-space: nowrap;
    cursor: pointer;
    border-radius: 6px;
    padding: 6px;
    font-style: normal;
    font-weight: 600;
    font-size: 14px;
    line-height: 20px;
    color: #616161;
    .icon {
      width: 20px;
      height: 20px;
      path {
        fill: #475467;
      }
    }
    &.sb {
      justify-content: space-between;
    }
    &:hover {
      background-color: #22ccee;
      color: #fff;
      .icon {
        path {
          fill: #fff;
        }
      }
    }
    &.bottom_line {
      margin-bottom: 9px;
      &:before {
        position: absolute;
        content: "";
        left: 6px;
        bottom: -4px;
        display: block;
        padding: 0 6px;
        box-sizing: border-box;
        width: calc(100% - 12px);
        height: 1px;
        background-color: #f2f4f7;
      }
    }
    &.danger {
      color: #a11043;
      &:hover {
        background-color: #b42318;
        color: #fff;
      }
    }
    &[data-disabled="true"] {
      color: #a4a8b3;
      .icon {
        path {
          fill: #a4a8b3;
        }
      }
    }
  }
`},47438:(e,t,n)=>{n.d(t,{Z:()=>s});var i=n(70537),l=n(69195),a=n(7829),o=n(79198),r=n(80683);function s(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"right-start";const[t,n]=(0,i.useState)(!1),[s,c]=(0,i.useState)({x:0,y:0}),d=t=>{(0,l.Bn)(),t.preventDefault();const{currentTarget:i,clientX:a,clientY:o}=t,{left:r,top:s,width:d,height:u}=i.getBoundingClientRect();let p,m;"right-start"==e?(p=a-(r+d),m=s+u-o):(p=a-r,m=s-o),c({x:p,y:m}),n(!0)},u=()=>{n(!1)},p=e=>{let{key:n,items:i,children:l}=e;return(0,r.jsx)(a.ZP,{visible:t,followCursor:"initial",interactive:!0,placement:"right-start",popperOptions:{strategy:"fixed"},onClickOutside:u,content:(0,r.jsx)(o.Z,{hideMenu:u,items:i}),children:l},n)};return{ContextMenu:p,offset:s,visible:t,hideContextMenu:u,handleContextMenuEvent:d}}},26209:(e,t,n)=>{n.d(t,{Z:()=>o});var i=n(70537),l=n(34108),a=n(27418);const o=e=>{const{enableToast:t=!0}=e||{},[n,o]=(0,i.useState)(!1);(0,i.useEffect)((()=>{n&&t&&a.ZP.success("Copied!")}),[n]);const r=e=>{const t=document.createElement("textarea");t.value=e,t.setAttribute("readonly",""),t.style.position="absolute",t.style.left="-9999px",document.body.appendChild(t);const n=document.getSelection();if(!n)return!1;const i=n.rangeCount>0&&n.getRangeAt(0);t.select();const l=document.execCommand("copy");return document.body.removeChild(t),i&&(n.removeAllRanges(),n.addRange(i)),l};return{copied:n,copy:function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=0;return n||(t?(0,l.VP)(e).then((()=>{o(!0),i=window.setTimeout((()=>{o(!1)}),500)})):(o(r(e)),i=window.setTimeout((()=>{o(!1)}),500))),()=>{clearTimeout(i)}}}}},50911:(e,t,n)=>{n.d(t,{Z:()=>u});var i=n(70537),l=n(27418),a=n(15924),o=n(69195),r=n(6144),s=n(52334),c=n(26209),d=n(66160);const u=e=>{let{uid:t,cid:n}=e;const[u,p]=(0,i.useState)(void 0),m=(0,a.bS)(`/users/${t}`),[h,{isSuccess:x}]=(0,s.EO)(),[v,{isSuccess:f}]=(0,r.Cg)(),g=(0,a.s0)(),{copy:b}=(0,c.Z)(),{user:C,channel:w,loginUser:y}=(0,d.CG)((e=>({user:"undefined"!==typeof t?e.users.byId[t]:t,channel:"undefined"!==typeof n?e.channels.byId[n]:n,loginUser:e.authData.user})));(0,i.useEffect)((()=>{p(null!==t&&void 0!==t?t:null===y||void 0===y?void 0:y.uid)}),[t,y]),(0,i.useEffect)((()=>{(f||x)&&(l.ZP.success("Remove Successfully"),x&&m&&g("/users"))}),[f,x,m]);const j=!(null===y||void 0===y||!y.is_admin),E=null===y||void 0===y?void 0:y.uid,Z=!!n&&!(null!==w&&void 0!==w&&w.is_public)&&j,k=!!n&&!(null!==w&&void 0!==w&&w.is_public)&&(j||(null===w||void 0===w?void 0:w.owner)==E)&&t!=(null===w||void 0===w?void 0:w.owner);return{canDeleteChannel:Z,canRemove:j&&E!=t&&!n&&1!==t,removeUser:e=>{const t=!Number.isNaN(+e)&&e||u;t&&(h(t),(0,o.Bn)())},startChat:()=>{g(`/chat/dm/${t}`)},removeFromChannel:e=>{if(!n)return;const t=!Number.isNaN(+e)&&e||u;t&&(v({id:+n,members:[+t]}),(0,o.Bn)())},canRemoveFromChannel:k,canCopyEmail:!(null===C||void 0===C||!C.email),copyEmail:e=>{const t="string"==typeof e&&e||(null===C||void 0===C?void 0:C.email);b(t||""),(0,o.Bn)()}}}}}]);