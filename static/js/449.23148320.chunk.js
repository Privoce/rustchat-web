"use strict";(globalThis.webpackChunkvocechat_web=globalThis.webpackChunkvocechat_web||[]).push([[449],{79884:(e,t,l)=>{l.d(t,{Z:()=>i});var n,r=l(70537);function a(){return a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var l=arguments[t];for(var n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n])}return e},a.apply(this,arguments)}const s=(e,t)=>{let{title:l,titleId:s,...i}=e;return r.createElement("svg",a({width:20,height:20,viewBox:"0 0 20 20",fill:"#616161",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":s},i),l?r.createElement("title",{id:s},l):null,n||(n=r.createElement("path",{d:"M6.48667 11.6667L6.83667 8.33333H3.325V6.66667H7L7.43333 2.5H9.10833L8.66667 6.66667H11.9833L12.4167 2.5H14.0917L13.65 6.66667H16.625V8.33333H13.4667L13.1167 11.6667H16.6167V13.3333H12.9333L12.4917 17.5H10.8083L11.2417 13.3333H7.91667L7.475 17.5H5.8L6.23333 13.3333H3.25V11.6667H6.4H6.48667ZM8.1625 11.6667H11.4875L11.8375 8.33333H8.5125L8.1625 11.6667Z"})))},i=(0,r.forwardRef)(s)},25552:(e,t,l)=>{l.d(t,{Z:()=>i});var n,r=l(70537);function a(){return a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var l=arguments[t];for(var n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n])}return e},a.apply(this,arguments)}const s=(e,t)=>{let{title:l,titleId:s,...i}=e;return r.createElement("svg",a({width:14,height:15,viewBox:"0 0 14 15",fill:"black",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":s},i),l?r.createElement("title",{id:s},l):null,n||(n=r.createElement("path",{d:"M7 6.7929L10.5355 3.25736C10.7308 3.0621 11.0474 3.0621 11.2426 3.25736C11.4379 3.45262 11.4379 3.76921 11.2426 3.96447L7.70711 7.5L11.2426 11.0355C11.4379 11.2308 11.4379 11.5474 11.2426 11.7426C11.0474 11.9379 10.7308 11.9379 10.5355 11.7426L7 8.20711L3.46447 11.7426C3.26921 11.9379 2.95262 11.9379 2.75736 11.7426C2.5621 11.5474 2.5621 11.2308 2.75736 11.0355L6.2929 7.5L2.75736 3.96447C2.5621 3.76921 2.5621 3.45262 2.75736 3.25736C2.95262 3.0621 3.26921 3.0621 3.46447 3.25736L7 6.7929Z",fillOpacity:.8})))},i=(0,r.forwardRef)(s)},64631:(e,t,l)=>{l.d(t,{Z:()=>i});var n=l(70537),r=l(21812),a=l(80683);function s(e){return e<=16?8:e<=24?12:e<=32?16:e<=40?18:e<=56?22:e<=80?48:64}const i=e=>{let{src:t="",name:l="Deleted User",type:i="user",width:o,height:c,...d}=e;const[m,u]=(0,n.useState)("");(0,n.useEffect)((()=>{t&&u(t)}),[t]);const h=()=>{u("")};return m?(0,a.jsx)("img",{width:o,height:c,src:m,onError:h,...d}):(0,a.jsx)("div",{className:`rounded-full flex-center ${d.className||""}`,style:{width:o,height:c,fontSize:s(o),fontWeight:400,fontFamily:"'Lato', 'Lato-Regular', 'Helvetica Neue'",background:"channel"===i?"#EAECF0":"#4c99e9",color:"channel"===i?"#475467":"#FFFFFF"},children:(0,r.Qm)(l)})}},80874:(e,t,l)=>{l.d(t,{Z:()=>a});var n=l(70537),r=l(10336);const a=e=>{let{id:t="root-modal",mask:l=!0,children:a}=e;const[s,i]=(0,n.useState)(null);return(0,n.useEffect)((()=>{const e=document.getElementById(t);if(!e)return;l&&e.classList.add("mask");const n=document.createElement("div");return n.classList.add("wrapper"),e.appendChild(n),i(n),()=>{e.removeChild(n)}}),[t,l]),s?(0,r.createPortal)(a,s):null}},78468:(e,t,l)=>{l.d(t,{Z:()=>y});var n,r=l(70537),a=l(64084),s=l(7829);function i(){return i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var l=arguments[t];for(var n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n])}return e},i.apply(this,arguments)}const o=(e,t)=>{let{title:l,titleId:a,...s}=e;return r.createElement("svg",i({width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":a},s),l?r.createElement("title",{id:a},l):null,n||(n=r.createElement("path",{d:"M12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C10.3596 22 8.77516 21.6039 7.35578 20.8583L3.06538 21.9753C2.6111 22.0937 2.1469 21.8213 2.02858 21.367C1.99199 21.2266 1.99198 21.0791 2.02855 20.9386L3.1449 16.6502C2.3972 15.2294 2 13.6428 2 12C2 6.47715 6.47715 2 12 2Z",fill:"#22CCEE"})))},c=(0,r.forwardRef)(o);var d;function m(){return m=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var l=arguments[t];for(var n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n])}return e},m.apply(this,arguments)}const u=(e,t)=>{let{title:l,titleId:n,...a}=e;return r.createElement("svg",m({width:24,height:24,viewBox:"0 0 24 24",fill:"#616161",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":n},a),l?r.createElement("title",{id:n},l):null,d||(d=r.createElement("path",{d:"M8 12C8 13.1046 7.10457 14 6 14C4.89543 14 4 13.1046 4 12C4 10.8954 4.89543 10 6 10C7.10457 10 8 10.8954 8 12ZM14 12C14 13.1046 13.1046 14 12 14C10.8954 14 10 13.1046 10 12C10 10.8954 10.8954 10 12 10C13.1046 10 14 10.8954 14 12ZM18 14C19.1046 14 20 13.1046 20 12C20 10.8954 19.1046 10 18 10C16.8954 10 16 10.8954 16 12C16 13.1046 16.8954 14 18 14Z"})))},h=(0,r.forwardRef)(u);var p=l(64631),v=l(50911),f=l(66160),g=l(14566),x=l(57425),b=l(80683);const w=e=>{let{uid:t,type:l="embed",cid:n}=e;const{t:r}=(0,g.$G)("member"),{t:i}=(0,g.$G)(),{canCopyEmail:o,copyEmail:d,removeFromChannel:m,canRemoveFromChannel:u,canRemove:w,removeUser:y}=(0,v.Z)({uid:t,cid:n}),{data:C}=(0,f.CG)((e=>({data:e.users.byId[t]})));if(!C)return null;const{name:j,email:N,avatar:Z}=C,E="card"==l,_=!E&&w,k=N||u||_,L="cursor-pointer flex flex-col items-center gap-1 rounded-lg w-32 text-primary-400 bg-gray-50 dark:bg-gray-800 text-sm pt-3.5 pb-3",O=(0,x.Z)("flex-center flex-col gap-1 z-[99] mt-20 select-none",E?"p-4 w-[280px] bg-white dark:bg-gray-800 drop-shadow rounded-md":"md:w-[432px]");return(0,b.jsxs)("div",{className:O,children:[(0,b.jsx)(p.Z,{width:80,height:80,className:"rounded-full w-20 h-20 object-cover",src:Z,name:j}),(0,b.jsx)("h2",{className:"text-lg select-text font-bold text-gray-900 dark:text-white",children:j}),(0,b.jsx)("span",{className:"text-sm text-gray-400 dark:text-gray-200 select-text",children:N}),(0,b.jsxs)("ul",{className:(0,x.Z)("mt-6 flex flex-col md:flex-row items-center gap-2",E&&"pb-0.5"),children:[(0,b.jsx)(a.OL,{to:`/chat/dm/${t}`,children:(0,b.jsxs)("li",{className:`${L} icon chat`,children:[(0,b.jsx)(c,{}),(0,b.jsx)("span",{children:r("send_msg")})]})}),(0,b.jsx)(s.ZP,{disabled:!k,interactive:!0,popperOptions:{strategy:"fixed"},placement:"bottom-start",trigger:"click",hideOnClick:!0,content:(0,b.jsxs)("ul",{className:"context-menu",children:[o&&(0,b.jsx)("li",{className:"item",onClick:d.bind(void 0,N),children:r("copy_email")}),u&&(0,b.jsx)("li",{className:"item danger",onClick:m.bind(null,t),children:r("remove_from_channel")}),_&&(0,b.jsx)("li",{className:"item danger",onClick:y.bind(null,t),children:r("remove")})]}),children:(0,b.jsxs)("li",{className:`${L} icon ${k?"":"text-gray-500"}`,children:[(0,b.jsx)(h,{className:k?"fill-primary-500":""}),(0,b.jsx)("span",{children:i("more")})]})})]})]})},y=(0,r.memo)(w)},26209:(e,t,l)=>{l.d(t,{Z:()=>s});var n=l(70537),r=l(34108),a=l(27418);const s=e=>{const{enableToast:t=!0}=e||{},[l,s]=(0,n.useState)(!1);(0,n.useEffect)((()=>{l&&t&&a.ZP.success("Copied!")}),[l]);const i=e=>{const t=document.createElement("textarea");t.value=e,t.setAttribute("readonly",""),t.style.position="absolute",t.style.left="-9999px",document.body.appendChild(t);const l=document.getSelection();if(!l)return!1;const n=l.rangeCount>0&&l.getRangeAt(0);t.select();const r=document.execCommand("copy");return document.body.removeChild(t),n&&(l.removeAllRanges(),l.addRange(n)),r};return{copied:l,copy:function(e){let t=0;return l||(arguments.length>1&&void 0!==arguments[1]&&arguments[1]?(0,r.VP)(e).then((()=>{s(!0),t=window.setTimeout((()=>{s(!1)}),500)})):(s(i(e)),t=window.setTimeout((()=>{s(!1)}),500))),()=>{clearTimeout(t)}}}}},50911:(e,t,l)=>{l.d(t,{Z:()=>u});var n=l(70537),r=l(27418),a=l(15924),s=l(69195),i=l(6144),o=l(52334),c=l(26209),d=l(66160),m=l(14566);const u=e=>{let{uid:t,cid:l}=e;const{t:u}=(0,m.$G)(),[h,p]=(0,n.useState)(void 0),v=(0,a.bS)(`/users/${t}`),[f,{isSuccess:g}]=(0,o.EO)(),[x,{isSuccess:b}]=(0,i.Cg)(),w=(0,a.s0)(),{copy:y}=(0,c.Z)(),{user:C,channel:j,loginUser:N}=(0,d.CG)((e=>({user:"undefined"!==typeof t?e.users.byId[t]:t,channel:"undefined"!==typeof l?e.channels.byId[l]:l,loginUser:e.authData.user})));(0,n.useEffect)((()=>{p(null!==t&&void 0!==t?t:null===N||void 0===N?void 0:N.uid)}),[t,N]),(0,n.useEffect)((()=>{(b||g)&&(r.ZP.success(u("tip.delete")),g&&v&&w("/users"))}),[b,g,v]);const Z=!(null===N||void 0===N||!N.is_admin),E=null===N||void 0===N?void 0:N.uid,_=!!l&&!(null!==j&&void 0!==j&&j.is_public)&&Z,k=!!l&&!(null!==j&&void 0!==j&&j.is_public)&&(Z||(null===j||void 0===j?void 0:j.owner)==E)&&t!=(null===j||void 0===j?void 0:j.owner);return{canDeleteChannel:_,canRemove:Z&&E!=t&&!l&&1!==t,removeUser:e=>{const t=!Number.isNaN(+e)&&e||h;t&&(f(t),(0,s.Bn)())},startChat:()=>{w(`/chat/dm/${t}`)},removeFromChannel:e=>{if(!l)return;const t=!Number.isNaN(+e)&&e||h;t&&(x({id:+l,members:[+t]}),(0,s.Bn)())},canRemoveFromChannel:k,canCopyEmail:!(null===C||void 0===C||!C.email),copyEmail:e=>{const t="string"==typeof e&&e||(null===C||void 0===C?void 0:C.email);y(t||""),(0,s.Bn)()}}}},32102:(e,t,l)=>{l.r(t),l.d(t,{default:()=>b});var n=l(70537),r=l(96954),a=l(7699),s=l.n(a),i=l(20814),o=l(8969),c=l(26906),d=l(31271),m=l(79884),u=l(25552),h=l(80308),p=l(66160),v=l(14566),f=l(57425),g=l(11855),x=l(80683);const b=function(){const{t:e}=(0,v.$G)("fav"),[t,l]=(0,n.useState)(""),[a,b]=(0,n.useState)([]),{removeFavorite:w}=(0,g.Z)({}),y=[{icon:(0,x.jsx)(c.Z,{className:"w-[15px] h-5"}),title:e("all_items"),filter:""},{icon:(0,x.jsx)(d.Z,{className:"w-[15px] h-5"}),title:e("image"),filter:"image"},{icon:(0,x.jsx)(o.Z,{className:"w-[15px] h-5"}),title:e("video"),filter:"video"},{icon:(0,x.jsx)(i.Z,{className:"w-[15px] h-5"}),title:e("audio"),filter:"audio"}],{favorites:C,channelData:j,userData:N}=(0,p.CG)((e=>({favorites:e.favorites,userData:e.users.byId,channelData:e.channels.byId}))),Z=e=>{l(e)};(0,n.useEffect)((()=>{if(t)switch(t){case"audio":b(C.filter((e=>(e.messages||[]).every((e=>{var t;const l=null===(t=e.properties)||void 0===t?void 0:t.content_type;return e.content_type==h.bT.file&&l.startsWith("audio")})))));break;case"video":b(C.filter((e=>(e.messages||[]).every((e=>{var t;const l=null===(t=e.properties)||void 0===t?void 0:t.content_type;return e.content_type==h.bT.file&&l.startsWith("video")})))));break;case"image":{const e=C.filter((e=>(e.messages||[]).every((e=>{var t;const l=null===(t=e.properties)||void 0===t?void 0:t.content_type;return e.content_type==h.bT.file&&l.startsWith("image")}))));b(e)}}else b(C)}),[t,C]);const E=e=>{const{id:t=""}=e.currentTarget.dataset;w(t)};return(0,x.jsxs)("div",{className:"h-screen flex bg-white mt-2 mr-6 mb-2.5 overflow-auto dark:bg-gray-700 rounded-2xl",children:[(0,x.jsx)("div",{className:" md:min-w-[268px] p-2 shadow-inner-[-1px_0px_0px_rgba(0,_0,_0,_0.1)]",children:(0,x.jsx)("ul",{className:"flex flex-col gap-0.5",children:y.map((e=>{let{icon:l,title:n,filter:r}=e;return(0,x.jsxs)("li",{className:(0,f.Z)(r==t&&"bg-[rgba(116,_127,_141,_0.2)]","cursor-pointer flex items-center gap-2 p-2 rounded-lg hover:bg-[rgba(116,_127,_141,_0.2)]"),onClick:Z.bind(null,r),children:[l,(0,x.jsx)("span",{className:"hidden md:block font-bold text-sm text-gray-600 dark:text-gray-100",children:n})]},r)}))})}),(0,x.jsx)("div",{className:"w-full p-4 flex flex-col overflow-y-scroll gap-8",children:a.map((e=>{var t,l;let{id:n,created_at:a,messages:i}=e;if(!i||0==i.length)return null;const[{source:{gid:o,uid:c}}]=i,d=(0,x.jsx)("span",{className:(0,f.Z)("inline-flex items-center gap-1 mr-2"),children:o?(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(m.Z,{className:"w-3 h-3"})," ",null===(t=j[o])||void 0===t?void 0:t.name]}):(0,x.jsxs)(x.Fragment,{children:["From ",(0,x.jsx)("strong",{className:"font-bold text-gray-800 dark:text-gray-100",children:null===(l=N[c])||void 0===l?void 0:l.name})]})});return(0,x.jsxs)("div",{className:"max-w-[600px] flex flex-col gap-1",children:[(0,x.jsxs)("h4",{className:"inline-flex items-center text-xs text-gray-400",children:[d,s()(a).format("YYYY-MM-DD")]}),(0,x.jsxs)("div",{className:"relative group",children:[(0,x.jsx)(r.Z,{id:n},n),(0,x.jsx)("button",{className:"absolute top-2 right-2 flex-center w-6 h-6 p-1 border border-solid border-slate-200 dark:border-slate-700 rounded invisible group-hover:visible","data-id":n,onClick:E,children:(0,x.jsx)(u.Z,{className:"fill-slate-900 dark:fill-slate-100"})})]})]},n)}))})]})}}}]);