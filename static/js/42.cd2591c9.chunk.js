"use strict";(globalThis.webpackChunkvocechat_web=globalThis.webpackChunkvocechat_web||[]).push([[42],{28595:(e,t,n)=>{n.d(t,{Z:()=>i});var s,l=n(70537);function a(){return a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},a.apply(this,arguments)}const r=(e,t)=>{let{title:n,titleId:r,...i}=e;return l.createElement("svg",a({width:24,height:24,viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",fill:"#78787C",ref:t,"aria-labelledby":r},i),n?l.createElement("title",{id:r},n):null,s||(s=l.createElement("path",{d:"M12.75 4.125C12.75 3.50368 12.2463 3 11.625 3C11.0037 3 10.5 3.50368 10.5 4.125V10.5H4.125C3.50368 10.5 3 11.0037 3 11.625C3 12.2463 3.50368 12.75 4.125 12.75H10.5V19.125C10.5 19.7463 11.0037 20.25 11.625 20.25C12.2463 20.25 12.75 19.7463 12.75 19.125V12.75H19.125C19.7463 12.75 20.25 12.2463 20.25 11.625C20.25 11.0037 19.7463 10.5 19.125 10.5H12.75V4.125Z"})))},i=(0,l.forwardRef)(r)},41016:(e,t,n)=>{n.d(t,{Z:()=>i});var s,l=n(70537);function a(){return a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},a.apply(this,arguments)}const r=(e,t)=>{let{title:n,titleId:r,...i}=e;return l.createElement("svg",a({width:24,height:24,viewBox:"0 0 24 24",fill:"#70707B",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":r},i),n?l.createElement("title",{id:r},n):null,s||(s=l.createElement("path",{d:"M5.99988 6.5C5.99988 5.11929 7.11917 4 8.49988 4H15.4999C16.8806 4 17.9999 5.11929 17.9999 6.5V19.5C17.9999 19.6881 17.8944 19.8602 17.7268 19.9456C17.5592 20.0309 17.3579 20.015 17.2058 19.9044L11.9999 16.1183L6.79396 19.9044C6.64187 20.015 6.44057 20.0309 6.27299 19.9456C6.1054 19.8602 5.99988 19.6881 5.99988 19.5V6.5Z"})))},i=(0,l.forwardRef)(r)},75208:(e,t,n)=>{n.d(t,{Z:()=>i});var s,l=n(70537);function a(){return a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},a.apply(this,arguments)}const r=(e,t)=>{let{title:n,titleId:r,...i}=e;return l.createElement("svg",a({width:20,height:20,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":r},i),n?l.createElement("title",{id:r},n):null,s||(s=l.createElement("path",{d:"M6 4C6 2.89543 6.89543 2 8 2H14C15.1046 2 16 2.89543 16 4V14C16 15.1046 15.1046 16 14 16H8C6.89543 16 6 15.1046 6 14V4ZM4 6.00001C4 5.25973 4.4022 4.61339 5 4.26758V14.5C5 15.8807 6.11929 17 7.5 17H13.7324C13.3866 17.5978 12.7403 18 12 18H7.5C5.567 18 4 16.433 4 14.5V6.00001Z",fill:"#475467"})))},i=(0,l.forwardRef)(r)},9925:(e,t,n)=>{n.d(t,{Z:()=>i});var s,l=n(70537);function a(){return a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},a.apply(this,arguments)}const r=(e,t)=>{let{title:n,titleId:r,...i}=e;return l.createElement("svg",a({width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":r},i),n?l.createElement("title",{id:r},n):null,s||(s=l.createElement("path",{d:"M12 3.25C13.4346 3.25 14.6126 4.34848 14.7388 5.75019L19 5.75C19.4142 5.75 19.75 6.08579 19.75 6.5C19.75 6.8797 19.4678 7.19349 19.1018 7.24315L19 7.25H18.417L17.1499 18.2292C17.0335 19.2384 16.179 20 15.1631 20H8.83688C7.821 20 6.9665 19.2384 6.85006 18.2292L5.582 7.25H5C4.6203 7.25 4.30651 6.96785 4.25685 6.60177L4.25 6.5C4.25 6.1203 4.53215 5.80651 4.89823 5.75685L5 5.75L9.26119 5.75019C9.38741 4.34848 10.5654 3.25 12 3.25ZM10.5 9.5C10.2545 9.5 10.0504 9.65477 10.0081 9.85886L10 9.9375V16.0625L10.0081 16.1411C10.0504 16.3452 10.2545 16.5 10.5 16.5C10.7455 16.5 10.9496 16.3452 10.9919 16.1411L11 16.0625V9.9375L10.9919 9.85886C10.9496 9.65477 10.7455 9.5 10.5 9.5ZM13.5 9.5C13.2545 9.5 13.0504 9.65477 13.0081 9.85886L13 9.9375V16.0625L13.0081 16.1411C13.0504 16.3452 13.2545 16.5 13.5 16.5C13.7455 16.5 13.9496 16.3452 13.9919 16.1411L14 16.0625V9.9375L13.9919 9.85886C13.9496 9.65477 13.7455 9.5 13.5 9.5ZM12 4.75C11.3952 4.75 10.8908 5.17947 10.775 5.75005H13.225C13.1092 5.17947 12.6048 4.75 12 4.75Z",fill:"#D92D20"})))},i=(0,l.forwardRef)(r)},28533:(e,t,n)=>{n.d(t,{Z:()=>i});var s,l=n(70537);function a(){return a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},a.apply(this,arguments)}const r=(e,t)=>{let{title:n,titleId:r,...i}=e;return l.createElement("svg",a({width:24,height:24,viewBox:"0 0 24 24",fill:"#667085",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":r},i),n?l.createElement("title",{id:r},n):null,s||(s=l.createElement("path",{d:"M13.7036 5.75927L18.2405 10.2962L9.33146 19.2052C9.08325 19.4534 8.77457 19.6325 8.43593 19.7249L3.84998 20.9756C3.34808 21.1124 2.88755 20.6519 3.02443 20.15L4.27515 15.5641C4.3675 15.2254 4.54664 14.9167 4.79484 14.6685L13.7036 5.75927ZM20.0604 3.93956C21.3132 5.19232 21.3132 7.22343 20.0604 8.47618L19.1907 9.34506L14.6538 4.80903L15.5238 3.93956C16.7766 2.68681 18.8077 2.68681 20.0604 3.93956Z"})))},i=(0,l.forwardRef)(r)},88143:(e,t,n)=>{n.d(t,{Z:()=>l});var s=n(80683);const l=e=>{let{content:t}=e;return(0,s.jsx)("div",{className:"relative border-none h-[1px] bg-slate-200 dark:bg-gray-500 my-6 overflow-visible",children:(0,s.jsx)("span",{className:"p-1 absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 text-xs text-gray-500 dark:text-gray-300 font-semibold bg-white dark:bg-gray-700",children:t})})}},40698:(e,t,n)=>{n.d(t,{Z:()=>a});var s=n(57425),l=n(80683);const a=e=>{let{compact:t=!1,title:n="",description:a="",buttons:r,children:i,className:c}=e;return(0,l.jsxs)("div",{className:(0,s.Z)("rounded-lg bg-white dark:bg-gray-900 drop-shadow",t?"p-4 md:min-w-[406px] text-left":"p-5 md:p-8 md:min-w-[440px] text-center",c),children:[n&&(0,l.jsx)("h3",{className:"text-xl text-gray-600 dark:text-white mb-4 font-semibold",children:n}),a&&(0,l.jsx)("p",{className:"text-sm text-gray-400 dark:text-gray-100 mb-2",children:a}),i,r&&(0,l.jsx)("div",{className:"pt-4 w-full flex justify-end gap-4 items-center",children:r})]})}},12677:(e,t,n)=>{n.d(t,{Z:()=>a});var s=n(70537),l=n(66160);function a(){const[e,t]=(0,s.useState)(""),n=(0,l.CG)((e=>Object.values(e.channels.byId))),[a,r]=(0,s.useState)([]);(0,s.useEffect)((()=>{if(e){let t=["",...e.toLowerCase(),""].join(".*"),s=new RegExp(t);r(n.filter((e=>!!e&&s.test(e.name.toLowerCase()))))}else r(n)}),[e]);return{input:e,channels:a,updateInput:e=>{t(e)}}}},51892:(e,t,n)=>{n.d(t,{Z:()=>r});var s=n(70537),l=n(65809),a=n(66160);const r=()=>{var e;const{userCount:t,isGuest:n}=(0,a.CG)((e=>({userCount:e.users.ids.length,isGuest:e.authData.guest}))),{data:r,refetch:i}=(0,l.qM)(void 0,{refetchOnMountOrArgChange:!0,skip:n}),[c,{isLoading:d,isSuccess:o}]=(0,l.U_)(),[u,{isSuccess:m,isLoading:h,reset:p}]=(0,l.yn)();(0,s.useEffect)((()=>{m&&(i(),p())}),[m]);return{reachLimit:t>=(null!==(e=null===r||void 0===r?void 0:r.user_limit)&&void 0!==e?e:Number.MAX_SAFE_INTEGER),license:r,checked:o,checking:d,upserting:h,upserted:m,checkLicense:e=>{c(e)},upsertLicense:async e=>{const t=await c(e);return!(!("data"in t)||!t.data.sign)&&await u(e)}}}},60772:(e,t,n)=>{n.r(t),n.d(t,{default:()=>tl});var s=n(70537),l=n(15924),a=n(57425),r=n(72991),i=n(64084),c=n(7829),d=n(65953),o=n(31159),u=n(14317),m=n(66160),h=n(14566),p=n(80683);function x(e){let{readonly:t=!1}=e;const{t:n}=(0,h.$G)(),{pathname:s}=(0,l.TH)(),{server:a,userCount:r}=(0,m.CG)((e=>({userCount:e.users.ids.length,server:e.server}))),{name:x,description:g,logo:f}=a;return t?(0,p.jsx)(i.OL,{to:"/",className:"relative flex items-center justify-between gap-2 px-4 py-2",children:(0,p.jsxs)("div",{className:"flex items-center gap-2",children:[(0,p.jsx)("div",{className:"w-8 h-8",children:(0,p.jsx)("img",{alt:`${x} logo`,className:"w-full h-full object-cover rounded-full",src:f})}),(0,p.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,p.jsx)("h3",{className:"text-sm text-gray-600 dark:text-gray-100",title:g,children:x}),(0,p.jsxs)("span",{className:"text-xs text-gray-500",children:[r," ",n("members")]})]})]})}):(0,p.jsxs)("div",{className:"relative flex items-center justify-between gap-2 px-4 py-2",children:[(0,p.jsx)(i.OL,{to:`/setting/overview?f=${s}`,children:(0,p.jsxs)("div",{className:"flex items-center gap-2",children:[(0,p.jsx)("div",{className:"w-8 h-8",children:(0,p.jsx)("img",{alt:`${x} logo`,className:"w-full h-full object-cover rounded-full",src:f})}),(0,p.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,p.jsx)("h3",{className:"text-sm text-gray-600 font-bold dark:text-gray-100",title:g,children:x}),(0,p.jsxs)("span",{className:"text-xs text-gray-500",children:[r," ",n("members")]})]})]})}),(0,p.jsx)(o.Z,{tip:n("more"),placement:"bottom",children:(0,p.jsx)(c.ZP,{interactive:!0,placement:"bottom-end",trigger:"click",content:(0,p.jsx)(u.Z,{}),children:(0,p.jsx)("img",{src:d,alt:"add icon",className:"cursor-pointer"})})})]})}var g,f=n(99038),v=n(3074),C=n(24783);function j(e){const[t,n]=(0,s.useState)([]),{channel:l,loginUser:a}=(0,m.CG)((t=>({channel:t.channels.byId[e],loginUser:t.authData.user}))),[r,{isError:i,isLoading:c,isSuccess:d}]=(0,C.OL)(),[o,{isError:u,isLoading:h,isSuccess:p}]=(0,C.jT)();return(0,s.useEffect)((()=>{l&&n(l.pinned_messages)}),[l]),{getPinInfo:e=>{if(!l)return;const t=l.pinned_messages;if(!t||0==t.length)return;return t.find((t=>t.mid==e))},channel:l,pins:t,canPin:(null===a||void 0===a?void 0:a.is_admin)||(null===l||void 0===l?void 0:l.owner)==(null===a||void 0===a?void 0:a.uid),pinMessage:t=>{t&&r({mid:t,gid:+e})},unpinMessage:t=>{t&&o({mid:t,gid:+e})},isError:i,isPining:c,isSuccess:d,isUnpinError:u,isUnpinning:h,isUnpinSuccess:p}}function b(){return b=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},b.apply(this,arguments)}const w=(e,t)=>{let{title:n,titleId:l,...a}=e;return s.createElement("svg",b({width:160,height:160,viewBox:"0 0 160 160",fill:"#D0D5DD",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":l},a),n?s.createElement("title",{id:l},n):null,g||(g=s.createElement("path",{d:"M79.9997 13.3642C116.819 13.3642 146.666 43.2118 146.666 80.0308C146.666 116.85 116.819 146.698 79.9997 146.698C43.1807 146.698 13.333 116.85 13.333 80.0308C13.333 43.2118 43.1807 13.3642 79.9997 13.3642ZM79.9997 23.3642C48.7035 23.3642 23.333 48.7347 23.333 80.0308C23.333 111.327 48.7035 136.698 79.9997 136.698C111.296 136.698 136.666 111.327 136.666 80.0308C136.666 48.7347 111.296 23.3642 79.9997 23.3642ZM79.9997 86.6667C88.284 86.6667 94.9997 93.3824 94.9997 101.667C94.9997 109.951 88.284 116.667 79.9997 116.667C71.7154 116.667 64.9997 109.951 64.9997 101.667C64.9997 93.3824 71.7154 86.6667 79.9997 86.6667ZM60.0027 58.3411C64.6024 58.3411 68.3313 62.0699 68.3313 66.6697C68.3313 71.2694 64.6024 74.9983 60.0027 74.9983C55.4029 74.9983 51.6741 71.2694 51.6741 66.6697C51.6741 62.0699 55.4029 58.3411 60.0027 58.3411ZM100.003 58.3411C104.602 58.3411 108.331 62.0699 108.331 66.6697C108.331 71.2694 104.602 74.9983 100.003 74.9983C95.4029 74.9983 91.6741 71.2694 91.6741 66.6697C91.6741 62.0699 95.4029 58.3411 100.003 58.3411Z"})))},y=(0,s.forwardRef)(w);var N=n(25552),Z=n(7699),_=n.n(Z),k=n(26201),M=n(64631),E=n(21812);const O=e=>{var t,n,s;let{data:l}=e;const{msgData:a,usersData:r}=(0,m.CG)((e=>({msgData:e.message,usersData:e.users.byId}))),{mid:i=0}=l,c=(0,E.PW)(l)||{},{content_type:d,content:o,properties:u,thumbnail:h=""}={...l,...c},x=(null===(t=a[i])||void 0===t?void 0:t.from_uid)||0,g=(null===(n=a[i])||void 0===n?void 0:n.created_at)||0,{name:f,avatar:v}=null!==(s=r[x])&&void 0!==s?s:{};return(0,p.jsxs)("div",{className:"w-full relative flex items-start gap-3 p-2 my-2 rounded-lg",children:[(0,p.jsx)("div",{className:"rounded-full overflow-hidden w-10 h-10 shrink-0",children:(0,p.jsx)(M.Z,{width:40,height:40,src:v,name:f})}),(0,p.jsxs)("div",{className:"w-full flex flex-col items-start gap-1  text-sm",children:[(0,p.jsxs)("div",{className:"flex items-center gap-2 font-semibold",children:[(0,p.jsx)("span",{className:"text-gray-500 dark:text-gray-400",children:f}),(0,p.jsx)("time",{className:"text-xs text-gray-400",children:_()(g).format("YYYY-MM-DD h:mm:ss A")})]}),(0,p.jsx)("div",{className:"select-text text-gray-600 break-all whitespace-pre-wrap dark:text-white",children:(0,k.Z)({content_type:d,content:o,thumbnail:h,from_uid:x,properties:u})})]})]})},D=e=>{let{id:t}=e;const{t:n}=(0,h.$G)("chat"),{pins:s,unpinMessage:l,canPin:a}=j(t),r=e=>{const{mid:t}=e.currentTarget.dataset;t&&l(+t)},i=0==s.length;return(0,p.jsxs)("div",{className:"p-4 drop-shadow-md overflow-y-scroll min-w-[320px] md:min-w-[486px] md:max-h-[90vh] rounded-xl bg-gray-50 dark:bg-gray-800",children:[(0,p.jsxs)("h4",{className:" text-gray-600 dark:text-gray-400 mb-4 font-semibold",children:[n("pinned_msg"),"(",s.length,")"]}),i?(0,p.jsxs)("div",{className:"flex flex-col items-center gap-2 w-full p-4",children:[(0,p.jsx)(y,{}),(0,p.jsx)("div",{className:"w-60 font-semibold text-gray-500 dark:text-gray-300 text-center",children:n("pin_empty_tip")})]}):(0,p.jsx)("ul",{className:"flex flex-col gap-2",children:s.map((e=>(0,p.jsxs)("li",{className:"group relative border border-solid border-slate-100 dark:border-slate-600 rounded-md ",children:[(0,p.jsx)(O,{data:e}),(0,p.jsx)("div",{className:"invisible group-hover:visible flex items-center gap-1 absolute top-1 right-1 p-1 border border-solid border-black/10 dark:border-gray-500 rounded-md",children:a&&(0,p.jsx)("button",{className:"flex bg-none border-none","data-mid":e.mid,onClick:r,children:(0,p.jsx)(N.Z,{className:"fill-slate-900 dark:fill-slate-300"})})})]},e.mid)))})]})};var L=n(96954),I=n(11855);const $=e=>{let{cid:t=null,uid:n=null}=e;const{t:s}=(0,h.$G)("chat"),{favorites:l,removeFavorite:a}=(0,I.Z)({cid:t,uid:n}),r=e=>{const{id:t=""}=e.currentTarget.dataset;a(t)},i=0==l.length;return(0,p.jsxs)("div",{className:"p-4 bg-slate-50 dark:bg-slate-800 rounded-xl min-w-[500px] max-h-[500px] overflow-auto drop-shadow-[0px_25px_50px_rgba(31,_41,_55,_0.25)]",children:[(0,p.jsxs)("h4",{className:"font-bold text-base text-gray-600 dark:text-gray-400 mb-4",children:[s("fav_msg"),"(",l.length,")"]}),i?(0,p.jsxs)("div",{className:"flex flex-col gap-2 w-full items-center p-4",children:[(0,p.jsx)(y,{}),(0,p.jsx)("div",{className:"w-60 text-base text-gray-600 dark:text-gray-400 text-center font-bold",children:s("fav_empty_tip")})]}):(0,p.jsx)("ul",{className:"flex flex-col gap-2",children:l.map((e=>{let{id:t}=e;return(0,p.jsxs)("li",{className:"relative border border-solid border-slate-200 dark:border-gray-600 rounded-md group",children:[(0,p.jsx)(L.Z,{id:t}),(0,p.jsx)("div",{className:"flex items-center absolute top-2 right-2 border border-solid border-gray-300 dark:border-gray-600 rounded-md overflow-hidden invisible group-hover:visible",children:(0,p.jsx)("button",{className:"flex-center w-6 h-6 p-1","data-id":t,onClick:r,children:(0,p.jsx)(N.Z,{className:"fill-slate-900 dark:fill-slate-500"})})})]},t)}))})]})};var H=n(12564),F=n(6144),S=n(52334);const V=e=>{const{pageNumber:t=1,pageSize:n=50,mids:s=[],isLast:l=!1}=e||{},a=s.slice(0);if(0==a.length)return{isFirst:!0,isLast:!0,pageCount:0,pageSize:n,pageNumber:1,ids:[]};a.sort(((e,t)=>Number(e)-Number(t)));const r=Math.ceil(a.length/n),i=l?r:t,c=-(r-i+1)*n,d=c+n,o=0==d?void 0:d;return{isFirst:1==i,isLast:i==r,pageCount:r,pageSize:n,pageNumber:i,ids:a.slice(c,o)}};let P=0,R=0;function U(e){let{context:t="channel",id:n}=e;const[l]=(0,F.N2)(),[a]=(0,S.N2)(),r=(0,s.useRef)([]),i=(0,s.useRef)(null),c=(0,s.useRef)(null),[d,o]=(0,s.useState)(!1),[u,h]=(0,s.useState)(!0),[p,x]=(0,s.useState)([]),[g,f]=(0,s.useState)([]),v="channel"==t?l:a,{mids:C,messageData:j,loginUid:b}=(0,m.CG)((e=>{var s;return{loginUid:null===(s=e.authData.user)||void 0===s?void 0:s.uid,mids:"channel"==t?e.channelMessage[n]||[]:e.userMessage.byId[n]||[],messageData:e.message}}));(0,s.useEffect)((()=>{r.current=[],i.current=null,f([]),h(!0),x([]),o(!1)}),[t,n]),(0,s.useEffect)((()=>{const e=r.current,t=C.filter((e=>{const t=+new Date;return Math.abs(t-e)>1e4}));if(t.length>0)if(0==e.length){const e=V({mids:t,isLast:!0});i.current=e,r.current=e.ids,f(e.ids)}else{const e=c.current;if(e){const t=e.querySelector("[data-load-more]");(0,E.Jv)(t),(0,E.Jv)(t)&&w()}}}),[C]),(0,s.useEffect)((()=>{const[e]=r.current.slice(-1),t=C.slice(0).sort(((e,t)=>Number(e)-Number(t))).filter((t=>t>e));if(t.length){x(t);const[e]=t.slice(-1),s=c.current;if(s){var n;const t=b==(null===(n=j[e])||void 0===n?void 0:n.from_uid),l=s.scrollHeight-(s.offsetHeight+s.scrollTop);t?s.scrollTop=s.scrollHeight:l<=100&&setTimeout((()=>{s.scrollTop=s.scrollHeight}),100)}}}),[C,j,b]),(0,s.useEffect)((()=>{if(g.length>0){let e=c.current=document.querySelector(`#VOCECHAT_FEED_${t}_${n}`);if(e){const t=e.scrollHeight-e.clientHeight;e.scrollTop=P+(t-R)}}}),[g,t,n]);const w=()=>{r.current,i.current;const e=i.current;let t;if(e){const n=e.pageNumber-1;t=V({mids:C,pageNumber:0==n?1:n})}else t=V({mids:C,isLast:!0});i.current=t,r.current=[...new Set([...t.ids,...r.current])].sort(((e,t)=>e>t?1:-1)),setTimeout((()=>{r.current,f(r.current);const e=c.current;e&&(P=e.scrollTop,R=e.scrollHeight-e.clientHeight),o(!1)}),null!==e&&void 0!==e&&e.isLast?10:500),o(!1)},y=(0,s.useCallback)((async()=>{o(!0);const e=i.current;if(e&&e.isFirst||!e&&0==C.length){const[t]=e?e.ids:[0],{data:s}=await v({mid:t,id:n});0==(null===s||void 0===s?void 0:s.length)&&h(!1)}else w()}),[t,n]);return{pulling:d,mids:C,appends:p,hasMore:u,pullUp:y,list:g}}var T=n(13386),G=n(33941),B=n(59857),A=n(16352),z=n(79180),Y=n(62432),q=n(53517),J=n(1823),W=n(88332);var K=n(80308),X=n(81721),Q=n(57815),ee=n(55526),te=n(88109),ne=n(25583),se=n(34265);const le={editableProps:{spellCheck:!1,autoFocus:!0,placeholder:"Type\u2026"},trailingBlock:{type:ee.JBe},softBreak:{options:{rules:[{hotkey:"shift+enter",query:{allow:[ee.IVr,ee.JBe]}}]}},exitBreak:{options:{rules:[{hotkey:"mod+enter",query:{allow:[ee.IVr,ee.JBe]}}]}},selectOnBackspace:{options:{query:{allow:[ee.IVr]}}}};var ae=n(69885);const re="_text_editor";let ie=(0,ee.Ips)({});const ce=[{type:ee.JBe,children:[{text:""}]}],de=e=>{const t=(0,ee.CE7)(`${re}_${e}`);return{focus:()=>{t&&ne.F3.focus(t)},insertText:e=>{t&&(ne.F3.focus(t),t.insertText(e))}}},oe=e=>{let{updateDraft:t=null,initialValue:n=ce,id:l,placeholder:a="Write some markdown...",sendMessages:r,members:i=[]}=e;const{t:c}=(0,h.$G)(),[d,o]=l.split("_"),{addStageFile:u}=(0,se.Z)({context:d,id:o}),x=i.length>0,g=(0,m.CG)((e=>e.users.byId)),[f,v]=(0,s.useState)([]),C=(0,s.useRef)(null),j={...le.editableProps,className:"flex flex-col md:gap-2",placeholder:a},b=(0,ee.CE7)(`${re}_${l}`);(0,s.useEffect)((()=>{const e=e=>{const t=[...e.clipboardData.files];if(t.length){const e=t.map((e=>{const{size:t,type:n,name:s}=e;return{size:t,type:n,name:s,url:URL.createObjectURL(e)}}));u(e)}};return window.addEventListener("paste",e),()=>{window.removeEventListener("paste",e)}}),[l,t]),(0,X.z)("Enter",(e=>{if(!b)return;if((0,ee.kGl)(b)||e.shiftKey||e.ctrlKey||e.altKey||e.isComposing)return!0;e.preventDefault(),w()}),{when:!(0,E.tq)(),target:C});const w=()=>{r(f),Q.YR.delete(b,{at:{anchor:Q.ML.start(b,[]),focus:Q.ML.end(b,[])}})},y=[(0,ee.ZZF)(),(0,ee.kdp)(),(0,ee.kjx)(le.softBreak),(0,ee.AFf)(le.trailingBlock),(0,ee.z$X)(le.exitBreak)],N=(0,ee.ZUk)(x?y.concat([(0,te.kQ)(),(0,ee.MoH)({options:{createMentionNode:e=>{const{text:t,data:{uid:n}}=e;return{value:`@${t}`,uid:n}},insertSpaceAfterMention:!0}})]):y,{components:ie}),Z=(0,s.useCallback)((async e=>{const t=[],n=e=>{const t=[];return{value:e.map((e=>{let{type:n,text:s,uid:l}=e;return"mention"==n?(t.push(l),` @${l} `):s})).join(""),mentions:t}};for(const a of e){const{value:e,mentions:s}=n(a.children),l=t[t.length-1];l&&Array.isArray(l)?t[t.length-1].push({type:"text",content:e,properties:{mentions:s}}):t.push([{type:"text",content:e,properties:{mentions:s}}])}const s=t.map((e=>Array.isArray(e)?{type:"text",content:e.map((e=>e.content)).join("\n"),properties:{mentions:e.map((e=>{var t;return(null===(t=e.properties)||void 0===t?void 0:t.mentions)||[]})).flat()}}:e)),l=s.filter((e=>{let{content:t}=e;return!!t}));v(l)}),[f]);return(0,p.jsxs)("div",{className:"input w-full pr-14 md:pr-0 max-h-[50vh] overflow-auto text-sm text-gray-600 dark:text-white",ref:C,children:[(0,p.jsx)(ee.hv7,{id:`${re}_${l}`,onChange:Z,editableProps:{...j,style:{userSelect:"text"}},initialValue:n,plugins:N,children:x?(0,p.jsx)(ee.bEm,{onRenderItem:e=>{let{item:t}=e;return t&&t.data?(0,p.jsx)(G.Z,{uid:t.data.uid,interactive:!1},t.data.uid):null},items:i.map((e=>{const t=g[e];if(!t)return{key:e};const{uid:n,name:s,...l}=t;return{key:n,text:s,data:{uid:n,...l}}}))}):null}),(0,p.jsx)(ae.Z,{onClick:w,className:"mini md:hidden absolute right-1.5 bottom-1.5",children:c("action.send")})]})};var ue=n(80874),me=n(68975);function he(e){let{name:t,closeModal:n,updateName:l}=e;const[a,r]=(0,s.useState)(t);return(0,p.jsx)(ue.Z,{children:(0,p.jsxs)("div",{className:"bg-white dark:bg-gray-800 flex flex-col drop-shadow rounded-xl p-4 w-[406px]",children:[(0,p.jsxs)("h4",{className:"flex items-center justify-between font-semibold text-lg text-gray-700 dark:text-gray-100 w-full",children:["File Details ",(0,p.jsx)(N.Z,{className:"cursor-pointer dark:fill-white",onClick:n})]}),(0,p.jsxs)("div",{className:"py-4 flex flex-col gap-2",children:[(0,p.jsx)("label",{className:"font-semibold text-sm text-gray-600 dark:text-gray-200",htmlFor:"name",children:"Name"}),(0,p.jsx)(me.Z,{id:"name",value:a,onChange:e=>{r(e.target.value)}})]}),(0,p.jsxs)("div",{className:"flex justify-end gap-4 mt-8 w-full",children:[(0,p.jsx)(ae.Z,{className:"ghost cancel",onClick:n,children:"Cancel"}),(0,p.jsx)(ae.Z,{onClick:()=>{l(a),n()},children:"Save Changes"})]})]})})}var pe=n(28533),xe=n(9925);function ge(e){let{context:t,id:n}=e;const l=de(`${t}_${n}`),[a,r]=(0,s.useState)(null),{stageFiles:i,updateStageFile:c,removeStageFile:d}=(0,se.Z)({context:t,id:n}),o=e=>{r((t=>t?null:e))},u=e=>{const t=i[`${e}`];t&&o({...t,index:e})};return(0,s.useEffect)((()=>{l.focus()}),[i.length]),t&&n&&i&&0!=i.length?(0,p.jsxs)(p.Fragment,{children:[a&&(0,p.jsx)(he,{name:a.name,updateName:e=>{if(!e||!a)return;const{index:t}=a;c(t,{name:e})},closeModal:o}),(0,p.jsx)("ul",{className:"w-full overflow-auto flex justify-start p-4 pt-6 bg-gray-200 dark:bg-gray-800 rounded-t-lg",children:i.map(((e,t)=>{let{name:n,url:s,size:l,type:a}=e;return(0,p.jsxs)("li",{className:"group relative flex flex-col bg-gray-100 dark:bg-gray-700 rounded p-2",children:[(0,p.jsx)("div",{className:"flex-center w-40 h-40",children:a.startsWith("image")?(0,p.jsx)("img",{className:"w-full h-full object-cover",src:s,alt:"image"}):(0,E.LP)(a,n)}),(0,p.jsx)("h4",{className:"w-40 mt-4 mb-0.5 font-semibold text-sm text-gray-800 dark:text-gray-100 truncate",children:n}),(0,p.jsx)("span",{className:"text-xs text-gray-500",children:(0,E.td)(l)}),(0,p.jsxs)("ul",{className:"invisible group-hover:visible bg-inherit border border-solid border-black/10 box-border rounded-md flex items-center absolute -right-5 -top-2.5",children:[(0,p.jsx)("li",{className:"p-1 cursor-pointer edit",onClick:u.bind(null,t),children:(0,p.jsx)(pe.Z,{})}),(0,p.jsx)("li",{className:"p-1 cursor-pointer delete","data-index":t,onClick:d.bind(null,t),children:(0,p.jsx)(xe.Z,{})})]})]},s)}))})]}):null}var fe=n(84006);const ve=n.p+"static/media/close.circle.785556eb2b09c84f7ef1.svg",Ce=n.p+"static/media/picture.57a395fb7f41e8e3c5d1.svg";var je=n(7935);const be=e=>{const{content_type:t,content:n,thumbnail:s="",properties:l}=e;let a=null;switch(t){case K.bT.text:a=(0,p.jsx)(je.Z,{text:n,url:!1,mentionTextOnly:!0});break;case K.bT.markdown:a=(0,p.jsx)("div",{className:"max-h-[100px] overflow-auto",children:(0,p.jsx)(fe.Z,{content:n})});break;case K.bT.file:{const{content_type:e="",name:t,size:n}=l||{};if((0,E.Or)(e,n))a=(0,p.jsx)("img",{className:"w-10 h-10 object-cover",src:s||Ce});else{const n=(0,E.LP)(e,t,"icon w-4 h-5");a=(0,p.jsxs)(p.Fragment,{children:[n,(0,p.jsx)("span",{className:"ml-1 text-[10px] text-gray-400",children:t})]})}}}return a};function we(e){let{context:t,id:n,mid:s}=e;const{removeReplying:l}=(0,Y.Z)({to:n,context:t}),{msg:a,usersData:r}=(0,m.CG)((e=>({usersData:e.users.byId,msg:e.message[s]})));if(!a)return null;const{from_uid:i=0}=a,c=r[i];return(0,p.jsxs)("div",{className:"reply bg-gray-100 dark:bg-gray-700 z-[999] flex flex-col md:flex-row items-start justify-start gap-4 rounded-t-lg w-full px-4 py-3 text-sm",children:[(0,p.jsxs)("div",{className:"whitespace-nowrap text-gray-400 ",children:["Replying to ",(0,p.jsx)("span",{className:"font-bold text-gray-600 dark:text-gray-400",children:null===c||void 0===c?void 0:c.name})]}),(0,p.jsx)("div",{className:"text-gray-500 overflow-hidden pr-7 ",children:be(a)}),(0,p.jsx)("button",{className:"absolute top-4 right-4 cursor-pointer",onClick:()=>{l()},children:(0,p.jsx)("img",{src:ve,alt:"close icon"})})]})}var ye;function Ne(){return Ne=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Ne.apply(this,arguments)}const Ze=(e,t)=>{let{title:n,titleId:l,...a}=e;return s.createElement("svg",Ne({width:24,height:24,viewBox:"0 0 24 24",fill:"#667085",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":l},a),n?s.createElement("title",{id:l},n):null,ye||(ye=s.createElement("path",{d:"M12 2C6.48 2 2 6.48 2 12C2 17.52 6.48 22 12 22C17.52 22 22 17.52 22 12C22 6.48 17.52 2 12 2ZM17 13H13V17H11V13H7V11H11V7H13V11H17V13Z"})))},_e=(0,s.forwardRef)(Ze);var ke;function Me(){return Me=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Me.apply(this,arguments)}const Ee=(e,t)=>{let{title:n,titleId:l,...a}=e;return s.createElement("svg",Me({width:24,height:24,viewBox:"0 0 24 24",fill:"#667085",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":l},a),n?s.createElement("title",{id:l},n):null,ke||(ke=s.createElement("path",{d:"M3 2H21C21.2652 2 21.5196 2.11706 21.7071 2.32544C21.8946 2.53381 22 2.81643 22 3.11111V20.8889C22 21.1836 21.8946 21.4662 21.7071 21.6746C21.5196 21.8829 21.2652 22 21 22H3C2.73478 22 2.48043 21.8829 2.29289 21.6746C2.10536 21.4662 2 21.1836 2 20.8889V3.11111C2 2.81643 2.10536 2.53381 2.29289 2.32544C2.48043 2.11706 2.73478 2 3 2ZM7 15.8889V11.4444L9 13.6667L11 11.4444V15.8889H13V8.11111H11L9 10.3333L7 8.11111H5V15.8889H7ZM18 12.5556V8.11111H16V12.5556H14L17 15.8889L20 12.5556H18Z"})))},Oe=(0,s.forwardRef)(Ee);var De;function Le(){return Le=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Le.apply(this,arguments)}const Ie=(e,t)=>{let{title:n,titleId:l,...a}=e;return s.createElement("svg",Le({width:24,height:24,viewBox:"0 0 24 24",fill:"#667085",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":l},a),n?s.createElement("title",{id:l},n):null,De||(De=s.createElement("path",{d:"M5 6C5 5.44772 5.44772 5 6 5H8C8.55228 5 9 4.55228 9 4C9 3.44772 8.55228 3 8 3H6C4.34315 3 3 4.34315 3 6V8C3 8.55228 3.44772 9 4 9C4.55228 9 5 8.55228 5 8V6ZM5 18C5 18.5523 5.44772 19 6 19H8C8.55228 19 9 19.4477 9 20C9 20.5523 8.55228 21 8 21H6C4.34315 21 3 19.6569 3 18V16C3 15.4477 3.44772 15 4 15C4.55228 15 5 15.4477 5 16V18ZM18 5C18.5523 5 19 5.44772 19 6V8C19 8.55228 19.4477 9 20 9C20.5523 9 21 8.55228 21 8V6C21 4.34315 19.6569 3 18 3H16C15.4477 3 15 3.44772 15 4C15 4.55228 15.4477 5 16 5H18ZM19 18C19 18.5523 18.5523 19 18 19H16C15.4477 19 15 19.4477 15 20C15 20.5523 15.4477 21 16 21H18C19.6569 21 21 19.6569 21 18V16C21 15.4477 20.5523 15 20 15C19.4477 15 19 15.4477 19 16V18Z"})))},$e=(0,s.forwardRef)(Ie);var He;function Fe(){return Fe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Fe.apply(this,arguments)}const Se=(e,t)=>{let{title:n,titleId:l,...a}=e;return s.createElement("svg",Fe({width:24,height:24,viewBox:"0 0 24 24",fill:"#667085",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":l},a),n?s.createElement("title",{id:l},n):null,He||(He=s.createElement("path",{d:"M9 4C9 3.44772 8.55228 3 8 3C7.44772 3 7 3.44772 7 4V6.5C7 6.77614 6.77614 7 6.5 7H4C3.44772 7 3 7.44772 3 8C3 8.55228 3.44772 9 4 9H6.5C7.88071 9 9 7.88071 9 6.5V4ZM9 20C9 20.5523 8.55228 21 8 21C7.44772 21 7 20.5523 7 20V17.5C7 17.2239 6.77614 17 6.5 17H4C3.44772 17 3 16.5523 3 16C3 15.4477 3.44772 15 4 15H6.5C7.88071 15 9 16.1193 9 17.5V20ZM16 3C15.4477 3 15 3.44772 15 4V6.5C15 7.88071 16.1193 9 17.5 9H20C20.5523 9 21 8.55228 21 8C21 7.44772 20.5523 7 20 7H17.5C17.2239 7 17 6.77614 17 6.5V4C17 3.44772 16.5523 3 16 3ZM15 20C15 20.5523 15.4477 21 16 21C16.5523 21 17 20.5523 17 20V17.5C17 17.2239 17.2239 17 17.5 17H20C20.5523 17 21 16.5523 21 16C21 15.4477 20.5523 15 20 15H17.5C16.1193 15 15 16.1193 15 17.5V20Z"})))},Ve=(0,s.forwardRef)(Se),Pe=e=>{let{toggleMarkdownFullscreen:t,fullscreen:n,toggleMode:l,mode:a,to:r,context:i}=e;const{t:c}=(0,h.$G)(),{addStageFile:d}=(0,se.Z)({context:i,id:r}),u=(0,s.useRef)(null),m="markdown"==a;return(0,p.jsxs)("div",{className:"hidden md:flex flex-col md:flex-row items-center justify-end gap-2.5",children:[(0,p.jsxs)("div",{className:"flex cursor-pointer gap-3.5",children:[(0,p.jsx)(o.Z,{placement:"top",tip:"Markdown",children:(0,p.jsx)(Oe,{className:m?"fill-primary-400":"dark:fill-gray-300",onClick:l})}),m&&(n?(0,p.jsx)(o.Z,{placement:"top",tip:"Exit Fullscreen",children:(0,p.jsx)(Ve,{onClick:t,className:"dark:fill-gray-300"})}):(0,p.jsx)(o.Z,{placement:"top",tip:"Fullscreen",children:(0,p.jsx)($e,{onClick:t,className:"dark:fill-gray-300"})}))]}),!m&&(0,p.jsx)(o.Z,{placement:"top",tip:c("action.upload"),children:(0,p.jsxs)("div",{className:"cursor-pointer relative w-6 h-6",children:[(0,p.jsx)(_e,{className:"dark:fill-gray-300"}),(0,p.jsx)("label",{htmlFor:"file",className:" cursor-pointer absolute left-0 top-0 w-full h-full opacity-0",children:(0,p.jsx)("input",{className:"hidden",size:24,ref:u,multiple:!0,onChange:e=>{if(!e.target.files)return;const t=Array.from(e.target.files).map((e=>{const{size:t,type:n,name:s}=e;return{size:t,type:n,name:s,url:URL.createObjectURL(e)}}));d(t),u.current.value=null,u.current.value=""},type:"file",name:"file",id:"file"})})]})})]})};var Re,Ue,Te,Ge,Be,Ae=n(97943),ze=n(49476);function Ye(){return Ye=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Ye.apply(this,arguments)}const qe=(e,t)=>{let{title:n,titleId:l,...a}=e;return s.createElement("svg",Ye({width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":l},a),n?s.createElement("title",{id:l},n):null,Re||(Re=s.createElement("path",{d:"M8 16C12.4183 16 16 12.4183 16 8C16 3.58172 12.4183 0 8 0C3.58172 0 0 3.58172 0 8C0 12.4183 3.58172 16 8 16Z",fill:"#FFCC4D"})),Ue||(Ue=s.createElement("path",{d:"M7.99997 9.33326C6.38975 9.33326 5.32131 9.1457 3.99997 8.88881C3.6982 8.83059 3.11108 8.88881 3.11108 9.7777C3.11108 11.5555 5.15331 13.7777 7.99997 13.7777C10.8462 13.7777 12.8889 11.5555 12.8889 9.7777C12.8889 8.88881 12.3018 8.83015 12 8.88881C10.6786 9.1457 9.6102 9.33326 7.99997 9.33326Z",fill:"#664500"})),Te||(Te=s.createElement("path",{d:"M4 9.77783C4 9.77783 5.33333 10.2223 8 10.2223C10.6667 10.2223 12 9.77783 12 9.77783C12 9.77783 11.1111 11.5556 8 11.5556C4.88889 11.5556 4 9.77783 4 9.77783Z",fill:"white"})),Ge||(Ge=s.createElement("path",{d:"M5.33328 7.55545C5.94693 7.55545 6.44439 6.859 6.44439 5.99989C6.44439 5.14078 5.94693 4.44434 5.33328 4.44434C4.71963 4.44434 4.22217 5.14078 4.22217 5.99989C4.22217 6.859 4.71963 7.55545 5.33328 7.55545Z",fill:"#664500"})),Be||(Be=s.createElement("path",{d:"M10.6668 7.55545C11.2804 7.55545 11.7779 6.859 11.7779 5.99989C11.7779 5.14078 11.2804 4.44434 10.6668 4.44434C10.0531 4.44434 9.55566 5.14078 9.55566 5.99989C9.55566 6.859 10.0531 7.55545 10.6668 7.55545Z",fill:"#664500"})))},Je=(0,s.forwardRef)(qe);function We(e){let{selectEmoji:t}=e;const n=(0,s.useRef)(null),[l,r]=(0,s.useState)(!1);return(0,s.useEffect)((()=>{n&&n.current&&(n.current.innerHTML="",new ze.cW({data:async()=>(await fetch("https://cdn.jsdelivr.net/npm/@emoji-mart/data")).json(),parent:n.current,onEmojiSelect:e=>{t(e.native)}}))}),[t]),(0,Ae.O)(n,(e=>{const t=e.target;"svg"==t.nodeName&&"toggler"==t.dataset.emoji||"path"==t.nodeName&&"toggler"==t.parentElement.dataset.emoji||r(!1)}),l),(0,p.jsx)(o.Z,{placement:"top",tip:"Emojis",disabled:l,children:(0,p.jsxs)("div",{className:"hidden md:flex relative w-fit items-center",children:[(0,p.jsx)("div",{ref:n,className:(0,a.Z)("absolute -top-5 -left-5 -translate-y-full",l?"block":"hidden")}),(0,p.jsx)(Je,{"data-emoji":"toggler",className:"cursor-pointer select-none !w-[22px] !h-[22px]",onClick:()=>{r((e=>!e))}})]})})}n(61459);var Ke=n(85606),Xe=(n(85012),n(29191),n(69495),n(55403)),Qe=n.n(Xe);const et=e=>{let{updateDraft:t=null,initialValue:n="",height:l="50vh",placeholder:a,sendMarkdown:r,setEditorInstance:i}=e;const c=(0,s.useRef)(),{uploadFile:d}=(0,se.Z)();(0,s.useEffect)((()=>{const e=null===c||void 0===c?void 0:c.current;if(e){const t=e.getInstance();t.removeHook("addImageBlobHook"),t.addHook("addImageBlobHook",(async(e,t)=>{const{thumbnail:n=""}=await d(e)||{};t(n)})),i(t)}return()=>{if(e){const n=e.getInstance(),s=n.getMarkdown();t&&t(s),n.destroy()}}}),[]);return(0,p.jsxs)("div",{className:"input md-editor",children:[(0,p.jsx)(Ke.M,{initialValue:n,plugins:[Qe()],placeholder:a,ref:c,toolbarItems:[],hideModeSwitch:!0,previewStyle:"vertical",height:l,initialEditType:"markdown",useCommandShortcut:!0,theme:(0,E.Yc)()?"dark":"light"}),(0,p.jsx)(ae.Z,{className:"send small",onClick:()=>{if(!c.current)return;const e=c.current.getInstance();e.getMarkdown().trim()&&(r(e.getMarkdown()),e.reset())},children:"Send"})]})},tt=e=>{let{context:t="user",id:n=0}=e;const s=(0,m.TL)(),l=`${t}_${n}`,{draftMarkdown:a,draftMixedText:r}=(0,m.CG)((e=>({draftMarkdown:e.ui.draftMarkdown,draftMixedText:e.ui.draftMixedText})));return{getDraft:function(){return"mixed"==(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"mixed")?r[l]:a[l]},getUpdateDraft:function(){const e="mixed"==(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"mixed")?H.$K:H.Ul;return t=>{s(e({key:l,value:t}))}}}},nt="text",st="markdown",lt=e=>{var t,n,l,r;let{context:i="channel",id:c}=e;const{t:d}=(0,h.$G)("chat"),{resetStageFiles:o}=(0,se.Z)({context:i,id:c}),{getDraft:u,getUpdateDraft:x}=tt({context:i,id:c}),g=de(`${i}_${c}`),[f,C]=(0,s.useState)(null),[j,b]=(0,s.useState)(!1),w=(0,m.TL)(),y=function(e){let{context:t,to:n}=e;const s=(0,v.I0)(),l="channel"==t?J.p_:W.ZK;return e=>{s((0,q.Hz)(e)),s(l({id:n,mid:e.mid}))}}({context:i,to:c}),{from_uid:N,replying_mid:Z=null,mode:_,uploadFiles:k,channelsData:M,usersData:E,uids:O}=(0,m.CG)((e=>{var t;return{channelsData:e.channels.byId,uids:e.users.ids,usersData:e.users.byId,mode:e.ui.inputMode,from_uid:null===(t=e.authData.user)||void 0===t?void 0:t.uid,replying_mid:e.message.replying[`${i}_${c}`],uploadFiles:e.ui.uploadFiles[`${i}_${c}`]}})),{sendMessage:D}=(0,Y.Z)({context:i,from:N,to:c});(0,s.useEffect)((()=>{Z&&g.focus()}),[Z]);const L="channel"==i?null===(t=M[c])||void 0===t?void 0:t.name:null===(n=E[c])||void 0===n?void 0:n.name,I=`${d("send_to")} ${K.rR[i]}${L} `,$="channel"==i?null!==(l=M[c])&&void 0!==l&&l.is_public?O:null===(r=M[c])||void 0===r?void 0:r.members:[],F=_==st;return(0,p.jsxs)("div",{className:(0,a.Z)(`send relative bg-gray-200 rounded-lg w-full dark:bg-gray-600 ${_} ${j?"fullscreen":""} ${Z?"reply":""} ${i}`,F&&j&&"-mt-9"),children:[Z&&(0,p.jsx)(we,{context:i,mid:Z,id:c}),_==nt&&(0,p.jsx)(ge,{context:i,id:c}),(0,p.jsxs)("div",{className:(0,a.Z)("flex justify-between items-center gap-4 px-2 md:px-4 py-1 md:py-3.5",F&&"grid grid-cols-[1fr_1fr] grid-rows-[auto_auto] gap-0"),children:[(0,p.jsx)(We,{selectEmoji:e=>{_==st&&f?f.insertText(e):g.insertText(e)}}),_==nt&&(0,p.jsx)(oe,{updateDraft:x(),initialValue:u(),members:$,id:`${i}_${c}`,placeholder:I,sendMessages:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(c){if(e&&e.length)for await(const n of e){var t;const{type:e,content:s,properties:l={}}=n;l.local_id=null!==(t=l.local_id)&&void 0!==t?t:+new Date,await D({id:c,reply_mid:Z,type:e,content:s,from_uid:N,properties:l})}k&&0!==k.length&&(k.forEach((e=>{const t=+new Date,{url:n,name:s,size:l,type:a}=e,r={mid:t,content:n,content_type:K.bT.file,created_at:t,properties:{content_type:a,name:s,size:l,local_id:t},from_uid:N,sending:!0};y(r)})),o())}}}),(0,p.jsx)(Pe,{context:i,to:c,mode:_,toggleMode:()=>{w((0,H.XH)(_==nt?st:nt))},fullscreen:j,toggleMarkdownFullscreen:()=>{b((e=>!e))}}),_==st&&(0,p.jsx)(et,{updateDraft:x("markdown"),initialValue:u("markdown"),height:j?"calc(100vh - 168px)":"30vh",placeholder:I,setEditorInstance:C,sendMarkdown:async e=>{D({id:c,reply_mid:Z,type:"markdown",content:e,from_uid:N,properties:{local_id:+new Date}})}})]})]})};var at=n(27418);function rt(){const[e,t]=(0,s.useState)(!1),{loginUser:n,messageData:l}=(0,m.CG)((e=>({messageData:e.message,loginUser:e.authData.user}))),[a]=(0,C.Pq)();return{canDelete:e=>!(!e||0==e.length)&&(!(null===n||void 0===n||!n.is_admin)||e.every((e=>{var t;return(null===(t=l[e])||void 0===t?void 0:t.from_uid)==(null===n||void 0===n?void 0:n.uid)}))),isDeleting:e,deleteMessage:async e=>{if(!e)return;const n=Array.isArray(e)?e:[e];t(!0);for await(const t of n)await a(t);t(!1)}}}var it=n(10189),ct=n(41016),dt=n(24041);const ot=e=>{let{interactive:t=!0,id:n,compact:s=!1,avatarSize:l=32}=e;const{channel:r,totalMemberCount:i}=(0,m.CG)((e=>({channel:e.channels.byId[n],totalMemberCount:e.users.ids.length})));if(!r)return null;const{name:c,members:d=[],is_public:o,icon:u}=r;return(0,p.jsxs)("div",{className:(0,a.Z)("flex items-center justify-start gap-2 p-2 rounded-lg select-none",s&&"p-0",t&&"hover:bg-gray-500/10"),children:[(0,p.jsx)("div",{className:"cursor-pointer relative",style:{width:`${l}px`,height:`${l}px`},children:(0,p.jsx)(M.Z,{width:l,height:l,type:"channel",src:u,name:"#",alt:"avatar",className:"!w-full !h-full rounded-full"})}),!s&&(0,p.jsxs)("div",{className:"flex text-sm text-gray-500 font-semibold",children:[(0,p.jsx)("span",{className:"max-w-[140px] truncate",children:c})," (",o?i:d.length,")"]})]})},ut=e=>{const{content_type:t,content:n,thumbnail:s,properties:l}=e;let a=null;switch(t){case K.bT.text:a=(0,p.jsx)("span",{className:"md:truncate md:break-words md:break-all text-gray-800 dark:text-gray-100",children:(0,p.jsx)(je.Z,{text:n,url:!1,mentionTextOnly:!0,mentionPopOver:!1})});break;case K.bT.markdown:a=(0,p.jsx)("div",{className:"max-h-[152px] overflow-hidden dark:text-gray-100",children:(0,p.jsx)(fe.Z,{content:n})});break;case K.bT.file:{const{content_type:e="",name:t,size:n}=l||{},r=(0,E.LP)(e,t,"w-4 h-5");a=(0,E.Or)(e,n)?(0,p.jsx)("img",{className:"w-10 h-10 object-cover",src:s}):(0,p.jsxs)(p.Fragment,{children:[r,(0,p.jsx)("span",{className:"ml-1 text-[10px] text-gray-500 dark:text-gray-100",children:t})]})}}return a},mt=e=>{let{mid:t,interactive:n=!0}=e;const{data:s,users:l}=(0,m.CG)((e=>({data:e.message[t],users:e.users.byId})));if(!s)return null;const a=l[s.from_uid||0];return a?(0,p.jsxs)("div",{"data-mid":t,className:"flex items-start flex-col md:flex-row p-2 bg-gray-100 dark:bg-gray-900 rounded-lg gap-2 mb-1 "+(n?"cursor-pointer":"!bg-transparent"),onClick:n?e=>{const{mid:t}=e.currentTarget.dataset,n=document.querySelector(`[data-msg-mid='${t}']`);n&&(n.dataset.highlight="true",n.scrollIntoView({behavior:"smooth",block:"center"}),setTimeout((()=>{n.dataset.highlight="false"}),3e3))}:void 0,children:[(0,p.jsxs)("div",{className:"flex items-center gap-1 whitespace-nowrap",children:[(0,p.jsx)(M.Z,{width:16,height:16,className:"w-4 h-4 rounded-full",src:a.avatar,name:a.name}),(0,p.jsx)("span",{className:"text-sm text-primary-500",children:a.name})]}),(0,p.jsx)("div",{className:"text-sm flex items-center overflow-hidden",children:ut(s)})]},t):null},ht=s.memo(mt,((e,t)=>e.mid==t.mid));var pt=n(12677),xt=n(72136),gt=n(24645);const ft=e=>{let{mids:t,closeModal:n}=e;const{t:l}=(0,h.$G)(),[a,r]=(0,s.useState)(""),{sendMessages:i}=(0,Y.Z)(),{forwardMessage:c,forwarding:d}=function(){const[e,t]=(0,s.useState)(!1),[n,{isError:l,isLoading:a,isSuccess:r}]=(0,C.hE)(),[i,{isLoading:c,isSuccess:d,isError:o}]=(0,F.R4)(),[u,{isLoading:m,isSuccess:h,isError:p}]=(0,S.bm)();return{forwardMessage:async e=>{let{mids:s,users:l,channels:a}=e;t(!0);const r=await n(s);if("error"in r)return;const c=r.data;if(l.length)for await(const t of l)await u({type:"archive",id:t,content:c});if(a.length)for await(const t of a)await i({type:"archive",id:t,content:c});t(!1)},forwarding:e,isError:o||p||l,isSending:m||c||a,isSuccess:d||h||r}}(),[o,u]=(0,s.useState)([]),[m,x]=(0,s.useState)([]),{channels:g,updateInput:f}=(0,pt.Z)(),{users:v,input:j,updateInput:b}=(0,xt.Z)(),w=e=>{let{currentTarget:t}=e;const{id:n=0,type:s="user"}=t.dataset,l="user"==s?o:m;("user"==s?u:x)(l.includes(+n)?l.filter((e=>e!=n)):[...l,+n])},y=function(e){"user"==(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"user")?u(o.filter((t=>t!=e))):x(m.filter((t=>t!=e)))};let N=o.length+m.length;const Z=0==m.length&&0==o.length||d;return(0,p.jsx)(ue.Z,{children:(0,p.jsxs)("div",{className:"flex max-h-[514px] min-h-[400px] bg-white drop-shadow rounded-lg overflow-hidden",children:[(0,p.jsxs)("div",{className:"w-[271px] shadow-[inset_-1px_0px_0px_rgba(0,_0,_0,_0.1)] overflow-y-scroll bg-inherit",children:[(0,p.jsx)("div",{className:"sticky top-0 bg-inherit z-[90] p-4 w-[calc(100%_-_1px)]",children:(0,p.jsx)("input",{className:"px-2 py-2.5 text-sm bg-black/10 rounded-lg w-full",value:j,onChange:e=>{const t=e.target.value;f(t),b(t)},placeholder:"Search user or channel"})}),(0,p.jsxs)("ul",{className:"flex flex-col pb-5",children:[g&&g.map((e=>{const{gid:t}=e,n=m.includes(t);return(0,p.jsxs)("li",{"data-type":"channel","data-id":t,className:"cursor-pointer flex items-center px-4 rounded md:hover:bg-gray-600/10",onClick:w,children:[(0,p.jsx)(gt.Z,{readOnly:!0,checked:n,name:"cb",id:"cb"}),(0,p.jsx)(ot,{id:t,interactive:!1})]},t)})),v&&v.map((e=>{const{uid:t}=e,n=o.includes(t);return(0,p.jsxs)("li",{"data-id":t,"data-type":"user",className:"cursor-pointer flex items-center px-4 rounded md:hover:bg-gray-600/10",onClick:w,children:[(0,p.jsx)(gt.Z,{readOnly:!0,checked:n,name:"cb",id:"cb"}),(0,p.jsx)(G.Z,{uid:t,interactive:!1})]},t)}))]})]}),(0,p.jsxs)("div",{className:"flex flex-col items-start p-4 box-border",children:[(0,p.jsxs)("h3",{className:"font-semibold text-sm text-gray-700 mb-4",children:["Send To ",N]}),(0,p.jsxs)("ul",{className:"w-full h-[260px] py-2.5 overflow-y-scroll",children:[m.map((e=>(0,p.jsxs)("li",{className:"relative",children:[(0,p.jsx)(ot,{id:e,interactive:!1},e),(0,p.jsx)(dt.Z,{className:"cursor-pointer absolute right-1 top-1/2 -translate-y-1/2",onClick:y.bind(null,e,"channel")})]},e))),o.map((e=>(0,p.jsxs)("li",{className:"item",children:[(0,p.jsx)(G.Z,{uid:e,interactive:!1},e),(0,p.jsx)(dt.Z,{className:"remove",onClick:y.bind(null,e,"user")})]},e)))]}),(0,p.jsx)("div",{className:"rounded-lg p-2 max-h-[200px] overflow-auto bg-slate-100 w-[280px] mb-1",children:t.map((e=>(0,p.jsx)(ht,{mid:e,interactive:!1},e)))}),(0,p.jsx)(me.Z,{className:"mb-8",placeholder:"Leave a message",value:a,onChange:e=>{r(e.target.value)}}),(0,p.jsxs)("div",{className:"w-full flex items-center justify-end gap-4",children:[(0,p.jsx)(ae.Z,{onClick:n,className:"normal cancel",children:l("action.cancel")}),(0,p.jsxs)(ae.Z,{className:"normal",disabled:Z,onClick:async()=>{await c({mids:t.map((e=>+e)),users:o,channels:m}),a.trim()&&await i({content:a,users:o,channels:m}),at.ZP.success("Forward Message Successfully"),n()},children:["Send To ",0==N?null:`(${N})`]})]})]})]})})};var vt=n(40698);const Ct=e=>{var t;let{mid:n=0,context:s}=e;const{msg:l,usersData:r}=(0,m.CG)((e=>({msg:e.message[n],usersData:e.users.byId})));if(!l)return null;const{from_uid:i=0,content_type:c,content:d,thumbnail:o="",properties:u}=l,{name:h,avatar:x}=null!==(t=r[i])&&void 0!==t?t:{},g="pin"==s;return(0,p.jsxs)("div",{className:(0,a.Z)("w-full relative flex items-start gap-3 p-2 my-2 rounded-lg",g&&"max-h-64 overflow-auto overflow-x-hidden border border-solid border-gray-200 dark:border-gray-400"),children:[(0,p.jsx)(M.Z,{width:40,height:40,className:"rounded-full object-cover",src:x,name:h}),(0,p.jsxs)("div",{className:"w-full flex flex-col items-start",children:[(0,p.jsx)("div",{className:"flex items-center gap-2 font-semibold",children:(0,p.jsx)("span",{className:"text-gray-500 text-sm",children:h})}),(0,p.jsx)("div",{className:"select-text text-gray-600 text-sm break-all whitespace-pre-wrap dark:text-white",children:(0,k.Z)({content_type:c,content:d,thumbnail:o,from_uid:i,properties:u})})]})]})},jt=e=>{let{closeModal:t,mids:n=[]}=e;const l=n?Array.isArray(n)?n:[n]:[],[a]=(0,s.useState)(l),{deleteMessage:r,isDeleting:i}=rt();return 0==a.length?null:(0,p.jsx)(ue.Z,{children:(0,p.jsx)(vt.Z,{buttons:(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(ae.Z,{className:"cancel",onClick:t.bind(null,!1),children:"Cancel"}),(0,p.jsx)(ae.Z,{disabled:i,onClick:async()=>{await r(a),t(!0)},className:"danger",children:i?"Deleting":"Delete"})]}),title:"Delete Message",description:`Are you sure want to delete ${a.length>1?"these messages":"this message"}?`,children:1===a.length&&(0,p.jsx)(Ct,{mid:a[0]})})})},bt=e=>{let{context:t,id:n}=e;const[l,a]=(0,s.useState)(!1),{canDelete:r}=rt(),{addFavorite:i}=(0,I.Z)({}),c=(0,m.CG)((e=>e.ui.selectMessages[`${t}_${n}`])),[d,o]=(0,s.useState)(!1),u=(0,m.TL)(),h=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];a((e=>!e)),e&&(u((0,H.Gy)({context:t,id:n,operation:"reset"})),at.ZP.success("Messages Deleted!"))},x=()=>{o((e=>!e))};(0,X.z)("Escape",(()=>{u((0,H.Gy)({context:t,id:n,operation:"reset"}))}));const g=r(c),f="p-2 bg-slate-100 rounded md:hover:bg-slate-300";return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)("div",{className:"relative p-4 flex-center gap-8 shadow-md",children:[(0,p.jsx)("button",{className:f,onClick:x,children:(0,p.jsx)(it.Z,{})}),(0,p.jsx)("button",{className:f,onClick:async()=>{await i(c)?(u((0,H.Gy)({context:t,id:n,operation:"reset"})),at.ZP.success("Messages Saved!")):at.ZP.error("Operation Failed!")},children:(0,p.jsx)(ct.Z,{})}),(0,p.jsx)("button",{className:f,disabled:!g,onClick:h.bind(null,!1),children:(0,p.jsx)(xe.Z,{})}),(0,p.jsx)(dt.Z,{className:"cursor-pointer absolute right-5 top-1/2 -translate-y-1/2",onClick:()=>{u((0,H.Gy)({context:t,id:n,operation:"reset"}))}})]}),d&&(0,p.jsx)(ft,{mids:c,closeModal:x}),l&&(0,p.jsx)(jt,{mids:c,closeModal:h})]})};var wt=n(21645),yt=n(34400);const Nt=e=>{let{placement:t="chat"}=e;const{t:n}=(0,h.$G)("welcome"),{t:s}=(0,h.$G)(),r=(0,v.I0)(),{clearLocalData:i}=(0,yt.Z)(),c=(0,l.s0)();return(0,p.jsxs)("div",{className:(0,a.Z)("flex items-center justify-between bg-slate-200/80 dark:bg-gray-800 rounded-lg p-4 border border-solid border-gray-200 dark:border-gray-500","session"==t?"!w-[96%] md:hidden fixed bottom-2 left-1/2 -translate-x-1/2":"w-full"),children:[(0,p.jsxs)("span",{className:"text-xs md:text-base text-gray-400 dark:text-gray-100",children:[(0,p.jsx)("i",{className:"mr-2 text-xs md:text-lg ",children:"\ud83d\udc4b"}),n("sign_in_tip")]}),(0,p.jsx)(ae.Z,{onClick:()=>{r((0,wt.sQ)()),i(),c("/login")},className:"small",children:s("action.login")})]})};var Zt=n(51892);const _t=()=>{const{t:e}=(0,h.$G)("chat"),t=(0,l.s0)();return(0,p.jsxs)("div",{className:"flex items-center justify-between bg-red-600 rounded-md w-full py-3 px-4",children:[(0,p.jsxs)("span",{className:"text-white",children:[(0,p.jsx)("i",{className:"text-xl mr-2",children:"\ud83d\udea8"}),e("license_tip")]}),(0,p.jsx)(ae.Z,{onClick:()=>{t("/setting/license")},className:"small",children:"Upgrade License"})]})},kt=e=>{let{context:t,name:n}=e;const{t:s}=(0,h.$G)("chat");return(0,p.jsx)("div",{className:"flex-center absolute left-0 top-0 w-full h-full bg-black/50",children:(0,p.jsx)("div",{className:"p-4 drop-shadow-md rounded-lg bg-primary-300",children:(0,p.jsxs)("div",{className:"p-4 pt-16 border-2 border-dashed border-primary-300 rounded-md flex flex-col items-center text-white",children:[(0,p.jsx)("h4",{className:"text-xl font-semibold",children:`${s("send_to")} ${K.rR[t]}${n}`}),(0,p.jsx)("span",{className:"text-sm",children:"Photos accept jpg, png, max size limit to 10M."})]})})})},Mt=e=>{var t,n;let{readonly:l=!1,children:r,header:i,aside:c=null,users:d=null,dropFiles:o=[],context:u="channel",to:h}=e;const{reachLimit:x}=(0,Zt.Z)(),{addStageFile:g}=(0,se.Z)({context:u,id:h}),f=(0,s.useRef)(null),[v,C]=(0,s.useState)(null),{selects:j,channelsData:b,usersData:w}=(0,m.CG)((e=>({selects:e.ui.selectMessages[`${u}_${h}`],channelsData:e.channels.byId,usersData:e.users.byId}))),[{isActive:y},N]=(0,B.L)((()=>({accept:[A.FILE],drop(e){let{files:t}=e;if(t.length){const e=t.map((e=>{const{size:t,type:n,name:s}=e;return{size:t,type:n,name:s,url:URL.createObjectURL(e)}}));g(e)}},collect:e=>({isActive:e.canDrop()&&e.isOver()})})),[u,h]);(0,s.useEffect)((()=>{if(null!==o&&void 0!==o&&o.length){const e=o.map((e=>{const{size:t,type:n,name:s}=e;return{size:t,type:n,name:s,url:URL.createObjectURL(e)}}));g(e)}}),[o]);(0,s.useEffect)((()=>{const e=null===f||void 0===f?void 0:f.current;e&&e.addEventListener("click",(e=>{const t=e.target;if(t&&"IMG"==t.nodeName&&t.classList.contains("preview")){const e=t.src,n=t.dataset.origin||t.src,s=t.dataset.download||t.src,l=JSON.parse(t.dataset.meta||"{}");C({thumbnail:e,originUrl:n,downloadLink:s,...l})}}),!0)}),[]);const Z="channel"==u?null===(t=b[h])||void 0===t?void 0:t.name:null===(n=w[h])||void 0===n?void 0:n.name;return(0,p.jsxs)(p.Fragment,{children:[v&&(0,p.jsx)(z.Z,{data:v,closeModal:()=>{C(null)}}),(0,p.jsxs)("article",{ref:N,className:"relative w-full rounded-r-2xl",children:[i,(0,p.jsxs)("main",{className:"h-full w-full flex items-start justify-between relative",ref:f,children:[(0,p.jsxs)("div",{className:"rounded-br-2xl w-full flex flex-col h-[calc(100vh_-_64px)] md:h-[calc(100vh_-_56px_-_18px)]",children:[r,(0,p.jsxs)("div",{className:"px-2 py-0 md:p-4  "+(j?"selecting":""),children:[l?(0,p.jsx)(Nt,{}):x?(0,p.jsx)(_t,{}):(0,p.jsx)("div",{className:(0,a.Z)("flex justify-center",j&&"hidden"),children:(0,p.jsx)(lt,{id:h,context:u},h)}),j&&(0,p.jsx)(bt,{context:u,id:h})]})]}),d&&(0,p.jsx)("div",{className:"hidden md:block",children:d}),c&&(0,p.jsx)("div",{className:(0,a.Z)("p-3 absolute right-0 -top-14 translate-x-full flex-col hidden md:flex"),children:c})]}),!l&&y&&(0,p.jsx)(kt,{context:u,name:Z})]})]})};var Et=n(88143);var Ot,Dt,Lt=n(69195);function It(){return It=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},It.apply(this,arguments)}const $t=(e,t)=>{let{title:n,titleId:l,...a}=e;return s.createElement("svg",It({width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":l},a),n?s.createElement("title",{id:l},n):null,Ot||(Ot=s.createElement("g",{clipPath:"url(#clip0_7924_2562)"},s.createElement("path",{d:"M15.5359 7.96249C15.5359 7.73893 15.4826 7.52916 15.3932 7.33849C14.7972 5.41582 12.007 5.55627 8.03811 5.46249C7.37455 5.44693 7.75411 4.66338 7.987 2.94338C8.13855 1.82471 7.41722 0.106934 6.20478 0.106934C4.20566 0.106934 6.12878 1.68382 4.36122 5.58338C3.41678 7.66693 1.30566 6.49982 1.30566 8.59271V13.3567C1.30566 14.1714 1.38566 14.9545 2.53144 15.0834C3.64211 15.2083 3.39233 15.9998 4.99455 15.9998H13.0141C13.831 15.9998 14.4954 15.3349 14.4954 14.518C14.4954 14.1794 14.3768 13.8709 14.1852 13.6212C14.6386 13.3674 14.9497 12.8883 14.9497 12.3327C14.9497 11.9949 14.8314 11.6865 14.6403 11.4372C15.095 11.1838 15.407 10.7043 15.407 10.1478C15.407 9.74382 15.2434 9.3776 14.9799 9.1096C15.3163 8.83805 15.5359 8.42738 15.5359 7.96249Z",fill:"#FFDB5E"}),s.createElement("path",{d:"M10.231 9.44411H14.055C14.575 9.44411 15.063 9.16589 15.3288 8.71833C15.4381 8.53389 15.3772 8.29522 15.1923 8.18545C15.0079 8.07567 14.7692 8.13745 14.6594 8.32189C14.5337 8.53478 14.3012 8.66633 14.0546 8.66633H10.139C9.751 8.66633 9.43545 8.35078 9.43545 7.96278C9.43545 7.57478 9.751 7.25922 10.139 7.25922H12.7554C12.9701 7.25922 13.1443 7.085 13.1443 6.87033C13.1443 6.65567 12.9701 6.48145 12.7554 6.48145H10.1386C9.32167 6.48145 8.65723 7.14589 8.65723 7.96278C8.65723 8.41833 8.86834 8.82144 9.19278 9.09345C8.91945 9.36233 8.74923 9.73567 8.74923 10.1481C8.74923 10.605 8.96167 11.0094 9.28789 11.281C9.01634 11.5494 8.84789 11.9214 8.84789 12.333C8.84789 12.8308 9.09634 13.2699 9.47412 13.5388C9.24123 13.8006 9.09545 14.1414 9.09545 14.5183C9.09545 15.3352 9.75989 15.9997 10.5768 15.9997H13.0141C13.5341 15.9997 14.0226 15.7219 14.2883 15.2743C14.3981 15.0899 14.3372 14.8512 14.1528 14.7414C13.9679 14.6326 13.7292 14.6926 13.6199 14.877C13.4932 15.0899 13.2608 15.2219 13.0141 15.2219H10.5768C10.1888 15.2219 9.87323 14.9063 9.87323 14.5183C9.87323 14.1303 10.1888 13.8148 10.5768 13.8148H13.4683C13.9883 13.8148 14.4772 13.5366 14.7426 13.089C14.8523 12.9041 14.7914 12.6654 14.607 12.5561C14.4208 12.4446 14.183 12.5072 14.0741 12.6917C13.9457 12.9081 13.719 13.037 13.4683 13.037H10.3292C9.94123 13.037 9.62567 12.721 9.62567 12.333C9.62567 11.945 9.94123 11.6294 10.3292 11.6294H13.9252C14.4452 11.6294 14.9337 11.3517 15.1994 10.9041C15.3092 10.7197 15.2483 10.481 15.0639 10.3712C14.8786 10.2619 14.6403 10.3223 14.531 10.5068C14.4026 10.7228 14.1759 10.8517 13.9252 10.8517H10.231C9.843 10.8517 9.52745 10.5361 9.52745 10.1481C9.52745 9.76011 9.84256 9.44411 10.231 9.44411Z",fill:"#EE9547"}))),Dt||(Dt=s.createElement("defs",null,s.createElement("clipPath",{id:"clip0_7924_2562"},s.createElement("rect",{width:16,height:16,fill:"white"})))))},Ht=(0,s.forwardRef)($t);var Ft,St;function Vt(){return Vt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Vt.apply(this,arguments)}const Pt=(e,t)=>{let{title:n,titleId:l,...a}=e;return s.createElement("svg",Vt({width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":l},a),n?s.createElement("title",{id:l},n):null,Ft||(Ft=s.createElement("path",{d:"M15.5359 8.03733C15.5359 8.26089 15.4826 8.47067 15.3932 8.66133C14.7972 10.584 12.007 10.4436 8.03811 10.5373C7.37455 10.5529 7.75411 11.3364 7.987 13.0564C8.13855 14.1751 7.41722 15.8929 6.20478 15.8929C4.20566 15.8929 6.12878 14.316 4.36122 10.4164C3.41678 8.33289 1.30566 9.5 1.30566 7.40711V2.64356C1.30566 1.82889 1.38566 1.04578 2.53144 0.916889C3.64211 0.791556 3.39233 0 4.99455 0H13.0141C13.831 0 14.4954 0.664889 14.4954 1.48178C14.4954 1.82044 14.3768 2.12889 14.1852 2.37867C14.6386 2.63244 14.9497 3.11156 14.9497 3.66711C14.9497 4.00489 14.8314 4.31333 14.6403 4.56267C15.095 4.816 15.407 5.29556 15.407 5.852C15.407 6.256 15.2434 6.62222 14.9799 6.89022C15.3163 7.16178 15.5359 7.57244 15.5359 8.03733Z",fill:"#FFDB5E"})),St||(St=s.createElement("path",{d:"M10.231 6.55604H14.055C14.575 6.55604 15.063 6.83427 15.3288 7.28182C15.4381 7.46627 15.3772 7.70493 15.1923 7.81471C15.0079 7.92449 14.7692 7.86271 14.6594 7.67827C14.5337 7.46538 14.3012 7.33382 14.0546 7.33382H10.139C9.751 7.33382 9.43545 7.64938 9.43545 8.03738C9.43545 8.42538 9.751 8.74093 10.139 8.74093H12.7554C12.9701 8.74093 13.1443 8.91515 13.1443 9.12982C13.1443 9.34449 12.9701 9.51871 12.7554 9.51871H10.1386C9.32167 9.51871 8.65723 8.85427 8.65723 8.03738C8.65723 7.58182 8.86834 7.17871 9.19278 6.90671C8.91945 6.63782 8.74923 6.26449 8.74923 5.85204C8.74923 5.39515 8.96167 4.99071 9.28789 4.71915C9.01634 4.45071 8.84789 4.07871 8.84789 3.66715C8.84789 3.16938 9.09634 2.73027 9.47412 2.46138C9.24123 2.1996 9.09545 1.85871 9.09545 1.48182C9.09545 0.664933 9.75989 0.000488281 10.5768 0.000488281H13.0141C13.5341 0.000488281 14.0226 0.278266 14.2883 0.725822C14.3981 0.910266 14.3372 1.14893 14.1528 1.25871C13.9679 1.3676 13.7292 1.3076 13.6199 1.12315C13.4932 0.910266 13.2608 0.778266 13.0141 0.778266H10.5768C10.1888 0.778266 9.87323 1.09382 9.87323 1.48182C9.87323 1.86982 10.1888 2.18538 10.5768 2.18538H13.4683C13.9883 2.18538 14.4772 2.4636 14.7426 2.91115C14.8523 3.09604 14.7914 3.33471 14.607 3.44404C14.4208 3.5556 14.183 3.49293 14.0741 3.30849C13.9457 3.09204 13.719 2.96315 13.4683 2.96315H10.3292C9.94123 2.96315 9.62567 3.27915 9.62567 3.66715C9.62567 4.05515 9.94123 4.37071 10.3292 4.37071H13.9252C14.4452 4.37071 14.9337 4.64849 15.1994 5.09604C15.3092 5.28049 15.2483 5.51915 15.0639 5.62893C14.8786 5.73827 14.6403 5.67782 14.531 5.49338C14.4026 5.27738 14.1759 5.14849 13.9252 5.14849H10.231C9.843 5.14849 9.52745 5.46404 9.52745 5.85204C9.52745 6.24004 9.84256 6.55604 10.231 6.55604Z",fill:"#EE9547"})))},Rt=(0,s.forwardRef)(Pt);var Ut,Tt;function Gt(){return Gt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Gt.apply(this,arguments)}const Bt=(e,t)=>{let{title:n,titleId:l,...a}=e;return s.createElement("svg",Gt({width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":l},a),n?s.createElement("title",{id:l},n):null,Ut||(Ut=s.createElement("g",{clipPath:"url(#clip0_7924_2577)"},s.createElement("path",{d:"M5.16703 3.32813C5.11725 3.37791 5.07947 3.43791 5.04792 3.50369L5.04436 3.50013L0.0594748 14.7295L0.0643636 14.7344C-0.0280808 14.9135 0.126586 15.2779 0.443475 15.5952C0.760364 15.9121 1.12481 16.0668 1.30392 15.9744L1.30836 15.9788L12.5377 10.9935L12.5341 10.9895C12.5995 10.9584 12.6595 10.9206 12.7097 10.8699C13.4039 10.1757 12.2781 7.92458 10.1959 5.84191C8.11281 3.75924 5.8617 2.63391 5.16703 3.32813Z",fill:"#DD2E44"}),s.createElement("path",{d:"M5.7777 5.3335L0.184808 14.4473L0.0594748 14.7295L0.0643636 14.7344C-0.0280808 14.9135 0.126586 15.2779 0.443475 15.5953C0.546586 15.6984 0.653697 15.7766 0.758586 15.8428L7.55548 7.55572L5.7777 5.3335Z",fill:"#EA596E"}),s.createElement("path",{d:"M10.2275 5.80713C12.3031 7.88358 13.4555 10.0969 12.8004 10.7511C12.1457 11.4062 9.93241 10.2542 7.85552 8.17869C5.77952 6.10224 4.62752 3.88802 5.28219 3.23335C5.9373 2.57869 8.15063 3.73069 10.2275 5.80713Z",fill:"#A0041E"}),s.createElement("path",{d:"M8.26223 6.04852C8.17379 6.12008 8.05823 6.15741 7.93601 6.14408C7.55023 6.1023 7.22579 5.96808 6.99868 5.75608C6.75823 5.53163 6.63956 5.2303 6.67201 4.92852C6.7289 4.39874 7.26045 3.91252 8.16668 4.0103C8.51912 4.04808 8.67645 3.93474 8.68179 3.88052C8.68801 3.82674 8.55868 3.6823 8.20623 3.64408C7.82045 3.6023 7.49601 3.46808 7.26845 3.25608C7.02801 3.03163 6.9089 2.7303 6.94179 2.42852C6.99957 1.89874 7.53068 1.41252 8.43601 1.51074C8.6929 1.5383 8.82845 1.48541 8.88579 1.45119C8.93157 1.42319 8.94979 1.39652 8.95157 1.38097C8.9569 1.32719 8.82934 1.18274 8.47601 1.14452C8.23201 1.11786 8.05512 0.899188 8.08223 0.654744C8.10845 0.410744 8.32668 0.2343 8.57156 0.260966C9.4769 0.3583 9.8929 0.9463 9.83556 1.47652C9.77779 2.00719 9.24668 2.49252 8.34045 2.39519C8.08357 2.36719 7.94934 2.42052 7.89157 2.45474C7.84579 2.4823 7.82712 2.50941 7.82534 2.52452C7.81957 2.57874 7.94801 2.72274 8.30134 2.76097C9.20668 2.85874 9.62268 3.4463 9.56534 3.97652C9.50801 4.5063 8.9769 4.99252 8.07112 4.8943C7.81423 4.86674 7.67912 4.92008 7.62134 4.95386C7.57512 4.9823 7.55734 5.00897 7.55556 5.02408C7.54979 5.07786 7.67823 5.2223 8.03112 5.26052C8.27468 5.28719 8.45201 5.5063 8.4249 5.7503C8.41245 5.87208 8.35068 5.97741 8.26223 6.04852Z",fill:"#AA8DD8"}),s.createElement("path",{d:"M13.6272 10.1588C14.504 9.91122 15.1089 10.3023 15.2529 10.8157C15.3969 11.3285 15.0849 11.9779 14.2085 12.2246C13.8663 12.3205 13.7636 12.4841 13.7774 12.5361C13.7925 12.5886 13.9663 12.6748 14.3076 12.5783C15.184 12.3317 15.7889 12.7228 15.9329 13.2357C16.0778 13.749 15.7649 14.3974 14.888 14.6446C14.5463 14.7406 14.4432 14.9046 14.4583 14.9566C14.4729 15.0086 14.6463 15.0948 14.988 14.9988C15.2236 14.9326 15.4698 15.0699 15.536 15.3059C15.6018 15.5423 15.4645 15.7877 15.228 15.8543C14.352 16.101 13.7467 15.7108 13.6018 15.197C13.4578 14.6841 13.7703 14.0357 14.6476 13.7885C14.9898 13.6921 15.0925 13.529 15.0774 13.4766C15.0632 13.4246 14.8898 13.3379 14.5485 13.4339C13.6712 13.681 13.0667 13.2908 12.9223 12.7766C12.7778 12.2637 13.0903 11.6152 13.9672 11.3677C14.3085 11.2721 14.4112 11.1077 14.3969 11.0561C14.3818 11.0037 14.2089 10.9174 13.8672 11.0134C13.6307 11.0801 13.3858 10.9423 13.3192 10.7063C13.2529 10.4708 13.3907 10.2254 13.6272 10.1588Z",fill:"#77B255"}),s.createElement("path",{d:"M10.2226 8.96008C10.092 8.96008 9.96309 8.90274 9.87509 8.79341C9.72176 8.60141 9.75331 8.32185 9.94443 8.16852C10.0413 8.09074 12.3524 6.27563 15.6186 6.74274C15.8618 6.77741 16.0306 7.0023 15.996 7.24541C15.9613 7.48808 15.7382 7.65874 15.4929 7.6223C12.6071 7.21252 10.5209 8.8463 10.5004 8.86274C10.4178 8.92852 10.32 8.96008 10.2226 8.96008Z",fill:"#AA8DD8"}),s.createElement("path",{d:"M2.55737 7.11115C2.51515 7.11115 2.47204 7.10493 2.42937 7.09249C2.19426 7.02182 2.06093 6.77426 2.1316 6.53915C2.63515 4.86226 3.0916 2.18626 2.53071 1.48848C2.46804 1.40937 2.37337 1.3316 2.15649 1.34804C1.7396 1.38004 1.77915 2.2596 1.7796 2.26848C1.79826 2.51337 1.61426 2.72671 1.36982 2.74493C1.12137 2.76004 0.911597 2.5796 0.893375 2.33471C0.847597 1.72182 1.03826 0.541373 2.08982 0.461818C2.55915 0.426262 2.94893 0.589373 3.22404 0.931596C4.27782 2.24315 3.20804 6.04537 2.98315 6.79471C2.92537 6.98715 2.74849 7.11115 2.55737 7.11115Z",fill:"#77B255"}),s.createElement("path",{d:"M11.3334 4.889C11.7016 4.889 12.0001 4.59052 12.0001 4.22233C12.0001 3.85414 11.7016 3.55566 11.3334 3.55566C10.9652 3.55566 10.6667 3.85414 10.6667 4.22233C10.6667 4.59052 10.9652 4.889 11.3334 4.889Z",fill:"#5C913B"}),s.createElement("path",{d:"M0.888889 8.88911C1.37981 8.88911 1.77778 8.49114 1.77778 8.00022C1.77778 7.5093 1.37981 7.11133 0.888889 7.11133C0.397969 7.11133 0 7.5093 0 8.00022C0 8.49114 0.397969 8.88911 0.888889 8.88911Z",fill:"#9266CC"}),s.createElement("path",{d:"M14.4445 9.33333C14.8127 9.33333 15.1112 9.03486 15.1112 8.66667C15.1112 8.29848 14.8127 8 14.4445 8C14.0763 8 13.7778 8.29848 13.7778 8.66667C13.7778 9.03486 14.0763 9.33333 14.4445 9.33333Z",fill:"#5C913B"}),s.createElement("path",{d:"M10.4445 14.6668C10.8127 14.6668 11.1112 14.3684 11.1112 14.0002C11.1112 13.632 10.8127 13.3335 10.4445 13.3335C10.0763 13.3335 9.77783 13.632 9.77783 14.0002C9.77783 14.3684 10.0763 14.6668 10.4445 14.6668Z",fill:"#5C913B"}),s.createElement("path",{d:"M12.4446 2.66645C12.9355 2.66645 13.3334 2.26848 13.3334 1.77756C13.3334 1.28664 12.9355 0.888672 12.4446 0.888672C11.9536 0.888672 11.5557 1.28664 11.5557 1.77756C11.5557 2.26848 11.9536 2.66645 12.4446 2.66645Z",fill:"#FFCC4D"}),s.createElement("path",{d:"M14.4445 4.44466C14.8127 4.44466 15.1112 4.14618 15.1112 3.77799C15.1112 3.4098 14.8127 3.11133 14.4445 3.11133C14.0763 3.11133 13.7778 3.4098 13.7778 3.77799C13.7778 4.14618 14.0763 4.44466 14.4445 4.44466Z",fill:"#FFCC4D"}),s.createElement("path",{d:"M13.111 6.22201C13.4792 6.22201 13.7777 5.92353 13.7777 5.55534C13.7777 5.18715 13.4792 4.88867 13.111 4.88867C12.7428 4.88867 12.4443 5.18715 12.4443 5.55534C12.4443 5.92353 12.7428 6.22201 13.111 6.22201Z",fill:"#FFCC4D"}),s.createElement("path",{d:"M3.33341 11.1112C3.7016 11.1112 4.00008 10.8127 4.00008 10.4445C4.00008 10.0763 3.7016 9.77783 3.33341 9.77783C2.96522 9.77783 2.66675 10.0763 2.66675 10.4445C2.66675 10.8127 2.96522 11.1112 3.33341 11.1112Z",fill:"#FFCC4D"}))),Tt||(Tt=s.createElement("defs",null,s.createElement("clipPath",{id:"clip0_7924_2577"},s.createElement("rect",{width:16,height:16,fill:"white"})))))},At=(0,s.forwardRef)(Bt);var zt,Yt,qt,Jt;function Wt(){return Wt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Wt.apply(this,arguments)}const Kt=(e,t)=>{let{title:n,titleId:l,...a}=e;return s.createElement("svg",Wt({width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":l},a),n?s.createElement("title",{id:l},n):null,zt||(zt=s.createElement("path",{d:"M16 8C16 12.4182 12.4182 16 8 16C3.58222 16 0 12.4182 0 8C0 3.58222 3.58222 0 8 0C12.4182 0 16 3.58222 16 8Z",fill:"#FFCC4D"})),Yt||(Yt=s.createElement("path",{d:"M5.11111 8.88894C5.72476 8.88894 6.22222 8.1925 6.22222 7.33339C6.22222 6.47428 5.72476 5.77783 5.11111 5.77783C4.49746 5.77783 4 6.47428 4 7.33339C4 8.1925 4.49746 8.88894 5.11111 8.88894Z",fill:"#664500"})),qt||(qt=s.createElement("path",{d:"M10.8889 8.88894C11.5026 8.88894 12.0001 8.1925 12.0001 7.33339C12.0001 6.47428 11.5026 5.77783 10.8889 5.77783C10.2753 5.77783 9.77783 6.47428 9.77783 7.33339C9.77783 8.1925 10.2753 8.88894 10.8889 8.88894Z",fill:"#664500"})),Jt||(Jt=s.createElement("path",{d:"M5.33325 12.4443C6.22214 10.2221 11.111 10.2221 11.111 11.111C11.111 11.5554 7.55547 10.6666 5.33325 12.4443Z",fill:"#664500"})))},Xt=(0,s.forwardRef)(Kt);var Qt;function en(){return en=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},en.apply(this,arguments)}const tn=(e,t)=>{let{title:n,titleId:l,...a}=e;return s.createElement("svg",en({width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":l},a),n?s.createElement("title",{id:l},n):null,Qt||(Qt=s.createElement("path",{d:"M15.9488 5.25931C15.9488 2.83709 13.9852 0.873535 11.5635 0.873535C10.0932 0.873535 8.79591 1.59931 7.99991 2.70865C7.20391 1.59931 5.90658 0.873535 4.4368 0.873535C2.01458 0.873535 0.0510254 2.83665 0.0510254 5.25931C0.0510254 5.60242 0.0945809 5.93487 0.169248 6.25531C0.778136 10.0389 4.9848 14.0304 7.99991 15.1264C11.0146 14.0304 15.2217 10.0389 15.8297 6.25576C15.9052 5.93531 15.9488 5.60287 15.9488 5.25931Z",fill:"#DD2E44"})))},nn=(0,s.forwardRef)(tn);var sn,ln,an,rn,cn,dn;function on(){return on=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},on.apply(this,arguments)}const un=(e,t)=>{let{title:n,titleId:l,...a}=e;return s.createElement("svg",on({width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":l},a),n?s.createElement("title",{id:l},n):null,sn||(sn=s.createElement("path",{d:"M0.444336 7.55545L3.99989 4.44434L11.111 4.88878L11.5554 11.9999L8.44434 15.5554C8.44434 15.5554 8.44478 12.8892 5.77767 10.2221C3.11056 7.555 0.444336 7.55545 0.444336 7.55545Z",fill:"#A0041E"})),ln||(ln=s.createElement("path",{d:"M0.432382 15.5555C0.432382 15.5555 0.416382 12.0093 1.75905 10.6666C3.10171 9.32395 6.6666 9.41639 6.6666 9.41639C6.6666 9.41639 6.66616 12.8888 5.33283 14.2222C3.99949 15.5555 0.432382 15.5555 0.432382 15.5555Z",fill:"#FFAC33"})),an||(an=s.createElement("path",{d:"M3.99946 13.7777C4.9813 13.7777 5.77724 12.9818 5.77724 11.9999C5.77724 11.0181 4.9813 10.2222 3.99946 10.2222C3.01762 10.2222 2.22168 11.0181 2.22168 11.9999C2.22168 12.9818 3.01762 13.7777 3.99946 13.7777Z",fill:"#FFCC4D"})),rn||(rn=s.createElement("path",{d:"M15.9995 0C15.9995 0 11.5551 0 6.22175 4.44444C3.55509 6.66667 3.55509 10.6667 4.44398 11.5556C5.33287 12.4444 9.33287 12.4444 11.5551 9.77778C15.9995 4.44444 15.9995 0 15.9995 0Z",fill:"#55ACEE"})),cn||(cn=s.createElement("path",{d:"M11.9996 2.22217C11.2782 2.22217 10.6605 2.65372 10.3813 3.27106C10.6045 3.17017 10.8502 3.11106 11.1107 3.11106C12.0925 3.11106 12.8885 3.90706 12.8885 4.88883C12.8885 5.14928 12.8293 5.39506 12.7289 5.61772C13.3462 5.33906 13.7773 4.72128 13.7773 3.99995C13.7773 3.01817 12.9813 2.22217 11.9996 2.22217Z",fill:"black"})),dn||(dn=s.createElement("path",{d:"M3.55566 12.4444C3.55566 12.4444 3.55566 10.6666 4.00011 10.2222C4.44455 9.77772 9.77833 5.33372 10.2223 5.77772C10.6663 6.22172 6.22189 11.5555 5.77744 11.9999C5.333 12.4444 3.55566 12.4444 3.55566 12.4444Z",fill:"#A0041E"})))},mn=(0,s.forwardRef)(un);var hn,pn,xn,gn,fn,vn,Cn,jn,bn,wn;function yn(){return yn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},yn.apply(this,arguments)}const Nn=(e,t)=>{let{title:n,titleId:l,...a}=e;return s.createElement("svg",yn({width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":l},a),n?s.createElement("title",{id:l},n):null,hn||(hn=s.createElement("path",{d:"M3.92358 13.9025C5.87573 13.9025 7.45825 11.2598 7.45825 7.99984C7.45825 4.73988 5.87573 2.09717 3.92358 2.09717C1.97144 2.09717 0.388916 4.73988 0.388916 7.99984C0.388916 11.2598 1.97144 13.9025 3.92358 13.9025Z",fill:"#F5F8FA"})),pn||(pn=s.createElement("path",{d:"M3.92366 14.2362C1.75478 14.2362 0.0556641 11.497 0.0556641 8.00016C0.0556641 4.50327 1.75478 1.76416 3.92366 1.76416C6.09255 1.76416 7.79166 4.50327 7.79166 8.00016C7.79166 11.497 6.09255 14.2362 3.92366 14.2362ZM3.92366 2.43083C2.15833 2.43083 0.722331 4.92905 0.722331 8.00016C0.722331 11.0713 2.15833 13.5695 3.92366 13.5695C5.689 13.5695 7.125 11.0713 7.125 8.00016C7.125 4.92905 5.689 2.43083 3.92366 2.43083Z",fill:"#E1E8ED"})),xn||(xn=s.createElement("path",{d:"M2.93076 10.2043C4.14824 10.2043 5.13521 9.21734 5.13521 7.99985C5.13521 6.78237 4.14824 5.79541 2.93076 5.79541C1.71328 5.79541 0.726318 6.78237 0.726318 7.99985C0.726318 9.21734 1.71328 10.2043 2.93076 10.2043Z",fill:"#8899A6"})),gn||(gn=s.createElement("path",{d:"M2.93064 9.58442C3.8057 9.58442 4.51508 8.87504 4.51508 7.99997C4.51508 7.12491 3.8057 6.41553 2.93064 6.41553C2.05557 6.41553 1.34619 7.12491 1.34619 7.99997C1.34619 8.87504 2.05557 9.58442 2.93064 9.58442Z",fill:"#292F33"})),fn||(fn=s.createElement("path",{d:"M3.5161 7.49754C3.86613 7.49754 4.14988 7.21378 4.14988 6.86376C4.14988 6.51373 3.86613 6.22998 3.5161 6.22998C3.16608 6.22998 2.88232 6.51373 2.88232 6.86376C2.88232 7.21378 3.16608 7.49754 3.5161 7.49754Z",fill:"#F5F8FA"})),vn||(vn=s.createElement("path",{d:"M12.104 13.9025C14.0561 13.9025 15.6387 11.2598 15.6387 7.99984C15.6387 4.73988 14.0561 2.09717 12.104 2.09717C10.1519 2.09717 8.56934 4.73988 8.56934 7.99984C8.56934 11.2598 10.1519 13.9025 12.104 13.9025Z",fill:"#F5F8FA"})),Cn||(Cn=s.createElement("path",{d:"M12.1041 14.2362C9.93519 14.2362 8.23608 11.497 8.23608 8.00016C8.23608 4.50327 9.93519 1.76416 12.1041 1.76416C14.273 1.76416 15.9725 4.50327 15.9725 8.00016C15.9725 11.497 14.273 14.2362 12.1041 14.2362ZM12.1041 2.43083C10.3388 2.43083 8.90275 4.92949 8.90275 8.00016C8.90275 11.0713 10.3388 13.5695 12.1041 13.5695C13.8694 13.5695 15.3059 11.0713 15.3059 8.00016C15.3059 4.92905 13.8694 2.43083 12.1041 2.43083Z",fill:"#E1E8ED"})),jn||(jn=s.createElement("path",{d:"M11.1112 10.2043C12.3287 10.2043 13.3156 9.21734 13.3156 7.99985C13.3156 6.78237 12.3287 5.79541 11.1112 5.79541C9.8937 5.79541 8.90674 6.78237 8.90674 7.99985C8.90674 9.21734 9.8937 10.2043 11.1112 10.2043Z",fill:"#8899A6"})),bn||(bn=s.createElement("path",{d:"M11.1111 9.58442C11.9861 9.58442 12.6955 8.87504 12.6955 7.99997C12.6955 7.12491 11.9861 6.41553 11.1111 6.41553C10.236 6.41553 9.52661 7.12491 9.52661 7.99997C9.52661 8.87504 10.236 9.58442 11.1111 9.58442Z",fill:"#292F33"})),wn||(wn=s.createElement("path",{d:"M11.6965 7.49754C12.0465 7.49754 12.3303 7.21378 12.3303 6.86376C12.3303 6.51373 12.0465 6.22998 11.6965 6.22998C11.3465 6.22998 11.0627 6.51373 11.0627 6.86376C11.0627 7.21378 11.3465 7.49754 11.6965 7.49754Z",fill:"#F5F8FA"})))},Zn=(0,s.forwardRef)(Nn),_n={"\ud83c\udf89":":tada:","\ud83d\udc4d":":+1:","\ud83d\ude41":":slightly_frown_face:","\u2764\ufe0f":":heart:","\ud83d\udc4e":":thumb_down:","\ud83d\ude04":":smile:","\ud83d\udc40":":eyes:","\ud83d\ude80":":rocket:"},kn={"\ud83d\udc4d":(0,p.jsx)(Ht,{className:"emoji w-full h-full min-w-[16px] min-h-[16px]"}),"\ud83d\udc4e":(0,p.jsx)(Rt,{className:"emoji w-full h-full min-w-[16px] min-h-[16px]"}),"\ud83d\ude04":(0,p.jsx)(Je,{className:"emoji w-full h-full min-w-[16px] min-h-[16px]"}),"\ud83d\udc40":(0,p.jsx)(Zn,{className:"emoji w-full h-full min-w-[16px] min-h-[16px]"}),"\ud83d\ude80":(0,p.jsx)(mn,{className:"emoji w-full h-full min-w-[16px] min-h-[16px]"}),"\u2764\ufe0f":(0,p.jsx)(nn,{className:"emoji w-full h-full min-w-[16px] min-h-[16px]"}),"\ud83d\ude41":(0,p.jsx)(Xt,{className:"emoji w-full h-full min-w-[16px] min-h-[16px]"}),"\ud83c\udf89":(0,p.jsx)(At,{className:"emoji w-full h-full min-w-[16px] min-h-[16px]"})},Mn=e=>{var t;let{native:n}=e;return null!==(t=kn[n])&&void 0!==t?t:null},En=e=>{let{mid:t,hidePicker:n}=e;const[s,{isLoading:l}]=(0,C.xX)(),{reactionData:a,currUid:r}=(0,m.CG)((e=>{var n;return{reactionData:e.reactionMessage[t]||{},currUid:null===(n=e.authData.user)||void 0===n?void 0:n.uid}})),i=e=>{s({mid:t,action:e}),n()};return(0,p.jsx)("div",{className:"z-[999]",children:(0,p.jsx)("ul",{className:"p-1 grid grid-cols-[repeat(4,_1fr)] gap-2 bg-white dark:bg-gray-900 drop-shadow-md rounded-xl "+(l?"opacity-60":""),children:K.Ax.map((e=>{let t=a[e]&&a[e].findIndex((e=>e==r))>-1;return(0,p.jsx)("li",{className:"flex-center cursor-pointer rounded-lg p-4 md:hover:bg-gray-50 w-4 h-4 "+(t?"bg-gray-50":""),onClick:i.bind(null,e),children:(0,p.jsx)(Mn,{native:e})},e)}))})})};var On,Dn;function Ln(){return Ln=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Ln.apply(this,arguments)}const In=(e,t)=>{let{title:n,titleId:l,...a}=e;return s.createElement("svg",Ln({width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":l},a),n?s.createElement("title",{id:l},n):null,On||(On=s.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.16739 1.33531C8.11172 1.33395 8.05592 1.33325 7.99992 1.33325C4.31792 1.33325 1.33325 4.31792 1.33325 7.99992C1.33325 11.6813 4.31792 14.6666 7.99992 14.6666C11.6819 14.6666 14.6666 11.6813 14.6666 7.99992C14.6666 7.94392 14.6659 7.88812 14.6645 7.83245C14.239 7.94179 13.7929 7.99992 13.3333 7.99992C10.3877 7.99992 7.99992 5.61211 7.99992 2.66659C7.99992 2.20693 8.05805 1.76085 8.16739 1.33531ZM6.66659 5.33325C6.66659 4.59725 6.06925 3.99992 5.33325 3.99992C4.59725 3.99992 3.99992 4.59725 3.99992 5.33325C3.99992 6.06992 4.59725 6.66659 5.33325 6.66659C6.06925 6.66659 6.66659 6.06992 6.66659 5.33325ZM7.99992 12.6666C10.0933 12.6666 11.9999 11.0779 11.9999 9.33325V8.66659H3.99992V9.33325C3.99992 11.0779 5.90659 12.6666 7.99992 12.6666Z",fill:"#78787C"})),Dn||(Dn=s.createElement("path",{d:"M14.0001 2V0H12.6667V2H10.6667V3.33333H12.6667V5.33333H14.0001V3.33333H16.0001V2H14.0001Z",fill:"#78787C"})))},$n=(0,s.forwardRef)(In),Hn=e=>{let{uids:t=[],emoji:n,index:s}=e;const l=(0,m.CG)((e=>e.users.byId)),a=t.map((e=>{var t;return null===(t=l[e])||void 0===t?void 0:t.name})),r=a.length>3?`${a.join(", ")} and ${a.length-3} others reacted with`:`${a.join(", ")} reacted with`;return(0,p.jsxs)("div",{className:"relative bg-white rounded-lg shadow flex items-start gap-2 p-2 "+(0==s?"first":""),children:[(0,p.jsx)("div",{className:"w-8 h-8",children:(0,p.jsx)(Mn,{native:n})}),(0,p.jsxs)("div",{className:"flex flex-col w-[140px] text-xs text-gray-800",children:[(0,p.jsx)("span",{children:r}),(0,p.jsx)("span",{children:_n[n]})]})]})},Fn=e=>{let{mid:t,reactions:n=null,readOnly:s=!1}=e;const[l]=(0,C.xX)(),{currUid:a}=(0,m.CG)((e=>{var t;return{currUid:null===(t=e.authData.user)||void 0===t?void 0:t.uid}})),r=e=>{l({mid:t,action:e})};return n&&0!=Object.entries(n).length?(0,p.jsxs)("span",{className:"group relative mt-2 mb-1 flex items-center gap-1 w-fit",children:[Object.entries(n).map(((e,t)=>{let[n,l]=e;const i=l.findIndex((e=>e==a))>-1;return l.length>0?(0,p.jsxs)("span",{onClick:s?void 0:r.bind(null,n),className:"cursor-pointer rounded-md relative flex items-center gap-1 p-1 md:hover:bg-cyan-100 "+(i?"shadow-[inset_0_0_0_1px_#06aed4] bg-cyan-200":""),children:[(0,p.jsx)(c.ZP,{disabled:s,offset:[0,20],interactive:!0,placement:"top",content:(0,p.jsx)(Hn,{uids:l,emoji:n,index:t}),children:(0,p.jsx)("i",{className:"emoji",children:(0,p.jsx)(Mn,{native:n})})}),l.length>1?(0,p.jsxs)("em",{className:"text-primary-600 text-xs",children:[`${l.length}`," "]}):null]},n):null})),!s&&(0,p.jsx)(o.Z,{placement:"top",tip:"Add Reaction",children:(0,p.jsx)(c.ZP,{interactive:!0,placement:"right-start",trigger:"click",content:(0,p.jsx)(En,{mid:t,hidePicker:Lt.Bn}),children:(0,p.jsx)("button",{className:"invisible group-hover:visible w-6 h-6 bg-cyan-100 md:hover:bg-cyan-200 rounded-md flex-center",children:(0,p.jsx)($n,{className:"w-4 h-4"})})})})]}):null};var Sn=n(78468),Vn=n(79198);const Pn=n.p+"static/media/reply.c7c79a9d5cee92f51ec5.svg",Rn=n.p+"static/media/reaction.dfc99cbb32dd13e55782.svg",Un=n.p+"static/media/edit.18de09b48249f213cf85.svg";var Tn;function Gn(){return Gn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Gn.apply(this,arguments)}const Bn=(e,t)=>{let{title:n,titleId:l,...a}=e;return s.createElement("svg",Gn({width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":l},a),n?s.createElement("title",{id:l},n):null,Tn||(Tn=s.createElement("path",{d:"M21 7.5C21 9.98528 18.9853 12 16.5 12C14.0147 12 12 9.98528 12 7.5C12 5.01472 14.0147 3 16.5 3C18.9853 3 21 5.01472 21 7.5ZM17 5.5C17 5.22386 16.7761 5 16.5 5C16.2239 5 16 5.22386 16 5.5V7H14.5C14.2239 7 14 7.22386 14 7.5C14 7.77614 14.2239 8 14.5 8H16V9.5C16 9.77614 16.2239 10 16.5 10C16.7761 10 17 9.77614 17 9.5V8H18.5C18.7761 8 19 7.77614 19 7.5C19 7.22386 18.7761 7 18.5 7H17V5.5ZM16.5 13C17.02 13 17.5232 12.9278 18 12.793V19.5C18 19.6881 17.8945 19.8602 17.7269 19.9456C17.5593 20.0309 17.358 20.015 17.2059 19.9044L12 16.1183L6.79409 19.9044C6.64199 20.015 6.4407 20.0309 6.27311 19.9456C6.10553 19.8602 6 19.6881 6 19.5V6.5C6 5.11929 7.11929 4 8.5 4H12.2572C11.4718 4.95094 11 6.17037 11 7.5C11 10.5376 13.4624 13 16.5 13Z",fill:"#667085"})))},An=(0,s.forwardRef)(Bn);var zn;function Yn(){return Yn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Yn.apply(this,arguments)}const qn=(e,t)=>{let{title:n,titleId:l,...a}=e;return s.createElement("svg",Yn({width:24,height:24,viewBox:"0 0 24 24",fill:"#70707B",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":l},a),n?s.createElement("title",{id:l},n):null,zn||(zn=s.createElement("path",{d:"M21.0682 7.75765L16.2425 2.93189C14.9152 1.60462 12.6777 1.96772 11.8382 3.6466L9.40281 8.51748C9.31512 8.69287 9.16223 8.82694 8.97688 8.89096L4.81061 10.3302C3.93791 10.6317 3.682 11.7427 4.33487 12.3956L7.43936 15.5001L3.00008 19.9394L3 21.0001H4.06074L8.50002 16.5607L11.6045 19.6653C12.2574 20.3181 13.3684 20.0622 13.6699 19.1895L15.1092 15.0232C15.1732 14.8379 15.3073 14.685 15.4826 14.5973L20.3535 12.1619C22.0324 11.3224 22.3955 9.08491 21.0682 7.75765Z"})))},Jn=(0,s.forwardRef)(qn);var Wn;function Kn(){return Kn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Kn.apply(this,arguments)}const Xn=(e,t)=>{let{title:n,titleId:l,...a}=e;return s.createElement("svg",Kn({width:20,height:20,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":l},a),n?s.createElement("title",{id:l},n):null,Wn||(Wn=s.createElement("path",{d:"M10 2C14.4183 2 18 5.58172 18 10C18 14.4183 14.4183 18 10 18C5.58172 18 2 14.4183 2 10C2 5.58172 5.58172 2 10 2ZM13.3584 7.64645C13.1849 7.47288 12.9154 7.4536 12.7206 7.58859L12.6513 7.64645L9 11.298L7.35355 9.65131L7.28431 9.59346C7.08944 9.45846 6.82001 9.47775 6.64645 9.65131C6.47288 9.82488 6.4536 10.0943 6.58859 10.2892L6.64645 10.3584L8.64645 12.3584L8.71569 12.4163C8.8862 12.5344 9.1138 12.5344 9.28431 12.4163L9.35355 12.3584L13.3584 8.35355L13.4163 8.28431C13.5513 8.08944 13.532 7.82001 13.3584 7.64645Z",fill:"#475467"})))},Qn=(0,s.forwardRef)(Xn);var es=n(80169);const ts=e=>{let{closeModal:t,mid:n=0,gid:l=0}=e;const{t:a}=(0,h.$G)(),{channel:r,pinMessage:i,isPining:c,isSuccess:d}=j(l);return(0,s.useEffect)((()=>{d&&(t(),at.ZP.success(a("tip.pin")))}),[d]),n?(0,p.jsx)(ue.Z,{children:(0,p.jsx)(vt.Z,{className:"min-w-[320px] md:min-w-[406px]",buttons:(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(ae.Z,{onClick:t,className:"cancel",children:a("action.cancel")}),(0,p.jsx)(ae.Z,{disabled:c,onClick:()=>{i(n)},className:"main",children:c?"Pining":a("action.pin")})]}),title:a("action.pin"),description:`Do you want to pin this message to #${null===r||void 0===r?void 0:r.name}`,children:(0,p.jsx)(Ct,{mid:n,context:"pin"})})}):null};var ns=n(26209);function ss(e){let{mid:t,context:n,contextId:l}=e;const{copy:a}=(0,ns.Z)(),{content_type:r,properties:i,currUid:c,from_uid:d,content:o}=(0,m.CG)((e=>{var n,s,l,a,r;return{content:null===(n=e.message[t])||void 0===n?void 0:n.content,from_uid:null===(s=e.message[t])||void 0===s?void 0:s.from_uid,content_type:null===(l=e.message[t])||void 0===l?void 0:l.content_type,properties:null===(a=e.message[t])||void 0===a?void 0:a.properties,currUid:null===(r=e.authData.user)||void 0===r?void 0:r.uid}})),{canPin:u,pins:h,unpinMessage:x,isUnpinSuccess:g}=j("channel"==n?l:0),[f,v]=(0,s.useState)([]),[C,b]=(0,s.useState)(!1),[w,y]=(0,s.useState)(!1),[N,Z]=(0,s.useState)(!1),_=()=>{Z((e=>!e))},k=()=>{y((e=>!e))},M=()=>{b((e=>!e))},E=function(){a(o,arguments.length>0&&void 0!==arguments[0]&&arguments[0])};(0,s.useEffect)((()=>{if(N&&r==K.bT.archive){const n=document.querySelector(`[data-msg-mid='${t}'] .down [data-forwarded-mids]`);if(n){var e;const t=(null===(e=n.dataset.forwardedMids)||void 0===e?void 0:e.split(",").map((e=>+e)))||[];v(t)}}else v([t])}),[t,N,r]),(0,s.useEffect)((()=>{g&&at.ZP.success("Unpin Message Successfully!")}),[g]);const O="channel"==n&&u,D=r==K.bT.file&&!(null===i||void 0===i||!i.content_type)&&(null===i||void 0===i?void 0:i.content_type.startsWith("image")),L=c==d&&[K.bT.text,K.bT.markdown].includes(r),I=c==d,$=[K.bT.text,K.bT.markdown].includes(r)||D;return{copyContent:E.bind(null,!!D),canCopy:$,isImage:D,isMarkdown:r==K.bT.markdown,canDelete:I,canPin:"channel"==n&&u,pinned:!!O&&h.findIndex((e=>e.mid==t))>-1,unPin:x,canReply:!0,canEdit:L,toggleDeleteModal:k,toggleForwardModal:_,togglePinModal:M,DeleteModal:w?(0,p.jsx)(jt,{closeModal:k,mids:t}):null,ForwardModal:N?(0,p.jsx)(ft,{mids:f,closeModal:_}):null,PinModal:C?(0,p.jsx)(ts,{mid:t,gid:l,closeModal:M}):null}}const ls=e=>{let{context:t="user",contextId:n=0,mid:l=0,toggleEditMessage:r}=e;const{t:i}=(0,h.$G)(),{canDelete:d,canReply:u,canEdit:m,canPin:x,unPin:g,pinned:f,toggleDeleteModal:C,toggleForwardModal:j,togglePinModal:b,PinModal:w,DeleteModal:y,ForwardModal:N}=ss({mid:l,context:t,contextId:n}),{setReplying:Z}=(0,Y.Z)({context:t,to:n}),{addFavorite:_,isFavorited:k}=(0,I.Z)({cid:"channel"==t?n:null}),M=(0,v.I0)(),[E,O]=(0,s.useState)(!1),D=(0,s.useRef)(null),L=function(){O(!(arguments.length>0&&void 0!==arguments[0])||arguments[0])},$="flex cursor-pointer p-1 md:hover:bg-gray-100 md:dark:hover:bg-gray-800";return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)("ul",{ref:D,className:(0,a.Z)("bg-white dark:bg-gray-900 rounded-md z-[999] absolute right-2.5 top-0 -translate-y-1/2 flex items-center border border-solid border-black/10 invisible group-hover:visible",E&&"!visible"),children:[(0,p.jsx)(c.ZP,{onShow:L.bind(null,!0),onHide:L.bind(null,!1),interactive:!0,placement:"left-start",trigger:"click",content:(0,p.jsx)(En,{mid:l,hidePicker:Lt.Bn}),children:(0,p.jsx)("li",{className:$,children:(0,p.jsx)(o.Z,{placement:"top",tip:i("action.add_reaction"),children:(0,p.jsx)("img",{src:Rn,className:"toggler w-6 h-6",alt:"icon emoji"})})})}),m&&(0,p.jsx)("li",{className:$,onClick:r,children:(0,p.jsx)(o.Z,{placement:"top",tip:i("action.edit"),children:(0,p.jsx)("img",{src:Un,className:"w-6 h-6",alt:"icon edit"})})}),u&&(0,p.jsx)("li",{className:$,onClick:()=>{n&&Z(l),(0,Lt.Bn)()},children:(0,p.jsx)(o.Z,{placement:"top",tip:i("action.reply"),children:(0,p.jsx)("img",{src:Pn,className:"w-6 h-6",alt:"icon reply"})})}),(0,p.jsx)("li",{className:$,onClick:async()=>{(0,Lt.Bn)();if(k(l))return void at.ZP.success("Favorited!");await _(l)?at.ZP.success("Added Favorites!"):at.ZP.error("Added Favorites Failed!")},children:(0,p.jsx)(o.Z,{placement:"top",tip:i("action.add_to_fav"),children:(0,p.jsx)(An,{className:"fill-slate-500 w-6 h-6"})})}),(0,p.jsx)(c.ZP,{onShow:L.bind(null,!0),onHide:L.bind(null,!1),interactive:!0,placement:"left-start",trigger:"click",content:(0,p.jsx)(Vn.Z,{items:[x&&{title:i(f?"action.unpin":"action.pin"),icon:(0,p.jsx)(Jn,{className:"icon"}),handler:f?()=>{(0,Lt.Bn)(),g(l)}:b},{title:i("action.forward"),icon:(0,p.jsx)(it.Z,{className:"icon"}),handler:j},{title:i("action.select"),icon:(0,p.jsx)(Qn,{className:"icon"}),handler:(e=>{M((0,H.Gy)({context:t,id:n,data:e})),(0,Lt.Bn)()}).bind(null,l)},d&&{title:i("action.remove"),danger:!0,icon:(0,p.jsx)(xe.Z,{className:"icon"}),handler:C}].filter(Boolean)}),children:(0,p.jsx)("li",{className:"flex cursor-pointer p-1 md:hover:bg-gray-100 md:dark:hover:bg-gray-800",children:(0,p.jsx)(o.Z,{placement:"top",tip:i("more"),children:(0,p.jsx)("img",{src:es,alt:"icon more"})})})})]}),w,N,y]})};var as=n(55283);const rs=e=>{let{mid:t,cancelEdit:n}=e;const l=(0,s.useRef)(null),a=(0,m.CG)((e=>e.message[t])),[r,i]=(0,s.useState)(!1),[c,d]=(0,s.useState)(!1),[o,u]=(0,s.useState)(null===a||void 0===a?void 0:a.content),[h,{isLoading:x,isSuccess:g}]=(0,C.wm)();(0,s.useEffect)((()=>{g&&n()}),[g]),(0,X.z)("Shift",(e=>{i("keydown"==e.type)}),{eventTypes:["keydown","keyup"],target:l}),(0,X.z)("Escape",(()=>{n()}),{eventTypes:["keydown","keyup"],target:l});const f=()=>{h({mid:t,content:o,type:a.content_type==K.bT.markdown?"markdown":"text"})};return a?(0,p.jsxs)("div",{className:"w-full",children:[(0,p.jsx)("div",{className:"bg-gray-200 rounded-lg p-4",children:(0,p.jsx)(as.Z,{autoFocus:!0,onFocus:e=>e.currentTarget.setSelectionRange(e.currentTarget.value.length,e.currentTarget.value.length),ref:l,className:"content w-full resize-none bg-transparent text-gray-800 text-sm break-all",maxRows:8,minRows:1,onKeyDown:e=>{d("Enter"===e.key)},onChange:e=>{c&&!r?f():u(e.target.value)},value:o,placeholder:"Edit Message"})}),(0,p.jsxs)("div",{className:"flex items-center p-1 gap-4 text-xs",children:[(0,p.jsxs)("span",{children:["esc to ",(0,p.jsx)("button",{className:"text-primary-500 cursor-pointer px-1",onClick:n,children:"cancel"})]}),(0,p.jsxs)("span",{children:["enter to ",(0,p.jsx)("button",{className:"text-primary-500 cursor-pointer px-1",onClick:f,children:x?"saving":"save"})]})]})]}):null};var is;function cs(){return cs=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},cs.apply(this,arguments)}const ds=(e,t)=>{let{title:n,titleId:l,...a}=e;return s.createElement("svg",cs({width:24,height:24,viewBox:"0 0 24 24",fill:"#667085",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":l},a),n?s.createElement("title",{id:l},n):null,is||(is=s.createElement("path",{d:"M9.7042 16.2945C10.0945 16.6853 10.094 17.3184 9.70324 17.7087C9.31245 18.0989 8.67928 18.0985 8.28902 17.7077L3.29241 12.7043C2.90237 12.3137 2.90255 11.681 3.29282 11.2906L8.28943 6.29297C8.67992 5.9024 9.31308 5.90234 9.70365 6.29282C10.0942 6.6833 10.0943 7.31647 9.70379 7.70703L6.411 11H13C17.3349 11 20.8645 14.4478 20.9962 18.7508L21 19C21 19.5523 20.5523 20 20 20C19.4477 20 19 19.5523 19 19C19 15.7616 16.4344 13.1224 13.2249 13.0041L13 13H6.414L9.7042 16.2945Z"})))},os=(0,s.forwardRef)(ds);var us=n(75208);const ms=e=>{let{context:t,contextId:n,mid:s,visible:l,hide:a,editMessage:r,children:i}=e;const{t:d}=(0,h.$G)(),{copyContent:o,canEdit:u,canPin:m,canDelete:x,canCopy:g,canReply:f,pinned:C,unPin:j,toggleDeleteModal:b,toggleForwardModal:w,togglePinModal:y,PinModal:N,ForwardModal:Z,DeleteModal:_}=ss({mid:s,contextId:n,context:t}),k=(0,v.I0)(),{setReplying:M}=(0,Y.Z)({context:t,to:n}),E=[u&&{title:d("action.edit_msg"),icon:(0,p.jsx)(pe.Z,{className:"icon"}),handler:r},f&&{title:d("action.reply"),icon:(0,p.jsx)(os,{className:"icon"}),handler:()=>{n&&M(s)}},g&&{title:d("action.copy"),icon:(0,p.jsx)(us.Z,{className:"icon"}),handler:o},m&&{title:d(C?"action.unpin":"action.pin"),icon:(0,p.jsx)(Jn,{className:"icon"}),handler:C?j.bind(null,s):y},{title:d("action.forward"),icon:(0,p.jsx)(it.Z,{className:"icon"}),handler:w},{title:d("action.select"),icon:(0,p.jsx)(Qn,{className:"icon"}),handler:()=>{k((0,H.Gy)({context:t,id:n,data:s}))}},x&&{title:d("action.remove"),danger:!0,icon:(0,p.jsx)(xe.Z,{className:"icon"}),handler:b}].filter((e=>"boolean"!==typeof e&&"title"in e));return(0,p.jsxs)(p.Fragment,{children:[Z,N,_,(0,p.jsx)(c.ZP,{visible:l,followCursor:"initial",interactive:!0,placement:"right-start",popperOptions:{strategy:"fixed"},onClickOutside:a,content:(0,p.jsx)(Vn.Z,{hideMenu:a,items:E}),children:i},s)]})};var hs,ps=n(47438);function xs(){return xs=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},xs.apply(this,arguments)}const gs=(e,t)=>{let{title:n,titleId:l,...a}=e;return s.createElement("svg",xs({width:24,height:24,viewBox:"0 0 24 24",stroke:"#101828",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":l},a),n?s.createElement("title",{id:l},n):null,hs||(hs=s.createElement("path",{d:"M12 6V12L16 14M22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12Z",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})))},fs=(0,s.forwardRef)(gs),vs=e=>{let{mid:t,createAt:n,expiresIn:l,context:a,contextId:r}=e;const[i,c]=(0,s.useState)(),d=(0,v.I0)(),o=(0,s.useCallback)((()=>{d("user"==a?(0,W.Fs)({mid:t,id:r}):(0,J.nF)({mid:t,id:r})),d((0,q.Gd)(t))}),[a,r,t]);if((0,s.useEffect)((()=>{if(l>0&&n>0){const e=n+1e3*l;_()().isAfter(new Date(e))?o():c(Math.floor((e-(new Date).getTime())/1e3))}}),[l,n]),(0,s.useEffect)((()=>{let e=0;return"undefined"!==typeof i&&(i>0?e=window.setTimeout((()=>{c((e=>(null!==e&&void 0!==e?e:0)-1))}),1e3):o()),()=>{"undefined"!==typeof i&&clearTimeout(e)}}),[i,t]),!i)return null;const u=_().duration(1e3*i),m=`${0!==u.days()?`${u.days()} day`:""} ${0!==u.hours()?`${u.hours().toString().padStart(2,"0")}:`:""}${0!==u.minutes()?`${u.minutes().toString().padStart(2,"0")}:`:""}${u.seconds().toString().padStart(2,"0")}`;return(0,p.jsxs)("div",{className:"absolute bottom-1 right-2 text-xs text-gray-400 flex items-center gap-1 font-mono",children:[(0,p.jsx)(fs,{className:"w-4 h-4 stroke-slate-400"}),m]})},Cs=e=>{var t,n;let{readOnly:l=!1,contextId:r,mid:i,context:d="user",updateReadIndex:u,read:h=!0}=e;const{visible:x,handleContextMenuEvent:g,hideContextMenu:f}=(0,ps.Z)(),v=function(){const e=(0,s.useRef)(null),t=new IntersectionObserver((e=>{e.forEach((e=>{const t=e.isIntersecting,n=e.target;t?n.classList.add("in_view"):n.classList.remove("in_view")}))}),{threshold:0});return(0,s.useEffect)((()=>{const n=e.current;return n&&t.observe(e.current),()=>{n&&t.unobserve(n)}}),[e]),e}(),[C,b]=(0,s.useState)(!1),w=(0,s.useRef)(null),{getPinInfo:y}=j("channel"==d?r:0),{message:N,reactionMessageData:Z,usersData:E}=(0,m.CG)((e=>({reactionMessageData:e.reactionMessage,message:e.message[i],usersData:e.users.byId}))),O=()=>{b((e=>!e))};(0,s.useEffect)((()=>{if(!h){u&&u("user"==d?{users:[{uid:+r,mid:i}]}:{groups:[{gid:+r,mid:i}]})}}),[i,h]);const{reply_mid:D,from_uid:L,created_at:I,sending:$=!1,content:H,thumbnail:F,download:S,content_type:V="text/plain",edited:P,properties:R,expires_in:U=0}=N,T=Z[i],G=E[L||0];let B=null;const A=_()(I);B=A.isToday()?"Today":A.isYesterday()?"Yesterday":null;const z=y(i),Y=(null===R||void 0===R?void 0:R.local_id)||i,q=(null!==U&&void 0!==U?U:0)>0;return(0,p.jsxs)("div",{onContextMenu:l?void 0:g,"data-msg-mid":i,ref:v,className:(0,a.Z)("group w-full relative flex items-start gap-2 md:gap-4 px-1 md:px-2 py-1 my-2 rounded-lg md:dark:hover:bg-gray-800 md:hover:bg-gray-100",l&&"hover:bg-transparent",q&&"bg-red-200",z&&"bg-cyan-50 dark:bg-cyan-800 pt-7"),children:[(0,p.jsx)(c.ZP,{popperOptions:{strategy:"fixed"},disabled:l,interactive:!0,placement:"right",trigger:"click",content:(0,p.jsx)(Sn.Z,{uid:L||0,type:"card",cid:"user"==d?0:r}),children:(0,p.jsx)("div",{className:"cursor-pointer w-10 h-10 shrink-0","data-uid":L,ref:w,children:(0,p.jsx)(M.Z,{className:"w-10 h-10 rounded-full object-cover",width:40,height:40,src:null===G||void 0===G?void 0:G.avatar,name:null===G||void 0===G?void 0:G.name})})},Y),(0,p.jsx)(ms,{editMessage:O,context:d,contextId:r,mid:i,visible:x,hide:f,children:(0,p.jsxs)("div",{className:(0,a.Z)("w-full flex flex-col gap-2",z&&"relative"),"data-pin-tip":`pinned by ${null!==z&&void 0!==z&&z.created_by?null===(t=E[z.created_by])||void 0===t?void 0:t.name:""}`,children:[z&&(0,p.jsx)("span",{className:"absolute left-0 -top-1 -translate-y-full text-xs text-gray-400",children:`pinned by ${z.created_by?null===(n=E[z.created_by])||void 0===n?void 0:n.name:""}`}),(0,p.jsxs)("div",{className:"flex items-center gap-2 font-semibold",children:[(0,p.jsx)("span",{className:"text-primary-500 text-sm",children:(null===G||void 0===G?void 0:G.name)||"Deleted User"}),(0,p.jsx)(o.Z,{delay:200,disabled:!B||l,placement:"top",tip:A.format("YYYY-MM-DD h:mm:ss A"),children:(0,p.jsx)("time",{className:"text-gray-400 text-xs",children:B?`${B} ${A.format("h:mm A")}`:A.format("YYYY-MM-DD h:mm:ss A")})})]}),(0,p.jsxs)("div",{className:"select-text text-gray-800 text-sm break-all whitespace-pre-wrap dark:!text-white "+($?"opacity-90":""),children:[D&&(0,p.jsx)(ht,{mid:D},D),C?(0,p.jsx)(rs,{mid:i,cancelEdit:O}):(0,k.Z)({context:d,to:r,from_uid:L,created_at:I,content_type:V,properties:R,content:H,thumbnail:F,download:S,edited:P}),T&&(0,p.jsx)(Fn,{mid:i,reactions:T,readOnly:l})]})]})}),q&&(0,p.jsx)(vs,{mid:N.mid,context:d,contextId:r,expiresIn:null!==U&&void 0!==U?U:0,createAt:null!==I&&void 0!==I?I:0}),!C&&!l&&(0,p.jsx)(ls,{context:d,contextId:r,mid:i,toggleEditMessage:O})]},Y)},js=s.memo(Cs,((e,t)=>e.mid==t.mid));const bs=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(!e)return null;const{content_type:t,content:n,properties:s={}}=e;let l=null;switch(t){case K.bT.text:l=(0,p.jsx)(je.Z,{text:n,url:!1,mentionTextOnly:!0});break;case K.bT.markdown:l="[markdown]";break;case K.bT.file:{const e=null!==s&&void 0!==s?s:{};l=(0,E.Or)(e.content_type,e.size)?"[image]":"[file]"}}return l},ws=e=>{let{selectMode:t=!1,context:n,id:s,mid:l,children:a,...r}=e;const i=(0,v.I0)(),c=(0,m.CG)((e=>e.ui.selectMessages[`${n}_${s}`])),d=!(!c||!c.find((e=>e==l)));return(0,p.jsxs)("div",{className:"flex items-start gap-2 relative w-full "+(t?"hover:bg-slate-100":""),...r,children:[t&&(0,p.jsx)(gt.Z,{className:"!mt-4 !ml-2",checked:d}),a,t&&(0,p.jsx)("div",{className:"absolute left-0 top-0 w-full h-full cursor-pointer",onClick:t?()=>{const e=d?"remove":"add";i((0,H.Gy)({context:n,id:s,operation:e,data:l}))}:void 0})]})},ys=e=>{var t;let{readonly:n=!1,selectMode:l=!1,read:a=!0,updateReadIndex:r,prev:i,curr:c=null,contextId:d=0,context:o="user"}=e;if(!c)return null;let{created_at:u,mid:m}=c;const h=null===(t=c.properties)||void 0===t?void 0:t.local_id;let x=null,g=_()(u).format("YYYY/MM/DD");if(i||"undefined"===typeof i){if(i){let{created_at:e}=i;_()(e).isSame(u,"day")||(x=g)}}else x=g;const f=h||m;return(0,p.jsxs)(s.Fragment,{children:[x&&(0,p.jsx)(Et.Z,{content:x}),(0,p.jsx)(ws,{"data-key":f,context:o,id:d,mid:m,selectMode:l,children:(0,p.jsx)(js,{readOnly:l||n,updateReadIndex:r,read:a,context:o,mid:m,contextId:d},f)},f)]},f)},Ns=function(e){let{mids:t=[],messageData:n={},loginUid:s=0,readIndex:l=0}=e;const a=t.filter((e=>{const{from_uid:t=0}=n[e]||{};return n[e]&&t!=s}));if(0==a.length)return{unreads:0};if(0==l)return{unreads:a.length};const r=a.filter((e=>e>l)),i=[];return r.forEach((e=>{const t=n[e],{mentions:l=[]}=t.properties||{};l.forEach((t=>{t==s&&i.push(e)}))})),{unreads:r.length,mentions:i}};var Zs;function _s(){return _s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},_s.apply(this,arguments)}const ks=(e,t)=>{let{title:n,titleId:l,...a}=e;return s.createElement("svg",_s({width:24,height:24,viewBox:"0 0 24 24",fill:"#70707B",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":l},a),n?s.createElement("title",{id:l},n):null,Zs||(Zs=s.createElement("path",{d:"M3.5 14L13.5 14.001C14.2793 14.001 14.9204 14.5963 14.9931 15.3566L15 15.501V17.5C14.999 21 11.284 22 8.5 22C5.77787 22 2.1647 21.044 2.00545 17.7296L2 17.5V15.5C2 14.7207 2.59527 14.0796 3.35561 14.0069L3.5 14ZM15.488 14H20.5C21.2793 14 21.9204 14.5944 21.9931 15.3555L22 15.5V17C21.999 20.062 19.142 21 17 21C16.32 21 15.569 20.904 14.86 20.678C15.5128 19.9277 15.9362 18.9748 15.9934 17.78L16 17.5V15.5C16 15.0056 15.8507 14.5488 15.601 14.1616L15.488 14H20.5H15.488ZM8.5 3C10.985 3 13 5.015 13 7.5C13 9.985 10.985 12 8.5 12C6.015 12 4 9.985 4 7.5C4 5.015 6.015 3 8.5 3ZM17.5 5C19.433 5 21 6.567 21 8.5C21 10.433 19.433 12 17.5 12C15.567 12 14 10.433 14 8.5C14 6.567 15.567 5 17.5 5Z"})))},Ms=(0,s.forwardRef)(ks);var Es=n(28595),Os=n(89670),Ds=n(37076),Ls=n(94236);const Is=e=>{let{pullUp:t=null,pulling:n}=e;const[l,a]=(0,Ls.X)();return(0,s.useEffect)((()=>{a&&t&&!n&&t()}),[a,t,n]),(0,p.jsx)("div",{"data-load-more":!0,className:"mt-2 flex-center w-full py-2",ref:l,children:(0,p.jsx)(Ds.Z,{size:18,lineWeight:4,speed:1,color:"#ccc"})})};var $s=n(94271);function Hs(e){var t;let{cid:n=0,dropFiles:a=[]}=e;const{t:r}=(0,h.$G)("chat"),{pulling:d,list:u,appends:x,hasMore:g,pullUp:j}=U({context:"channel",id:n}),{pathname:b}=(0,l.TH)(),w=(0,v.I0)(),[y]=(0,C.o5)(),N=(0,f.N)(y,300),[Z,_]=(0,s.useState)(!0),[k,M]=(0,s.useState)(!1),{selects:E,userIds:O,data:L,messageData:I,loginUser:F,footprint:S}=(0,m.CG)((e=>({selects:e.ui.selectMessages[`channel_${n}`],footprint:e.footprint,loginUser:e.authData.user,userIds:e.users.ids,data:e.channels.byId[n],messageData:e.message||{}})));(0,s.useEffect)((()=>(w((0,H.cp)()),()=>{w((0,H.cp)({path:b}))})),[b]);const V=()=>{M((e=>!e))};if(!L)return null;const{name:P,description:R,is_public:B,members:A=[],owner:z}=L,Y=B?O:A.slice(0).sort((e=>e==z?-1:0)),q=(null===F||void 0===F?void 0:F.is_admin)||z==(null===F||void 0===F?void 0:F.uid),J=S.readChannels[n],W=(null===L||void 0===L||null===(t=L.pinned_messages)||void 0===t?void 0:t.length)||0,K=[...u,...x],X="relative cursor-pointer";return(0,p.jsxs)(p.Fragment,{children:[k&&(0,p.jsx)(Os.Z,{cid:n,closeModal:V}),(0,p.jsx)(Mt,{to:n,context:"channel",dropFiles:a,aside:(0,p.jsxs)("ul",{className:"flex flex-col gap-6",children:[(0,p.jsx)(o.Z,{tip:r("pin"),placement:"left",children:(0,p.jsx)(c.ZP,{placement:"left-start",popperOptions:{strategy:"fixed"},offset:[0,150],interactive:!0,trigger:"click",content:(0,p.jsx)(D,{id:n}),children:(0,p.jsxs)("li",{className:`${X}`,children:[W>0?(0,p.jsx)("span",{className:"absolute -top-2 -right-2 flex-center w-4 h-4 rounded-full bg-primary-400 text-white font-bold text-[10px]",children:W}):null,(0,p.jsx)(Jn,{className:"fill-gray-500"})]})})}),(0,p.jsx)(o.Z,{tip:r("fav"),placement:"left",children:(0,p.jsx)(c.ZP,{placement:"left-start",popperOptions:{strategy:"fixed"},offset:[0,162],interactive:!0,trigger:"click",content:(0,p.jsx)($,{cid:n}),children:(0,p.jsx)("li",{className:`${X}`,children:(0,p.jsx)(ct.Z,{className:"fill-gray-500"})})})}),(0,p.jsx)("li",{className:`${X}`,onClick:()=>{_((e=>!e))},children:(0,p.jsx)(o.Z,{tip:r("channel_members"),placement:"left",children:(0,p.jsx)(Ms,{className:Z?"fill-gray-600":""})})})]}),header:(0,p.jsxs)("header",{className:"h-14 px-5  flex items-center justify-center md:justify-between shadow-[inset_0_-1px_0_rgb(0_0_0_/_10%)]",children:[(0,p.jsx)($s.Z,{}),(0,p.jsxs)("div",{className:"flex items-center gap-1",children:[(0,p.jsx)(T.Z,{personal:!B}),(0,p.jsx)("span",{className:"text-gray-800 dark:text-white",children:P}),(0,p.jsx)("span",{className:"ml-2 text-gray-500 hidden md:block",children:R})]})]}),users:(0,p.jsxs)("div",{className:"flex-col gap-1 w-[226px] h-[calc(100vh_-_56px_-_22px)] overflow-y-scroll p-2 shadow-[inset_1px_0px_0px_rgba(0,_0,_0,_0.1)] "+(Z?"flex":"hidden"),children:[q&&(0,p.jsxs)("div",{className:"cursor-pointer flex items-center justify-start gap-1 select-none rounded-lg p-2.5 hover:bg-gray-500/10",onClick:V,children:[(0,p.jsx)(Es.Z,{className:"w-6 h-6 dark:fill-slate-300"}),(0,p.jsx)("div",{className:"font-semibold text-sm text-gray-600 dark:text-gray-50",children:r("add_channel_members")})]}),Y.map((e=>(0,p.jsx)(G.Z,{enableContextMenu:!0,cid:n,owner:z==e,uid:e,dm:!0,popover:!0},e)))]}),children:(0,p.jsxs)("article",{className:"py-4.5 px-1 md:px-4 w-full h-full overflow-x-hidden overflow-y-auto",id:`VOCECHAT_FEED_channel_${n}`,children:[g?(0,p.jsx)(Is,{pullUp:j,pulling:d}):(0,p.jsxs)("div",{className:"pt-14 px-1 md:px-0 flex flex-col items-start gap-2",children:[(0,p.jsx)("h2",{className:"font-bold text-4xl dark:text-white",children:r("welcome_channel",{name:P})}),(0,p.jsxs)("p",{className:"text-gray-600 dark:text-gray-300",children:[r("welcome_desc",{name:P})," "]}),(null===F||void 0===F?void 0:F.is_admin)&&(0,p.jsxs)(i.OL,{to:`/setting/channel/${n}?f=${b}`,className:"flex items-center gap-1 bg-clip-text text-fill-transparent bg-gradient-to-r from-blue-500 to-primary-400 ",children:[(0,p.jsx)(pe.Z,{className:"w-4 h-4 fill-blue-500"}),r("edit_channel")]})]}),K.map(((e,t)=>{const s=I[e];if(!s)return null;const l=0==t?null:I[K[t-1]],a=(null===s||void 0===s?void 0:s.from_uid)==(null===F||void 0===F?void 0:F.uid)||e<=J;return ys({selectMode:!!E,updateReadIndex:N,read:a,prev:l,curr:s,contextId:n,context:"channel"})}))]})})]})}const Fs=(0,s.memo)(Hs,((e,t)=>e.cid==t.cid)),Ss=e=>{let{uid:t=0,dropFiles:n}=e;const{pulling:s,list:l,appends:a,hasMore:r,pullUp:i}=U({context:"user",id:t}),[d]=(0,C.o5)(),u=(0,f.N)(d,300),{currUser:h,messageData:x,footprint:g,loginUid:v,selects:j}=(0,m.CG)((e=>{var n;return{selects:e.ui.selectMessages[`user_${t}`],loginUid:null===(n=e.authData.user)||void 0===n?void 0:n.uid,footprint:e.footprint,currUser:e.users.byId[t],messageData:e.message}}));if(!h)return null;const b=g.readUsers[t],w=[...l,...a];return(0,p.jsx)(Mt,{to:t,context:"user",dropFiles:n,aside:(0,p.jsx)("ul",{className:"flex flex-col gap-6",children:(0,p.jsx)(o.Z,{tip:"Saved Items",placement:"left",children:(0,p.jsx)(c.ZP,{placement:"left-start",popperOptions:{strategy:"fixed"},offset:[0,180],interactive:!0,trigger:"click",content:(0,p.jsx)($,{uid:t}),children:(0,p.jsx)("li",{className:"relative cursor-pointer fav",children:(0,p.jsx)(ct.Z,{className:"fill-gray-500"})})})})}),header:(0,p.jsxs)("header",{className:"box-border h-14 px-5 flex items-center justify-center md:justify-between shadow-[inset_0_-1px_0_rgb(0_0_0_/_10%)]",children:[(0,p.jsx)($s.Z,{}),(0,p.jsx)(G.Z,{interactive:!1,uid:h.uid})]}),children:(0,p.jsxs)("article",{id:`VOCECHAT_FEED_user_${t}`,className:"w-full h-full px-4 py-4.5 overflow-auto",children:[r?(0,p.jsx)(Is,{pullUp:i,pulling:s}):null,[...w].map(((e,n)=>{const s=x[e],l=0==n?null:x[w[n-1]],a=(null===s||void 0===s?void 0:s.from_uid)==v||e<=b;return ys({selectMode:!!j,updateReadIndex:u,read:a,prev:l,curr:s,contextId:t,context:"user"})}))]})})};var Vs=n(59476),Ps=n(18879),Rs=n(50911);const Us=e=>{let{context:t="user",id:n,visible:s,mid:a,hide:r,deleteChannel:i,setInviteChannelId:d,children:o}=e;const{t:u}=(0,h.$G)(),{canCopyEmail:x,copyEmail:g,canDeleteChannel:f}=(0,Rs.Z)({uid:"user"==t?n:void 0,cid:"channel"==t?n:void 0}),[j]=(0,S.bI)(),[b]=(0,C.o5)(),w=(0,l.bS)(`/chat/dm/${n}`),y=(0,v.I0)(),N=(0,l.s0)(),{pathname:Z}=(0,l.TH)(),{channelMuted:_}=(0,m.CG)((e=>({channelMuted:"channel"==t&&e.footprint.muteChannels[n]}))),k=()=>{if(a){b("user"==t?{users:[{uid:+n,mid:a}]}:{groups:[{gid:+n,mid:a}]})}},M="user"==t?[{title:u("action.mark_read"),handler:k},{title:u("setting"),handler:()=>{N(`/setting/dm/${n}?f=${Z}`)}},x&&{title:u("action.copy_email"),handler:g},{title:u("action.hide_session"),danger:!0,handler:()=>{y((0,W.So)(n)),w&&N("/chat")}}]:[{title:u("setting"),underline:!0,handler:()=>{N(`/setting/channel/${n}?f=${Z}`)}},{title:u("action.mark_read"),handler:k},{title:u(_?"action.unmute":"action.mute"),handler:()=>{j(_?{remove_groups:[n]}:{add_groups:[{gid:n}]})}},{title:u("action.invite_people"),handler:d.bind(null,n)},f&&{title:u("action.delete_channel"),danger:!0,handler:i.bind(null,n)}];return(0,p.jsx)(c.ZP,{interactive:!0,placement:"right-start",popperOptions:{strategy:"fixed"},followCursor:"initial",visible:s,onClickOutside:r,content:(0,p.jsx)(Vn.Z,{hideMenu:r,items:M.filter(Boolean)}),children:o})};var Ts;function Gs(){return Gs=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Gs.apply(this,arguments)}const Bs=(e,t)=>{let{title:n,titleId:l,...a}=e;return s.createElement("svg",Gs({width:5,height:8,viewBox:"0 0 5 8",fill:"#616161",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":l},a),n?s.createElement("title",{id:l},n):null,Ts||(Ts=s.createElement("path",{d:"M4.1875 3.16699V2.33366C4.1875 1.40033 3.375 0.666992 2.5 0.666992C1.625 0.666992 0.833333 1.40033 0.833333 2.33366V3.16699C0.373083 3.16699 0 3.54009 0 4.00032V6.50032C0 6.96056 0.373083 7.33366 0.833333 7.33366H2.5H4.16667C4.62692 7.33366 5 6.96056 5 6.50032V3.97949C5 3.53076 4.63625 3.16699 4.1875 3.16699ZM3.33333 3.16699H1.66667V2.33366C1.66667 1.85747 2.05558 1.50033 2.5 1.50033C2.94442 1.50033 3.33333 1.85747 3.33333 2.33366V3.16699Z"})))},As=(0,s.forwardRef)(Bs),zs=e=>{let{type:t="user",id:n,mid:r,setDeleteChannelId:c,setInviteChannelId:d}=e;const o=(0,l.s0)(),{addStageFile:u}=(0,se.Z)({context:t,id:n}),[{isActive:h},x]=(0,B.L)((()=>({accept:[A.FILE],drop(e){let{files:s}=e;if(s.length){const e=s.map((e=>{const{size:t,type:n,name:s}=e;return{size:t,type:n,name:s,url:URL.createObjectURL(e)}}));u(e),o("user"==t?`/chat/dm/${n}`:`/chat/channel/${n}`)}},collect:e=>({isActive:e.canDrop()&&e.isOver()})})),[t,n]),{visible:g,handleContextMenuEvent:f,hideContextMenu:v}=(0,ps.Z)(),[C,j]=(0,s.useState)(),{messageData:b,userData:w,channelData:y,readIndex:N,loginUid:Z,mids:_,muted:k}=(0,m.CG)((e=>{var s;return{mids:"user"==t?e.userMessage.byId[n]:e.channelMessage[n],loginUid:(null===(s=e.authData.user)||void 0===s?void 0:s.uid)||0,readIndex:"user"==t?e.footprint.readUsers[n]:e.footprint.readChannels[n],messageData:e.message,userData:e.users.byId,channelData:e.channels.byId,muted:"user"==t?e.footprint.muteUsers[n]:e.footprint.muteChannels[n]}}));if((0,s.useEffect)((()=>{const e="user"==t?w[n]:y[n];if(e)if("avatar"in e){const{name:t,avatar:n}=e;j({name:t,icon:n,mid:r,is_public:!0})}else{const{name:t,icon:n="",is_public:s}=e;j({name:t,icon:n,mid:r,is_public:s})}}),[n,r,t,w,y]),!C)return null;const O=b[r]||{},{name:D,icon:L,is_public:I}=C,{unreads:$=0}=Ns({mids:_,readIndex:N,messageData:b,loginUid:Z});return(0,p.jsx)("li",{className:"session",children:(0,p.jsx)(Us,{visible:g,hide:v,context:t,id:n,mid:r,setInviteChannelId:d,deleteChannel:c,children:(0,p.jsxs)(i.OL,{ref:x,className:e=>{let{isActive:t}=e;return(0,a.Z)("nav flex gap-2 rounded-lg p-2 w-full md:hover:bg-gray-500/20",h&&"shadow-[inset_0_0_0_2px_#52edff]",t&&"bg-gray-500/20")},to:"user"==t?`/chat/dm/${n}`:`/chat/channel/${n}`,onContextMenu:f,children:[(0,p.jsx)("div",{className:"flex bg-slate-50 rounded-full",children:"user"==t?(0,p.jsx)(G.Z,{avatarSize:40,compact:!0,interactive:!1,uid:n}):(0,p.jsx)(M.Z,{width:40,height:40,className:"icon",type:"channel",name:D,src:L})}),(0,p.jsxs)("div",{className:"w-full flex flex-col justify-between overflow-hidden",children:[(0,p.jsxs)("div",{className:"flex items-center justify-between ",children:[(0,p.jsxs)("span",{className:(0,a.Z)("flex items-center gap-1"),children:[(0,p.jsx)("i",{className:(0,a.Z)("not-italic font-semibold text-sm text-gray-500 dark:text-white max-w-[120px] truncate",!O.created_at&&"max-w-[190px]"),children:D}),!I&&(0,p.jsx)(As,{className:"dark:fill-gray-400"})]}),(0,p.jsx)("span",{className:(0,a.Z)("text-xs text-gray-500 dark:text-gray-400 max-w-[80px] truncate font-semibold"),children:(0,E.Lf)(O.created_at)})]}),(0,p.jsxs)("div",{className:"flex items-center justify-between",children:[(0,p.jsx)("span",{className:(0,a.Z)("text-xs text-gray-500 dark:text-gray-400  truncate",$>0?"w-36":""),children:bs(O)}),$>0&&(0,p.jsx)("strong",{className:(0,a.Z)("text-white h-5 min-w-[20px] bg-primary-400 font-bold text-[10px] rounded-[10px] flex-center",$>99&&"w-1.5 !h-1.5 p-0 min-w-[unset]",k&&"bg-gray-500"),children:$>99?null:$})]})]})]})})})};var Ys=n(77493);const qs=e=>{let{tempSession:t}=e;const[n,l]=(0,s.useState)(),[a,r]=(0,s.useState)(),[i,c]=(0,s.useState)([]),{channelIDs:d,DMs:o,readChannels:u,readUsers:h,channelMessage:x,userMessage:g,loginUid:f}=(0,m.CG)((e=>{var t;return{loginUid:null===(t=e.authData.user)||void 0===t?void 0:t.uid,channelIDs:e.channels.ids,DMs:e.userMessage.ids,userMessage:e.userMessage.byId,channelMessage:e.channelMessage,readChannels:e.footprint.readChannels,readUsers:e.footprint.readUsers}}));return(0,s.useEffect)((()=>{const e=[...d.map((e=>{const t=x[e];if(!t||0==t.length)return{key:`channel_${e}`,unreads:0,id:e,type:"channel"};return{key:`channel_${e}`,id:e,mid:[...t].pop(),type:"channel"}})),...o.map((e=>{const t=g[e];if(!t||0==t.length)return{key:`user_${e}`,unreads:0,id:e,type:"user"};return{key:`user_${e}`,type:"user",id:e,mid:[...t].pop()}}))].sort(((e,t)=>{const{mid:n=0}=e,{mid:s=0}=t;return s-n}));c(t?[t,...e]:e)}),[d,o,x,u,h,f,g,t]),(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("ul",{className:"flex flex-col gap-0.5 p-2 overflow-auto h-[calc(100vh_-_56px_-_16px_-_8px)]",children:i.map((e=>{const{key:t,type:n,id:s,mid:a=0}=e;return(0,p.jsx)(zs,{type:n,id:s,mid:a,setInviteChannelId:r,setDeleteChannelId:l},t)}))}),!!n&&(0,p.jsx)(Ys.Z,{id:n,closeModal:()=>{l(0)}}),!!a&&(0,p.jsx)(Os.Z,{type:"channel",cid:a,closeModal:()=>{r(0)}})]})};var Js=n(43764);const Ws=()=>{const{t:e}=(0,h.$G)("auth"),t=(0,v.I0)(),{clearLocalData:n}=(0,yt.Z)(),s=(0,l.s0)(),a=(0,m.CG)((e=>e.server.name));return(0,p.jsxs)("section",{className:"flex flex-col items-center text-center",children:[(0,p.jsx)("h2",{className:"text-3xl text-gray-600 dark:text-gray-50 font-bold",children:e("welcome",{name:a})}),(0,p.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,p.jsx)("span",{className:"text-gray-400 dark:text-gray-200 my-3 text-sm",children:e("guest_login_tip")}),(0,p.jsx)("div",{className:"w-44 h-44 self-center mb-4",children:(0,p.jsx)(Js.Z,{size:1200,link:`https://voce.chat/login?s=${encodeURIComponent("https://privoce.voce.chat")}`})}),(0,p.jsx)(ae.Z,{onClick:()=>{t((0,wt.sQ)()),n(),s("/login")},className:"small",children:e("sign_in")})]})]})};function Ks(e){let{cid:t=0}=e;const{t:n}=(0,h.$G)("chat"),{list:s,appends:l,hasMore:a,pullUp:r,pulling:i}=U({context:"channel",id:t}),{data:c,messageData:d}=(0,m.CG)((e=>({footprint:e.footprint,data:e.channels.byId[t],messageData:e.message||{}})));if(!c)return null;const{name:o,description:u,is_public:x}=c,g=[...s,...l];return(0,p.jsx)(p.Fragment,{children:(0,p.jsx)(Mt,{readonly:!0,to:t,context:"channel",header:(0,p.jsxs)("header",{className:"h-14 px-5 flex items-center justify-center md:justify-between shadow-[inset_0_-1px_0_rgb(0_0_0_/_10%)]",children:[(0,p.jsx)($s.Z,{}),(0,p.jsxs)("div",{className:"flex items-center gap-1",children:[(0,p.jsx)(T.Z,{personal:!x}),(0,p.jsx)("span",{className:"text-gray-800 dark:text-white",children:o}),(0,p.jsx)("span",{className:"ml-2 text-gray-500 hidden md:block ",children:u})]})]}),children:(0,p.jsxs)("article",{className:"py-4.5 px-4 w-full h-full overflow-x-hidden overflow-y-auto",id:`VOCECHAT_FEED_channel_${t}`,children:[a?(0,p.jsx)(Is,{pullUp:r,pulling:i}):(0,p.jsxs)("div",{className:"pt-14 flex flex-col items-start gap-2",children:[(0,p.jsx)("h2",{className:"font-bold text-4xl dark:text-white",children:n("welcome_channel",{name:o})}),(0,p.jsxs)("p",{className:"text-gray-600 dark:text-gray-300",children:[n("welcome_desc",{name:o})," "]})]}),g.map(((e,n)=>{const s=d[e];if(!s)return null;const l=0==n?null:d[g[n-1]];return ys({readonly:!0,selectMode:!1,prev:l,curr:s,contextId:t,context:"channel"})}))]})})})}const Xs=e=>{let{id:t,mid:n}=e;const[l,r]=(0,s.useState)(),{messageData:c,userData:d,channelData:o}=(0,m.CG)((e=>({messageData:e.message,userData:e.users.byId,channelData:e.channels.byId})));if((0,s.useEffect)((()=>{const e=o[t];if(!e)return;const{name:s,icon:l="",is_public:a}=e;r({name:s,icon:l,mid:n,is_public:a})}),[t,n,d,o]),!l)return null;const u=c[n]||{},{name:h,icon:x}=l;return(0,p.jsx)("li",{className:"session",children:(0,p.jsxs)(i.OL,{className:e=>{let{isActive:t}=e;return(0,a.Z)("nav flex gap-2 rounded-lg p-2 w-full md:hover:bg-gray-500/20",t&&"bg-gray-500/20")},to:`/chat/channel/${t}`,children:[(0,p.jsx)("div",{className:"flex bg-slate-50 rounded-full",children:(0,p.jsx)(M.Z,{width:40,height:40,className:"icon",type:"channel",name:h,src:x})}),(0,p.jsxs)("div",{className:"w-full flex flex-col justify-between",children:[(0,p.jsxs)("div",{className:"flex items-center justify-between",children:[(0,p.jsx)("span",{className:(0,a.Z)("flex items-center gap-2 font-semibold text-sm text-gray-500 dark:text-white truncate",u.created_at&&"max-w-[190px]"),children:h}),(0,p.jsx)("span",{className:"text-xs text-gray-600 max-w-[80px] truncate",children:(0,E.Lf)(u.created_at)})]}),(0,p.jsx)("div",{className:"flex items-center justify-between",children:(0,p.jsx)("span",{className:"text-xs text-gray-500 w-36 truncate",children:bs(u)})})]})]})})},Qs=()=>{const[e,t]=(0,s.useState)([]),{channelIDs:n,readChannels:l,readUsers:a,channelMessage:r,userMessage:i,loginUid:c}=(0,m.CG)((e=>{var t;return{loginUid:null===(t=e.authData.user)||void 0===t?void 0:t.uid,channelIDs:e.channels.ids,userMessage:e.userMessage.byId,channelMessage:e.channelMessage,readChannels:e.footprint.readChannels,readUsers:e.footprint.readUsers}}));return(0,s.useEffect)((()=>{const e=[...n.map((e=>{const t=r[e];if(!t||0==t.length)return{key:`channel_${e}`,unreads:0,id:e,type:"channel"};return{key:`channel_${e}`,id:e,mid:[...t].sort().pop(),type:"channel"}}))].sort(((e,t)=>{const{mid:n=0}=e,{mid:s=0}=t;return s-n}));t(e)}),[n,r,l,a,c,i]),(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("ul",{className:"flex flex-col gap-0.5 p-2 overflow-auto h-[calc(100vh_-_56px_-_38px)]",children:e.map((e=>{const{key:t,id:n,mid:s=0}=e;return(0,p.jsx)(Xs,{id:n,mid:s},t)}))}),(0,p.jsx)(Nt,{placement:"session"})]})};function el(){const e=(0,l.bS)("/"),t=(0,l.bS)("/chat"),[n,i]=(0,s.useState)(!1),[c,d]=(0,s.useState)(!1),[o,u]=(0,s.useState)(!1),{channel_id:h=0,user_id:g=0}=(0,l.UO)(),{sessionUids:f,isGuest:v}=(0,m.CG)((e=>({isGuest:e.authData.guest,sessionUids:e.userMessage.ids}))),C=f.findIndex((e=>e==g))>-1?void 0:{key:`user_${g}`,unreads:0,id:+g,type:"user"},j=0==h&&0==g,b=e||t;return(0,p.jsxs)(p.Fragment,{children:[c&&(0,p.jsx)(Ps.Z,{closeModal:()=>{d((e=>!e))},personal:!0}),o&&(0,p.jsx)(Vs.Z,{closeModal:()=>{u((e=>!e))}}),(0,p.jsxs)("div",{className:(0,a.Z)("flex h-full md:pt-2 md:pb-2.5 md:pr-1",v?"guest-container md:px-1":"md:pr-12"),children:[n&&(0,p.jsx)("div",{onClick:()=>{i((e=>!e))},className:"z-30 fixed top-0 left-4 w-screen h-screen bg-black/50 transition-all backdrop-blur-sm"}),(0,p.jsxs)("div",{className:(0,a.Z)("left-container pb-14 md:pb-0 flex-col md:rounded-l-2xl w-full md:max-w-[250px] md:min-w-[268px] h-full shadow-[rgb(0_0_0_/_10%)_-1px_0px_0px_inset] bg-white dark:!bg-gray-800",b?"flex":"hidden md:flex"),children:[(0,p.jsx)(x,{readonly:v}),v?(0,p.jsx)(Qs,{}):(0,p.jsx)(qs,{tempSession:C}),v&&(0,p.jsxs)("footer",{className:"hidden md:block text-xs text-gray-300 dark:text-gray-700 text-center",children:["Host your own ",(0,p.jsx)("a",{href:"https://voce.chat",target:"_blank",rel:"noopener noreferrer",className:"text-gray-400  dark:text-gray-600",children:"voce.chat"})]})]}),(0,p.jsxs)("div",{className:(0,a.Z)("right-container md:rounded-r-2xl w-full bg-white dark:!bg-gray-700",j&&"h-full flex-center",b&&"hidden md:flex"),children:[j&&(v?(0,p.jsx)(Ws,{}):(0,p.jsx)(r.Z,{})),0!==h&&(v?(0,p.jsx)(Ks,{cid:+h}):(0,p.jsx)(Fs,{cid:+h})),0!==g&&(0,p.jsx)(Ss,{uid:+g})]})]})]})}const tl=(0,s.memo)(el)},77493:(e,t,n)=>{n.d(t,{Z:()=>m});var s=n(70537),l=n(27418),a=n(15924),r=n(80874),i=n(6144),c=n(40698),d=n(69885),o=n(14566),u=n(80683);const m=e=>{let{id:t,closeModal:n}=e;const{t:m}=(0,o.$G)("setting"),{t:h}=(0,o.$G)(),p=(0,a.s0)(),[x,{isLoading:g,isSuccess:f}]=(0,i.kE)();return(0,s.useEffect)((()=>{f&&(l.ZP.success(h("tip.delete")),n(),p("/chat"))}),[f]),t?(0,u.jsx)(r.Z,{id:"modal-modal",children:(0,u.jsx)(c.Z,{className:"compact",title:m("channel.delete"),description:m("channel.delete_desc"),buttons:(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(d.Z,{onClick:n.bind(null,void 0),className:"cancel",children:h("action.cancel")}),(0,u.jsx)(d.Z,{onClick:()=>{x(t)},className:"danger",children:g?"Deleting":h("action.remove")})]})})}):null}},80169:(e,t,n)=>{e.exports=n.p+"static/media/more.d35b0228affb89f48593.svg"}}]);