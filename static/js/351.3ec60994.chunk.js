"use strict";(globalThis.webpackChunkvocechat_web=globalThis.webpackChunkvocechat_web||[]).push([[351],{48055:(e,t,i)=>{i.d(t,{Z:()=>r});var l,n=i(70537);function s(){return s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var l in i)Object.prototype.hasOwnProperty.call(i,l)&&(e[l]=i[l])}return e},s.apply(this,arguments)}const a=(e,t)=>{let{title:i,titleId:a,...r}=e;return n.createElement("svg",s({width:20,height:20,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":a},r),i?n.createElement("title",{id:a},i):null,l||(l=n.createElement("path",{d:"M5 7.5L10 12.5L15 7.5",stroke:"#344054",strokeWidth:1.67,strokeLinecap:"round",strokeLinejoin:"round"})))},r=(0,n.forwardRef)(a)},18697:(e,t,i)=>{i.d(t,{Z:()=>o});var l,n,s=i(70537);function a(){return a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var l in i)Object.prototype.hasOwnProperty.call(i,l)&&(e[l]=i[l])}return e},a.apply(this,arguments)}const r=(e,t)=>{let{title:i,titleId:r,...o}=e;return s.createElement("svg",a({width:16,height:12,viewBox:"0 0 16 12",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":r},o),i?s.createElement("title",{id:r},i):null,l||(l=s.createElement("g",{clipPath:"url(#clip0_9046_23916)"},s.createElement("path",{d:"M4.93942 9.69781L1.62578 6.38648C1.25336 6.01431 0.651746 6.01431 0.27932 6.38648C-0.0931066 6.75865 -0.0931066 7.35984 0.27932 7.73201L4.27096 11.7209C4.64339 12.093 5.245 12.093 5.61743 11.7209L15.7207 1.62465C16.0931 1.25248 16.0931 0.651292 15.7207 0.279125C15.3483 -0.0930417 14.7466 -0.0930417 14.3742 0.279125L4.93942 9.69781Z",fill:"#78787C"}))),n||(n=s.createElement("defs",null,s.createElement("clipPath",{id:"clip0_9046_23916"},s.createElement("rect",{width:16,height:12,fill:"white"})))))},o=(0,s.forwardRef)(r)},34351:(e,t,i)=>{i.r(t),i.d(t,{default:()=>we});var l=i(70537),n=i(18756),s=i.n(n),a=i(57889);const r=a.ZP.div`
  height: 100vh;
  overflow-y: scroll;
  display: flex;
  flex-direction: column;
  align-items: flex-start;
  background-color: #fff;
  margin: 8px 24px 10px 0;
  border-radius: 16px;
  .opts {
    padding: 20px 16px;
    display: flex;
    justify-content: space-between;
    width: 100%;
  }
  > .list {
    padding: 0 16px;
    height: 100%;
    overflow-y: scroll;
    width: 100%;
    display: flex;
    &.item {
      gap: 8px;
      flex-direction: column;
    }
    &.grid {
      flex-direction: row;
      flex-wrap: wrap;
      > .file_box {
        flex-direction: column;
        /* margin-right: 8px; */
        margin-bottom: 8px;
      }
    }
  }
`;var o,c=i(80308),d=i(3074),p=i(12564);function x(){return x=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var l in i)Object.prototype.hasOwnProperty.call(i,l)&&(e[l]=i[l])}return e},x.apply(this,arguments)}const h=(e,t)=>{let{title:i,titleId:n,...s}=e;return l.createElement("svg",x({width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":n},s),i?l.createElement("title",{id:n},i):null,o||(o=l.createElement("path",{d:"M2 3.75C2 3.33579 2.33579 3 2.75 3H10.25C10.6642 3 11 3.33579 11 3.75C11 4.16421 10.6642 4.5 10.25 4.5H2.75C2.33579 4.5 2 4.16421 2 3.75ZM2 11.75C2 11.3358 2.33579 11 2.75 11H9.25C9.66421 11 10 11.3358 10 11.75C10 12.1642 9.66421 12.5 9.25 12.5H2.75C2.33579 12.5 2 12.1642 2 11.75ZM2.75 7C2.33579 7 2 7.33579 2 7.75C2 8.16421 2.33579 8.5 2.75 8.5H13.25C13.6642 8.5 14 8.16421 14 7.75C14 7.33579 13.6642 7 13.25 7H2.75Z",fill:"#344054"})))},u=(0,l.forwardRef)(h);var f;function m(){return m=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var l in i)Object.prototype.hasOwnProperty.call(i,l)&&(e[l]=i[l])}return e},m.apply(this,arguments)}const g=(e,t)=>{let{title:i,titleId:n,...s}=e;return l.createElement("svg",m({width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":n},s),i?l.createElement("title",{id:n},i):null,f||(f=l.createElement("path",{d:"M3.5 2C2.67157 2 2 2.67157 2 3.5V5.5C2 6.32843 2.67157 7 3.5 7H5.5C6.32843 7 7 6.32843 7 5.5V3.5C7 2.67157 6.32843 2 5.5 2H3.5ZM10.5 2C9.67157 2 9 2.67157 9 3.5V5.5C9 6.32843 9.67157 7 10.5 7H12.5C13.3284 7 14 6.32843 14 5.5V3.5C14 2.67157 13.3284 2 12.5 2H10.5ZM3.5 9C2.67157 9 2 9.67157 2 10.5V12.5C2 13.3284 2.67157 14 3.5 14H5.5C6.32843 14 7 13.3284 7 12.5V10.5C7 9.67157 6.32843 9 5.5 9H3.5ZM10.5 9C9.67157 9 9 9.67157 9 10.5V12.5C9 13.3284 9.67157 14 10.5 14H12.5C13.3284 14 14 13.3284 14 12.5V10.5C14 9.67157 13.3284 9 12.5 9H10.5Z",fill:"#344054"})))},b=(0,l.forwardRef)(g);var v=i(80683);const w=a.ZP.ul`
  display: flex;
  border: 1px solid #d0d5dd;
  box-shadow: 0 1px 2px rgba(16, 24, 40, 0.05);
  border-radius: 8px;
  box-sizing: border-box;

  .view {
    cursor: pointer;
    padding: 8px;
    box-sizing: border-box;
    display: flex;
    align-items: center;
    justify-content: center;
  }
  &.item .item,
  &.grid .grid {
    border: 1px solid #52edff;
    box-shadow: 0 1px 2px rgba(16, 24, 40, 0.05);
    border-radius: 8px;
    svg {
      transition: all 0.2s ease;
      path {
        fill: #52edff;
      }
    }
  }
`;function j(e){let{view:t=c.kO.item}=e;const i=(0,d.I0)(),l=e=>{const{view:l}=e.currentTarget.dataset;l!=t&&i((0,p.In)(t==c.kO.item?c.kO.grid:c.kO.item))};return(0,v.jsxs)(w,{className:t,children:[(0,v.jsx)("li",{className:"view item","data-view":c.kO.item,onClick:l,children:(0,v.jsx)(u,{})}),(0,v.jsx)("li",{className:"view grid","data-view":c.kO.grid,onClick:l,children:(0,v.jsx)(b,{})})]})}var y=i(71893),k=i(10562);const N=a.ZP.div`
  width: 100%;
  padding: 6px 16px;
  box-shadow: 0 1px 0 rgba(0, 0, 0, 0.1);
  &.embed {
    padding: 6px 8px;
    box-shadow: none;
  }
  .search {
    outline: none;
    background-color: rgba(0, 0, 0, 0.08);
    border-radius: 25px;
    padding: 10px 8px 10px 36px;
    color: #a1a1aa;
    font-weight: 400;
    font-size: 14px;
    line-height: 20px;
    background-image: url(${k});
    background-repeat: no-repeat;
    background-position: 8px center;
  }
`,C=e=>{let{value:t="",updateSearchValue:i=null,embed:l=!1}=e;const{t:n}=(0,y.$)();return(0,v.jsx)(N,{className:l?"embed":"",children:(0,v.jsx)("input",{value:t,onChange:e=>{i&&i(e.target.value)},className:"search",placeholder:`${n("action.search")}...`})})};var Z=i(7829),O=i(64631),P=i(18697);const _=a.ZP.div`
  padding: 12px;
  background: #ffffff;
  min-width: 200px;
  overflow: auto;
  box-shadow: 0px 24px 48px -12px rgba(16, 24, 40, 0.18);
  border-radius: 8px;
  display: flex;
  flex-direction: column;
  align-items: flex-start;
  position: relative;
  > .list {
    width: 100%;
    display: flex;
    flex-direction: column;
    gap: 16px;
    .date {
      position: relative;
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 16px;
      color: #616161;
      font-weight: 600;
      font-size: 14px;
      line-height: 20px;
      .check {
        position: absolute;
        right: 0;
        top: 50%;
        transform: translateY(-50%);
      }
    }
  }
`,M={today:{title:"Today",duration:2222},in7d:{title:"Last 7 Days"},in30d:{title:"Last 30 Days"},in3m:{title:"Last 3 months"},in12m:{title:"Last 12 months"}},z=e=>{let{select:t="",updateFilter:i}=e;const l=e=>{i({date:e})};return(0,v.jsx)(_,{children:(0,v.jsxs)("ul",{className:"list",children:[(0,v.jsxs)("li",{className:"date",onClick:l.bind(null,void 0),children:["Any Time",!t&&(0,v.jsx)(P.Z,{className:"check"})]}),Object.entries(M).map((e=>{let[i,{title:n}]=e;return(0,v.jsxs)("li",{className:"date",onClick:l.bind(null,i),children:[n,t==i&&(0,v.jsx)(P.Z,{className:"check"})]},n)}))]})})};var E=i(6458),$=i(72136);const L=a.ZP.div`
  padding: 0 4px 4px 4px;
  background: #ffffff;
  max-height: 300px;
  overflow: auto;
  box-shadow: 0 24px 48px -12px rgba(16, 24, 40, 0.18);
  border-radius: 8px;
  display: flex;
  flex-direction: column;
  align-items: flex-start;
  position: relative;
  > .search {
    z-index: 1;
    background-color: #fff;
    position: sticky;
    top: 0;
    input {
      z-index: 2;
    }
  }
  > .list {
    width: 100%;
    display: flex;
    flex-direction: column;
    .user {
      position: relative;
      cursor: pointer;
      &.none {
        padding: 10px;
        font-weight: 600;
        font-size: 14px;
        line-height: 20px;
        color: #616161;
      }
      .check {
        position: absolute;
        right: 6px;
        top: 50%;
        transform: translateY(-50%);
      }
    }
  }
`,H=e=>{let{select:t="",updateFilter:i}=e;const{input:l,updateInput:n,users:s}=(0,$.Z)(),a=e=>{i({from:e})};return(0,v.jsxs)(L,{children:[(0,v.jsx)("div",{className:"search",children:(0,v.jsx)(C,{embed:!0,value:l,updateSearchValue:n})}),(0,v.jsxs)("ul",{className:"list",children:[(0,v.jsxs)("li",{className:"user none",onClick:a.bind(null,void 0),children:["Anyone",!t&&(0,v.jsx)(P.Z,{className:"check"})]}),s.map((e=>{let{uid:i}=e;return(0,v.jsxs)("li",{className:"user",onClick:a.bind(null,i),children:[(0,v.jsx)(E.Z,{uid:i,interactive:!0}),t==i&&(0,v.jsx)(P.Z,{className:"check"})]},i)}))]})]})};var I=i(13386),V=i(12677);const F=a.ZP.div`
  padding: 0 4px 4px 4px;
  background: #ffffff;
  max-height: 400px;
  overflow: auto;
  box-shadow: 0 24px 48px -12px rgba(16, 24, 40, 0.18);
  border-radius: 8px;
  display: flex;
  flex-direction: column;
  align-items: flex-start;
  position: relative;
  > .search {
    z-index: 1;
    background-color: #fff;
    position: sticky;
    top: 0;
    input {
      z-index: 2;
    }
  }
  > .list {
    width: 100%;
    display: flex;
    flex-direction: column;
    gap: 16px;
    padding: 8px;
    .channel {
      position: relative;
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 8px;
      .name {
        color: #616161;
        font-weight: 600;
        font-size: 14px;
        line-height: 20px;
      }
      .check {
        position: absolute;
        right: 0;
        top: 50%;
        transform: translateY(-50%);
      }
    }
  }
`,S=e=>{let{select:t=0,updateFilter:i}=e;const{input:l,updateInput:n,channels:s}=(0,V.Z)(),a=e=>{i({channel:e})};return(0,v.jsxs)(F,{children:[(0,v.jsx)("div",{className:"search",children:(0,v.jsx)(C,{embed:!0,value:l,updateSearchValue:n})}),(0,v.jsxs)("ul",{className:"list",children:[(0,v.jsxs)("li",{className:"channel",onClick:a.bind(null,void 0),children:[(0,v.jsx)(I.Z,{}),(0,v.jsx)("span",{className:"name",children:"Any Channel"}),!t&&(0,v.jsx)(P.Z,{className:"check"})]}),s.map((e=>{let{gid:i,is_public:l,name:n}=e;return(0,v.jsxs)("li",{className:"channel",onClick:a.bind(null,i),children:[(0,v.jsx)(I.Z,{personal:!l}),(0,v.jsx)("span",{className:"name",children:n}),t==i&&(0,v.jsx)(P.Z,{className:"check"})]},i)}))]})]})};var R=i(50806),T=i(20814),A=i(8969),B=i(26906),D=i(98099),Y=i(43768),G=i(31271);const W=a.ZP.div`
  padding: 12px;
  background: #ffffff;
  min-width: 200px;
  overflow: auto;
  box-shadow: 0 24px 48px -12px rgba(16, 24, 40, 0.18);
  border-radius: 8px;
  display: flex;
  flex-direction: column;
  align-items: flex-start;
  position: relative;
  > .list {
    width: 100%;
    display: flex;
    flex-direction: column;
    gap: 16px;
    .type {
      position: relative;
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 8px;
      font-weight: 600;
      font-size: 14px;
      line-height: 20px;
      color: #475467;
      .icon {
        width: 15px;
        height: auto;
      }
      .check {
        position: absolute;
        right: 0;
        top: 50%;
        transform: translateY(-50%);
      }
    }
  }
`,U={doc:{title:"Documents",icon:(0,v.jsx)(D.Z,{className:"icon"})},pdf:{title:"PDFs",icon:(0,v.jsx)(R.Z,{className:"icon"})},image:{title:"Images",icon:(0,v.jsx)(G.Z,{className:"icon"})},audio:{title:"Audio",icon:(0,v.jsx)(T.Z,{className:"icon"})},video:{title:"Videos",icon:(0,v.jsx)(A.Z,{className:"icon"})},code:{title:"Code Snippets",icon:(0,v.jsx)(Y.Z,{className:"icon"})},unknown:{title:"Unknown Files",icon:(0,v.jsx)(B.Z,{className:"icon"})}},q=e=>{let{select:t="",updateFilter:i}=e;const l=e=>{i({type:e})};return(0,v.jsx)(W,{children:(0,v.jsxs)("ul",{className:"list",children:[(0,v.jsxs)("li",{className:"type",onClick:l.bind(null,void 0),children:["Any Type",!t&&(0,v.jsx)(P.Z,{className:"check"})]}),Object.entries(U).map((e=>{let[i,{title:n,icon:s}]=e;return(0,v.jsxs)("li",{className:"type",onClick:l.bind(null,i),children:[s," ",n,t==i&&(0,v.jsx)(P.Z,{className:"check"})]},n)}))]})})};var J=i(48055),K=i(66160);const Q=a.ZP.div`
  /* padding: 20px 0; */
  display: flex;
  align-items: center;
  gap: 8px;
  .filter {
    cursor: pointer;
    display: flex;
    align-items: center;
    gap: 8px;
    border: 1px solid #d0d5dd;
    box-sizing: border-box;
    box-shadow: 0 1px 2px rgba(16, 24, 40, 0.05);
    border-radius: var(--br);
    padding: 7px 12px;
    font-weight: 500;
    font-size: 12px;
    line-height: 18px;
    &.selected {
      border: none;
      color: #fff;
      background-color: #22ccee;
      .arrow path {
        stroke: #fff;
      }
    }
    .avatar {
      width: 16px;
      height: 16px;
      border-radius: 50%;
    }
  }
`;function X(e){let{filter:t,updateFilter:i}=e;const{t:n}=(0,y.$)("file"),[s,a]=(0,l.useState)({channel:!1,date:!1,from:!1,type:!1}),r=e=>{a((t=>({...t,...e})))},o=e=>{i(e);let t=Object.keys(e)[0];r({[t]:!1})},{userMap:c,channelMap:d}=(0,K.CG)((e=>({userMap:e.users.byId,channelMap:e.channels.byId}))),{from:p,channel:x,type:h,date:u}=t,{channel:f,date:m,type:g,from:b}=s;return(0,v.jsxs)(Q,{children:[(0,v.jsx)(Z.ZP,{interactive:!0,onClickOutside:r.bind(null,{from:!1}),visible:b,placement:"bottom-start",content:(0,v.jsx)(H,{select:t.from,updateFilter:o}),children:(0,v.jsxs)("div",{className:`filter ${p&&"selected"}`,onClick:r.bind(null,{from:!0}),children:[p&&(0,v.jsx)(O.Z,{className:"avatar",name:c[p].name,url:c[p].avatar}),(0,v.jsxs)("span",{className:"txt",children:[n("from")," ",p&&c[p].name]}),(0,v.jsx)(J.Z,{className:"arrow"})]})}),(0,v.jsx)(Z.ZP,{interactive:!0,onClickOutside:r.bind(null,{channel:!1}),visible:f,placement:"bottom-start",content:(0,v.jsx)(S,{select:t.channel,updateFilter:o}),children:(0,v.jsxs)("div",{className:`filter ${x&&"selected"}`,onClick:r.bind(null,{channel:!0}),children:[(0,v.jsx)("span",{className:"txt",children:x?`In ${d[x].name}`:n("channel")}),(0,v.jsx)(J.Z,{className:"arrow"})]})}),(0,v.jsx)(Z.ZP,{interactive:!0,onClickOutside:r.bind(null,{type:!1}),visible:g,placement:"bottom-start",content:(0,v.jsx)(q,{select:t.type,updateFilter:o}),children:(0,v.jsxs)("div",{className:`filter ${h&&"selected"}`,onClick:r.bind(null,{type:!0}),children:[(0,v.jsx)("span",{className:"txt",children:h?U[h].title:n("type")}),(0,v.jsx)(J.Z,{className:"arrow"})]})}),(0,v.jsx)(Z.ZP,{interactive:!0,onClickOutside:r.bind(null,{date:!1}),visible:m,placement:"bottom-start",content:(0,v.jsx)(z,{select:t.date,updateFilter:o}),children:(0,v.jsxs)("div",{className:`filter ${u&&"selected"}`,onClick:r.bind(null,{date:!0}),children:[(0,v.jsx)("span",{className:"txt",children:u?M[u].title:n("date")}),(0,v.jsx)(J.Z,{className:"arrow"})]})})]})}var ee=i(7699),te=i.n(ee);const ie=a.ZP.div`
  background: #f3f4f6;
  border: 1px solid #d4d4d4;
  box-sizing: border-box;
  border-radius: 6px;
  width: 370px;
  height: 66px;
  * {
    user-select: text;
  }
  &.flex {
    width: 100%;
  }
  &.preview {
    position: relative;
    overflow: hidden;
    height: 281px;
    &.audio {
      height: 125px;
    }
  }
  .basic {
    padding: 8px;
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 8px;
    .icon {
      width: 36px;
      height: 48px;
    }
    .info {
      display: flex;
      flex-direction: column;
      gap: 4px;
      width: 100%;
      overflow: hidden;
      .name {
        font-weight: 600;
        font-size: 14px;
        line-height: 20px;
        color: #1c1c1e;
        white-space: nowrap;
        text-overflow: ellipsis;
      }
      .details {
        font-weight: 400;
        font-size: 12px;
        line-height: 18px;
        color: #616161;
        display: flex;
        gap: 16px;
        .from strong {
          font-weight: bold;
        }
      }
    }
    .download {
      white-space: nowrap;
    }
  }
  .preview {
    height: calc(100% - 64px);
    overflow: hidden;
    /* todo */
  }
`,le=a.ZP.div`
  height: 218px;
  video {
    width: 100%;
    height: 100%;
    object-fit: cover;
  }
`,ne=e=>{let{url:t}=e;return(0,v.jsx)(le,{children:(0,v.jsx)("video",{controls:!0,src:t})})},se=a.ZP.div`
  height: 100%;
  display: flex;
  justify-content: center;
  align-items: center;
  .err {
    padding: 18px;
    /* font-weight: bold; */
    font-size: 16px;
    color: #999;
  }
  audio {
    width: 100%;
  }
`,ae=e=>{let{url:t}=e;const[i,n]=(0,l.useState)(!1);return t?(0,v.jsx)(se,{children:i?(0,v.jsx)("div",{className:"err",children:"Unable to play this audio"}):(0,v.jsx)("audio",{controls:!0,src:t,onError:e=>{n(!0)}})}):null},re=a.ZP.div`
  height: 218px;
  overflow: hidden;
  img {
    width: 100%;
    height: 100%;
    object-fit: cover;
  }
`,oe=e=>{let{url:t,alt:i}=e;return t?(0,v.jsx)(re,{children:(0,v.jsx)("img",{src:t,alt:i})}):null},ce=a.ZP.div`
  padding: 8px;
  /* height: 218px; */
  overflow: hidden;
  embed {
    width: 100%;
    height: 100%;
  }
`,de=e=>{let{url:t}=e;return(0,v.jsx)(ce,{children:(0,v.jsx)("embed",{src:t,type:"application/pdf"})})},pe=a.ZP.div`
  height: 218px;
  padding: 15px 15px 0 15px;
  line-height: 1.4;
  overflow: scroll;
  white-space: pre-wrap;
  word-break: break-all;
  background-color: #000;
  color: #eee;
`,xe=e=>{let{url:t}=e;const[i,n]=(0,l.useState)("");return(0,l.useEffect)((()=>{(async e=>{if(!e)return;const t=await fetch(e),i=await t.text();n(i)})(t)}),[t]),i?(0,v.jsx)(pe,{children:i}):null},he=a.ZP.div`
  background-color: #fff;
  height: 218px;
  padding: 15px 15px 0 15px;
  line-height: 1.4;
  overflow: scroll;
  white-space: pre-wrap;
  word-break: break-all;
`,ue=e=>{let{url:t}=e;const[i,n]=(0,l.useState)("");return(0,l.useEffect)((()=>{(async e=>{if(!e)return;const t=await fetch(e),i=await t.text();n(i)})(t)}),[t]),i?(0,v.jsx)(he,{children:i}):null};var fe=i(21812),me=i(11972);const ge=e=>{let{preview:t,flex:i,file_type:l,name:n,size:s,created_at:a,from_uid:r,content:o}=e;const c=(0,K.CG)((e=>e.users.byId[r])),d=(0,fe.LP)(l,n);if(!o||!c||!n)return null;const p=(e=>{const{file_type:t,name:i,content:l}=e;let n=null;const s={image:/^image/gi,audio:/^audio/gi,video:/^video/gi,code:/(json|javascript|java|rb|c|php|xml|css|html)$/gi,doc:/^text/gi,pdf:/\/pdf$/gi},a=i.split("."),r=t||a[a.length-1];switch(!0){case s.image.test(r):n=(0,v.jsx)(oe,{url:l});break;case s.pdf.test(r):n=(0,v.jsx)(de,{url:l});break;case s.code.test(r):n=(0,v.jsx)(xe,{url:l});break;case s.doc.test(r):n=(0,v.jsx)(ue,{url:l});break;case s.audio.test(r):n=(0,v.jsx)(ae,{url:l});break;case s.video.test(r):n=(0,v.jsx)(ne,{url:l})}return n})({file_type:l,content:o,name:n}),x=t&&p;return(0,v.jsxs)(ie,{className:`file_box ${i?"flex":""} ${x?"preview":""} ${l.startsWith("audio")?"audio":""}`,children:[(0,v.jsxs)("div",{className:"basic",children:[d,(0,v.jsxs)("div",{className:"info",children:[(0,v.jsx)("span",{className:"name",children:n}),(0,v.jsxs)("span",{className:"details",children:[(0,v.jsx)("i",{className:"size",children:(0,fe.td)(s)}),(0,v.jsx)("i",{className:"time",children:te()(a).fromNow()}),(0,v.jsxs)("i",{className:"from",children:["by ",(0,v.jsx)("strong",{children:c.name})]})]})]}),(0,v.jsx)("a",{className:"download",download:n,href:`${o}&download=true`,children:(0,v.jsx)(me.Z,{})})]}),x&&(0,v.jsx)("div",{className:"preview",children:p})]})};let be;function ve(e){let{fileMessages:t}=e;const i=(0,l.useRef)(),[n,a]=(0,l.useState)({}),{message:o,view:d,channelMessage:p}=(0,K.CG)((e=>({message:e.message,channelMessage:e.channelMessage,view:e.ui.fileListView})));return(0,l.useEffect)((()=>{if(d==c.kO.grid&&i){const e=i.current;if(!e)return;const t=e.getBoundingClientRect().width-32,l=Math.floor(t/368),n=t%368,a=Math.max(Math.floor(n/(l-1)),8);be=new(s())(e,{fitWidth:!0,gutter:a,itemSelector:".file_box"})}else be&&be.destroy()}),[d,n]),(0,v.jsxs)(r,{children:[(0,v.jsx)(C,{value:n.name,updateSearchValue:e=>{a((t=>({...t,name:e})))}}),(0,v.jsx)("div",{className:"divider"}),(0,v.jsxs)("div",{className:"opts",children:[(0,v.jsx)(X,{filter:n,updateFilter:e=>{a((t=>({...t,...e})))}}),(0,v.jsx)(j,{view:d})]}),(0,v.jsx)("div",{className:`list ${d}`,ref:i,children:t.map((e=>{const t=o[e];if(!t)return null;const i=((e,t,i)=>{let l=!0;const{mid:n,file_type:s,created_at:a,from_uid:r,properties:o}=e,{name:c,type:d,date:p,from:x,channel:h}=t,u=o?o.name:"";if(x&&x!=r&&(l=!1),h&&-1==i[h].findIndex((e=>e==n))&&(l=!1),c){let e=["",...c.toLowerCase(),""].join(".*");new RegExp(e).test(u)||(l=!1)}return l})(t,n,p);if(!i)return null;const{mid:l,content:s,created_at:a,from_uid:r,properties:x}=t,{name:h,content_type:u,size:f}=null!==x&&void 0!==x?x:{};return(0,v.jsx)(ge,{preview:d==c.kO.grid,flex:d==c.kO.item,file_type:u,content:s,created_at:a,from_uid:r,size:f,name:h},l)}))})]})}const we=(0,l.memo)(ve,((e,t)=>{return i=e.fileMessages,l=t.fileMessages,i.length===l.length&&i.every(((e,t)=>e==l[t]));var i,l}))},10562:(e,t,i)=>{e.exports=i.p+"static/media/search.6ee4d07d418f350e5389.svg"}}]);