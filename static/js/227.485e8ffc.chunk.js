"use strict";(globalThis.webpackChunkvocechat_web=globalThis.webpackChunkvocechat_web||[]).push([[227],{68975:(e,a,r)=>{r.d(a,{Z:()=>x});var t,s,l=r(57425),o=r(70537);function n(){return n=Object.assign?Object.assign.bind():function(e){for(var a=1;a<arguments.length;a++){var r=arguments[a];for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&(e[t]=r[t])}return e},n.apply(this,arguments)}const d=(e,a)=>{let{title:r,titleId:l,...d}=e;return o.createElement("svg",n({stroke:"currentColor",fill:"currentColor",strokeWidth:0,viewBox:"0 0 20 20",color:"#78787c",height:"1em",width:"1em",xmlns:"http://www.w3.org/2000/svg",style:{color:"rgb(120, 120, 124)"},ref:a,"aria-labelledby":l},d),r?o.createElement("title",{id:l},r):null,t||(t=o.createElement("path",{d:"M10 12a2 2 0 100-4 2 2 0 000 4z"})),s||(s=o.createElement("path",{fillRule:"evenodd",d:"M.458 10C1.732 5.943 5.522 3 10 3s8.268 2.943 9.542 7c-1.274 4.057-5.064 7-9.542 7S1.732 14.057.458 10zM14 10a4 4 0 11-8 0 4 4 0 018 0z",clipRule:"evenodd"})))},i=(0,o.forwardRef)(d);var c,p;function u(){return u=Object.assign?Object.assign.bind():function(e){for(var a=1;a<arguments.length;a++){var r=arguments[a];for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&(e[t]=r[t])}return e},u.apply(this,arguments)}const g=(e,a)=>{let{title:r,titleId:t,...s}=e;return o.createElement("svg",u({stroke:"currentColor",fill:"currentColor",strokeWidth:0,viewBox:"0 0 20 20",color:"#78787c",height:"1em",width:"1em",xmlns:"http://www.w3.org/2000/svg",style:{color:"rgb(120, 120, 124)"},ref:a,"aria-labelledby":t},s),r?o.createElement("title",{id:t},r):null,c||(c=o.createElement("path",{fillRule:"evenodd",d:"M3.707 2.293a1 1 0 00-1.414 1.414l14 14a1 1 0 001.414-1.414l-1.473-1.473A10.014 10.014 0 0019.542 10C18.268 5.943 14.478 3 10 3a9.958 9.958 0 00-4.512 1.074l-1.78-1.781zm4.261 4.26l1.514 1.515a2.003 2.003 0 012.45 2.45l1.514 1.514a4 4 0 00-5.478-5.478z",clipRule:"evenodd"})),p||(p=o.createElement("path",{d:"M12.454 16.697L9.75 13.992a4 4 0 01-3.742-3.741L2.335 6.578A9.98 9.98 0 00.458 10c1.274 4.057 5.065 7 9.542 7 .847 0 1.669-.105 2.454-.303z"})))},m=(0,o.forwardRef)(g);var h=r(80683);const x=e=>{let{type:a="text",prefix:r="",className:t="",...s}=e;const[n,d]=(0,o.useState)(a),c=t.includes("large"),p=t.includes("none"),u="password"==a,g=(0,l.Z)("w-full bg-white dark:bg-gray-800 text-sm text-gray-800 dark:text-gray-200 p-2 outline-none disabled:text-gray-500 disabled:bg-gray-100 dark:disabled:text-gray-500 dark:disabled:bg-gray-800/50 placeholder:text-gray-400",c&&"py-3",p&&"border-none bg-transparent shadow-none",u&&"pr-[30px]");return"password"==a?(0,h.jsxs)("div",{className:`w-full relative flex overflow-hidden rounded border border-gray-300 dark:border-gray-400 shadow-sm ${t}`,children:[(0,h.jsx)("input",{type:n,autoComplete:"password"==n?"current-password":"on",className:`${g} ${t}`,...s}),(0,h.jsx)("div",{className:"absolute top-1/2 right-2.5 -translate-y-1/2 cursor-pointer",onClick:()=>{d((e=>"password"==e?"text":"password"))},children:"password"==n?(0,h.jsx)(m,{className:"fill-gray-500"}):(0,h.jsx)(i,{className:"fill-gray-500"})})]}):r?(0,h.jsxs)("div",{className:`w-full relative flex overflow-hidden rounded border border-gray-300 dark:border-gray-400 shadow-sm ${t}`,children:[(0,h.jsx)("span",{className:"px-4 py-2 text-sm text-gray-500 dark:text-gray-300 bg-gray-100 dark:bg-gray-800 shadow-[rgb(0_0_0_/_10%)_-1px_0px_0px_inset]",children:r}),(0,h.jsx)("input",{className:`${g} ${t}`,type:n,...s})]}):(0,h.jsx)("input",{type:n,className:`${g} rounded border border-gray-200 dark:border-gray-400 shadow-sm ${t}`,...s})}},18227:(e,a,r)=>{r.r(a),r.d(a,{default:()=>u});var t=r(70537),s=r(15924),l=r(27418),o=r(80308),n=r(15312),d=r(66160),i=r(69885),c=r(68975),p=r(80683);const u=()=>{const{token:e}=(0,d.CG)((e=>e.authData)),[a,r]=(0,t.useState)(""),[u,g]=(0,t.useState)(!0),[m,h]=(0,t.useState)(""),[x,w]=(0,t.useState)(!1),[f,{data:y,isLoading:b,isSuccess:v,isError:k,error:j}]=(0,n.l4)(),[N,{data:E,isLoading:C,isSuccess:Z}]=(0,n.v5)();(0,t.useEffect)((()=>{const e=new URLSearchParams(location.search);h(e.get("token"))}),[]),(0,t.useEffect)((()=>{m&&N(m)}),[m]),(0,t.useEffect)((()=>{w(!!Z&&!!E)}),[Z,E]);const[S,P]=(0,t.useState)({name:"",email:"",password:""}),R=e=>{const{type:a}=e.target.dataset,{value:r}=e.target;P((e=>(e[a]=r,{...e})))};(0,t.useEffect)((()=>{u||l.ZP.error("two passwords not same")}),[u]),(0,t.useEffect)((()=>{if(v&&y)l.ZP.success("register success, login please"),setTimeout((()=>{location.href="/#/login"}),500);else if(k&&j&&"data"in j)switch(j.status){case 400:l.ZP.error("Register Failed: please check inputs");break;case 412:l.ZP.error("Register Failed: invalid token or expired");break;case 409:var e;l.ZP.error(`Register Failed: ${null===(e=j.data)||void 0===e?void 0:e.reason}`);break;default:l.ZP.error("Register Failed")}}),[y,v,k,j]);const{email:_,password:$,name:F}=S;return e?(0,p.jsx)(s.Fg,{replace:!0,to:"/"}):m?C?(0,p.jsx)(p.Fragment,{children:"checking token valid"}):x?(0,p.jsx)("div",{className:"flex-center h-screen dark:bg-[#384250]",children:(0,p.jsxs)("div",{className:"py-8 px-10 shadow-md rounded-xl",children:[(0,p.jsxs)("div",{className:"flex-center flex-col pb-6",children:[(0,p.jsx)("img",{src:`${o.ZP}/resource/organization/logo`,alt:"logo",className:"w-14 h-14 mb-7 rounded-full"}),(0,p.jsx)("h2",{className:"font-semibold text-2xl text-gray-800 dark:text-white mb-2",children:"Sign Up to VoceChat"}),(0,p.jsx)("span",{className:"text-gray-400 dark:text-gray-100",children:"Please enter your details."})]}),(0,p.jsxs)("form",{className:"flex flex-col gap-5 min-w-[360px]",onSubmit:e=>{e.preventDefault(),u?f({...S,magic_token:m,gender:1}):l.ZP.error("two passwords not same")},children:[(0,p.jsx)(c.Z,{className:"large",name:"name",value:F,required:!0,placeholder:"Enter your name","data-type":"name",onChange:R}),(0,p.jsx)(c.Z,{className:"large",name:"email",value:_,required:!0,placeholder:"Enter your email","data-type":"email",onChange:R}),(0,p.jsx)(c.Z,{className:"large",type:"password",value:$,name:"password",required:!0,"data-type":"password",onChange:R,placeholder:"Enter your password"}),(0,p.jsx)(c.Z,{className:"large",type:"password",value:a,name:"password",required:!0,"data-type":"password",onBlur:()=>{a&&g(a==S.password)},onChange:e=>{const{value:a}=e.target;r(a)},placeholder:"Enter your password again"}),(0,p.jsx)(i.Z,{disabled:b||v,className:"flex justify-center",type:"submit",children:"Sign Up"})]})]})}):(0,p.jsx)(p.Fragment,{children:"invite token expires or invalid"}):(0,p.jsx)(p.Fragment,{children:"token not found"})}}}]);