(globalThis.webpackChunkvocechat_web=globalThis.webpackChunkvocechat_web||[]).push([[247],{79884:(e,n,t)=>{"use strict";t.d(n,{Z:()=>i});var l,s=t(70537);function r(){return r=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var l in t)Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l])}return e},r.apply(this,arguments)}const a=(e,n)=>{let{title:t,titleId:a,...i}=e;return s.createElement("svg",r({width:20,height:20,viewBox:"0 0 20 20",fill:"#616161",xmlns:"http://www.w3.org/2000/svg",ref:n,"aria-labelledby":a},i),t?s.createElement("title",{id:a},t):null,l||(l=s.createElement("path",{d:"M6.48667 11.6667L6.83667 8.33333H3.325V6.66667H7L7.43333 2.5H9.10833L8.66667 6.66667H11.9833L12.4167 2.5H14.0917L13.65 6.66667H16.625V8.33333H13.4667L13.1167 11.6667H16.6167V13.3333H12.9333L12.4917 17.5H10.8083L11.2417 13.3333H7.91667L7.475 17.5H5.8L6.23333 13.3333H3.25V11.6667H6.4H6.48667ZM8.1625 11.6667H11.4875L11.8375 8.33333H8.5125L8.1625 11.6667Z"})))},i=(0,s.forwardRef)(a)},11089:(e,n,t)=>{"use strict";t.d(n,{Z:()=>u});var l=t(70537),s=t(27418),r=t(14566),a=t(52334),i=t(66160),c=t(24563),o=t(15621),d=t(80683);const u=e=>{var n,t;let{id:u,type:h="channel"}=e;const v=(0,i.CG)((e=>"channel"==h?e.footprint.autoDeleteMsgChannels.find((e=>e.gid==u)):e.footprint.autoDeleteMsgUsers.find((e=>e.uid==u)))),[p,{isSuccess:m}]=(0,a.ar)(),[f,g]=(0,l.useState)(null!==(n=null===v||void 0===v?void 0:v.expires_in)&&void 0!==n?n:0),{t:x}=(0,r.$G)("setting",{keyPrefix:"auto_delete_msg"}),{t:j}=(0,r.$G)(),b=[{title:x("off"),value:0},{title:x("5_min"),value:300},{title:x("10_min"),value:600},{title:x("1_hour"),value:3600},{title:x("1_day"),value:86400},{title:x("1_week"),value:604800}];(0,l.useEffect)((()=>{m&&s.Am.success(j("tip.update"))}),[m]);const y=null!==(t=null===v||void 0===v?void 0:v.expires_in)&&void 0!==t?t:0;return(0,d.jsxs)("section",{className:"max-w-[512px] h-full relative",children:[(0,d.jsxs)("div",{className:"text-sm",children:[(0,d.jsx)("h2",{className:"dark:text-white",children:x("title")}),(0,d.jsx)("p",{className:"text-gray-500 dark:text-gray-400",children:x("desc")})]}),(0,d.jsx)("div",{className:"mt-4",children:(0,d.jsx)(o.Z,{options:b.map((e=>{let{title:n}=e;return n})),values:b.map((e=>{let{value:n}=e;return n})),value:f||0,onChange:e=>{g(e)}})}),y!==f&&(0,d.jsx)(c.Z,{saveHandler:()=>{p("user"==h?{users:[{uid:u,expires_in:f}]}:{groups:[{gid:u,expires_in:f}]})},resetHandler:()=>{var e;g(null!==(e=null===v||void 0===v?void 0:v.expires_in)&&void 0!==e?e:0)}})]})}},77493:(e,n,t)=>{"use strict";t.d(n,{Z:()=>h});var l=t(70537),s=t(27418),r=t(15924),a=t(80874),i=t(6144),c=t(40698),o=t(69885),d=t(14566),u=t(80683);const h=e=>{let{id:n,closeModal:t}=e;const{t:h}=(0,d.$G)("setting"),{t:v}=(0,d.$G)(),p=(0,r.s0)(),[m,{isLoading:f,isSuccess:g}]=(0,i.kE)();return(0,l.useEffect)((()=>{g&&(s.ZP.success(v("tip.delete")),t(),p("/chat"))}),[g]),n?(0,u.jsx)(a.Z,{id:"modal-modal",children:(0,u.jsx)(c.Z,{className:"compact",title:h("channel.delete"),description:h("channel.delete_desc"),buttons:(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(o.Z,{onClick:t.bind(null,void 0),className:"cancel",children:v("action.cancel")}),(0,u.jsx)(o.Z,{onClick:()=>{m(n)},className:"danger",children:f?"Deleting":v("action.remove")})]})})}):null}},20869:(e,n,t)=>{"use strict";t.r(n),t.d(n,{default:()=>G});var l=t(70537),s=t(15924),r=t(64084),a=t(27418),i=t(80874),c=t(6144),o=t(66160);function d(e){const{channel:n,loginUid:t}=(0,o.CG)((n=>{var t;return{channel:n.channels.byId[e],loginUid:null===(t=n.authData.user)||void 0===t?void 0:t.uid}})),[l,{isLoading:s,isSuccess:r}]=(0,c.tW)(),[a,{isLoading:i,isSuccess:d}]=(0,c.VJ)(),u=t==(null===n||void 0===n?void 0:n.owner);return{otherMembers:(null===n||void 0===n?void 0:n.members.filter((e=>e!=t)))||[],transferOwner:n=>{n&&l({id:e,owner:n})},leaveChannel:()=>{e&&a(e)},leaving:i,leaveSuccess:d,isOwner:u,transferring:s,transferSuccess:r}}var u=t(40698),h=t(69885),v=t(33941),p=t(14566),m=t(57425),f=t(80683);const g=e=>{let{id:n,closeModal:t,withLeave:r=!0}=e;const{t:c}=(0,p.$G)(),{transferOwner:o,otherMembers:g,leaving:x,leaveChannel:j,leaveSuccess:b,transferSuccess:y,transferring:w}=d(n),[Z,_]=(0,l.useState)(null),C=(0,s.s0)(),N=e=>{_(e)};if((0,l.useEffect)((()=>{y&&b&&(a.ZP.success("Leave channel successfully!"),t(),C("/chat"))}),[b,y,r]),!n)return null;const k=x||w;return(0,f.jsx)(i.Z,{id:"modal-modal",children:(0,f.jsx)(u.Z,{className:"compact",title:"Transfer Ownership",description:"This cannot be undone.",buttons:(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(h.Z,{onClick:t.bind(null,void 0),className:"cancel",children:c("action.cancel")}),(0,f.jsx)(h.Z,{disabled:!Z,onClick:async()=>{Z&&(await o(Z),r&&await j())},className:"danger",children:k?"Assigning":"Assign and Leave"})]}),children:(0,f.jsx)("ul",{className:"flex flex-col max-h-[260px] py-4 overflow-y-scroll",children:g.map((e=>(0,f.jsx)("li",{className:(0,m.Z)("cursor-pointer flex items-center px-2 md:hover:bg-gray-500/10",Z==e?"bg-gray-500/10":""),onClick:N.bind(null,e),children:(0,f.jsx)(v.Z,{uid:e,interactive:!1})},e)))})})})},x=e=>{let{id:n,closeModal:t,handleNextStep:r}=e;const{t:c}=(0,p.$G)("setting"),o=(0,s.s0)(),{isOwner:v,leaving:m,leaveChannel:g,leaveSuccess:x}=d(n);return(0,l.useEffect)((()=>{x&&(a.ZP.success("Leave channel successfully!"),t(),o("/chat"))}),[x]),n?(0,f.jsx)(i.Z,{id:"modal-modal",children:(0,f.jsx)(u.Z,{className:"compact",title:c("channel.leave"),description:c(v?"channel.transfer_desc":"channel.leave_desc"),buttons:(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(h.Z,{onClick:t.bind(null,void 0),className:"cancel",children:c("action.cancel",{ns:"common"})}),v?(0,f.jsx)(h.Z,{onClick:r,className:"main",children:"Next"}):(0,f.jsx)(h.Z,{onClick:g,className:"danger",children:m?"Leaving":"Leave"})]})})}):null},j=e=>{let{id:n,isOwner:t=!1,closeModal:s}=e;const[r,a]=(0,l.useState)(t);return r?(0,f.jsx)(g,{id:n,closeModal:s}):(0,f.jsx)(x,{id:n,closeModal:s,handleNextStep:()=>{a(!0)}})};var b=t(90442),y=t(77493),w=t(95727),Z=t(17237),_=t(48540),C=t(15621),N=t(64884),k=t(24563),E=t(79884);function S(e){let{id:n=0}=e;const{t:t}=(0,p.$G)("setting",{keyPrefix:"channel"}),{t:s}=(0,p.$G)(),{loginUser:r,channel:i}=(0,o.CG)((e=>({loginUser:e.authData.user,channel:e.channels.byId[n]}))),{data:d,refetch:u}=(0,c.aw)(n),[h,v]=(0,l.useState)(!1),[m,g]=(0,l.useState)(),[x]=(0,c.kG)(),[j,{isSuccess:b}]=(0,c.tW)(),[y,{isSuccess:S}]=(0,c.Cl)(),H=e=>{const n=e.target.value,{type:t=""}=e.target.dataset;g((e=>e?{...e,[t]:n}:e))};if((0,l.useEffect)((()=>{d&&g(d)}),[d]),(0,l.useEffect)((()=>{if(d&&m){const{name:e,description:n}=m,{name:t,description:l}=d;v(t!==e||l!==n)}}),[d,m]),(0,l.useEffect)((()=>{b&&(a.ZP.success(s("tip.update")),u())}),[b]),(0,l.useEffect)((()=>{S&&a.ZP.success(s("tip.update"))}),[S]),!m||!n||!i)return null;const{name:L,description:O}=m,M=!(null!==r&&void 0!==r&&r.is_admin)&&(null===i||void 0===i?void 0:i.owner)!=(null===r||void 0===r?void 0:r.uid),G="w-full flex flex-col items-start gap-2 relative";return(0,f.jsxs)("div",{className:"relative w-[512px] flex flex-col gap-6 h-full",children:[(0,f.jsx)(w.Z,{type:"channel",url:null===i||void 0===i?void 0:i.icon,name:L,uploadImage:e=>{x({gid:n,image:e})}}),(0,f.jsxs)("div",{className:"flex flex-col gap-6 items-start",children:[(0,f.jsxs)("div",{className:G,children:[(0,f.jsx)(_.Z,{htmlFor:"name",children:t("name")}),(0,f.jsx)(Z.Z,{disabled:M,className:"!pl-8","data-type":"name",onChange:H,value:L,name:"name",id:"name",placeholder:t("name")}),(0,f.jsx)(E.Z,{className:"absolute bottom-2.5 left-2"})]}),(0,f.jsxs)("div",{className:G,children:[(0,f.jsx)(_.Z,{htmlFor:"desc",children:t("topic")}),(0,f.jsx)(N.Z,{disabled:M,"data-type":"description",onChange:H,value:null!==O&&void 0!==O?O:"",rows:4,name:"name",id:"name",placeholder:t("topic_placeholder")})]}),!M&&(0,f.jsxs)("div",{className:G,children:[(0,f.jsx)(_.Z,{htmlFor:"desc",children:t("visibility")}),(0,f.jsx)(C.Z,{options:[t("public"),t("private")],values:["true","false"],value:String(i.is_public),onChange:e=>{y({is_public:"true"===e.toLowerCase(),id:n})}})]})]}),h&&(0,f.jsx)(k.Z,{saveHandler:()=>{if(!m)return;const{name:e,description:t}=m;j({id:n,name:e,description:t})},resetHandler:()=>{g(d)}})]})}var H=t(11089),L=t(65321);const O=e=>{const{t:n}=(0,p.$G)("setting");return[{title:n("nav.general"),items:[{name:"overview",title:n("nav.overview"),component:(0,f.jsx)(S,{id:e})},{name:"auto_delete_msg",title:n("nav.auto_delete_msg"),component:(0,f.jsx)(H.Z,{id:e})},{name:"members",title:n("nav.members"),component:(0,f.jsx)(L.Z,{cid:e})}]}]};let M="";function G(){const{t:e}=(0,p.$G)("setting"),{cid:n=0,nav:t}=(0,s.UO)(),{loginUser:a,channel:i}=(0,o.CG)((e=>({loginUser:e.authData.user,channel:n?e.channels.byId[+n]:void 0}))),c=(0,s.s0)(),[d]=(0,r.lr)(),u=O(+n),h=u.map((e=>{let{items:n}=e;return n})).flat();M=M||(d.get("f")||"/");const[v,m]=(0,l.useState)(!1),[g,x]=(0,l.useState)(!1),w=()=>{m((e=>!e))},Z=()=>{x((e=>!e))};if(!n)return null;const _=h.find((e=>e.name==t)),C=(null===a||void 0===a?void 0:a.is_admin)||(null===i||void 0===i?void 0:i.owner)==(null===a||void 0===a?void 0:a.uid),N=!(null!==i&&void 0!==i&&i.is_public);return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(b.Z,{pathPrefix:`/setting/channel/${n}`,nav:_,closeModal:()=>{c(M),M=""},title:"Channel Setting",navs:u,dangers:[N&&{title:e("channel.leave"),handler:Z},C&&{title:e("channel.delete"),handler:w}],children:t?null===_||void 0===_?void 0:_.component:null}),v&&(0,f.jsx)(y.Z,{closeModal:w,id:+n}),g&&(0,f.jsx)(j,{closeModal:Z,id:+n})]})}},87475:function(e,n,t){!function(e,n){"use strict";function t(e){if(e&&e.__esModule)return e;var n=Object.create(null);return e&&Object.keys(e).forEach((function(t){if("default"!==t){var l=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(n,t,l.get?l:{enumerable:!0,get:function(){return e[t]}})}})),n.default=e,Object.freeze(n)}var l=t(n);function s(e,n){return s=Object.setPrototypeOf||function(e,n){return e.__proto__=n,e},s(e,n)}function r(e,n){e.prototype=Object.create(n.prototype),e.prototype.constructor=e,s(e,n)}var a=function(e,n){return void 0===e&&(e=[]),void 0===n&&(n=[]),e.length!==n.length||e.some((function(e,t){return!Object.is(e,n[t])}))},i={error:null},c=function(e){function n(){for(var n,t=arguments.length,l=new Array(t),s=0;s<t;s++)l[s]=arguments[s];return(n=e.call.apply(e,[this].concat(l))||this).state=i,n.resetErrorBoundary=function(){for(var e,t=arguments.length,l=new Array(t),s=0;s<t;s++)l[s]=arguments[s];null==n.props.onReset||(e=n.props).onReset.apply(e,l),n.reset()},n}r(n,e),n.getDerivedStateFromError=function(e){return{error:e}};var t=n.prototype;return t.reset=function(){this.setState(i)},t.componentDidCatch=function(e,n){var t,l;null==(t=(l=this.props).onError)||t.call(l,e,n)},t.componentDidUpdate=function(e,n){var t,l,s=this.state.error,r=this.props.resetKeys;null!==s&&null!==n.error&&a(e.resetKeys,r)&&(null==(t=(l=this.props).onResetKeysChange)||t.call(l,e.resetKeys,r),this.reset())},t.render=function(){var e=this.state.error,n=this.props,t=n.fallbackRender,s=n.FallbackComponent,r=n.fallback;if(null!==e){var a={error:e,resetErrorBoundary:this.resetErrorBoundary};if(l.isValidElement(r))return r;if("function"===typeof t)return t(a);if(s)return l.createElement(s,a);throw new Error("react-error-boundary requires either a fallback, fallbackRender, or FallbackComponent prop")}return this.props.children},n}(l.Component);function o(e,n){var t=function(t){return l.createElement(c,n,l.createElement(e,t))},s=e.displayName||e.name||"Unknown";return t.displayName="withErrorBoundary("+s+")",t}function d(e){var n=l.useState(null),t=n[0],s=n[1];if(null!=e)throw e;if(null!=t)throw t;return s}e.ErrorBoundary=c,e.useErrorHandler=d,e.withErrorBoundary=o,Object.defineProperty(e,"__esModule",{value:!0})}(n,t(70537))}}]);