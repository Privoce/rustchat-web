"use strict";(globalThis.webpackChunkvocechat_web=globalThis.webpackChunkvocechat_web||[]).push([[286],{54443:(e,a,s)=>{s.d(a,{Z:()=>l});var t=s(80683);const l=e=>{let{children:a,className:s="",...l}=e;return(0,t.jsx)("label",{className:`text-gray-800 dark:text-gray-100 text-sm font-semibold ${s}`,...l,children:a})}},66286:(e,a,s)=>{s.r(a),s.d(a,{default:()=>w});var t=s(70537),l=s(27418),i=s(14566),n=s(80308),r=s(15312),c=s(65809),o=s(66160),d=s(51285),m=s(4472),u=s(99487),g=s(54443),x=s(15924),h=s(80683);function p(e){let{email:a}=e;const s=(0,x.s0)();return(0,h.jsx)(m.Z,{className:"w-full ghost",onClick:()=>{s(`/send_magic_link/${a}`)},children:"Sign in with a Magic Link"})}function f(){const{t:e}=(0,i.$G)("auth"),a=(0,x.s0)();return(0,h.jsxs)("div",{className:"flex gap-1 mt-7 text-sm text-slate-500 dark:text-gray-100 justify-center",children:[(0,h.jsx)("span",{children:e("login.no_account")}),(0,h.jsx)("a",{className:"text-primary-400 cursor-pointer",onClick:()=>{a("/register")},children:e("sign_up")})]})}var j=s(61756);function w(){const e=(0,o.CG)((e=>e.server.name)),{t:a}=(0,i.$G)("auth"),{t:s}=(0,i.$G)(),{data:x,isLoading:w}=(0,c.n8)(),[k,{isSuccess:v,isLoading:b,error:y}]=(0,r.YA)(),{data:_,isSuccess:N}=(0,c.ww)(),[Z,S]=(0,t.useState)(!1),[P,C]=(0,t.useState)({email:"",password:""});(0,t.useEffect)((()=>{const e=new URLSearchParams(location.search),a=e.get("code"),s=e.get("state"),t=e.get("magic_token"),l=e.get("exists");if(a&&s&&k({code:a,state:s,type:"oidc"}),t&&"undefined"!==typeof l){"true"==l?k({magic_token:t,type:"magiclink"}):location.href=`/#/register/set_name/login?magic_token=${t}`}}),[]),(0,t.useEffect)((()=>{if(y)switch(y.status){case 401:case 404:l.ZP.error("Username or Password incorrect");break;case 410:l.ZP.error("No associated account found, please contact user admin for an invitation link to join.");break;case"PARSING_ERROR":break;default:l.ZP.error("Something Error")}else;}),[y]),(0,t.useEffect)((()=>{v&&l.ZP.success(s("tip.login"))}),[v]);const E=e=>{const{type:a}=e.target.dataset,{value:s}=e.target;a&&C((e=>(e[a]=s,{...e})))},{email:$,password:R}=P;if(!N)return null;const{magic_link:G,who_can_sign_up:L}=_,O=x&&G,q=O&&Z,A=!O||Z;return w?null:(0,h.jsx)("div",{className:"flex-center h-screen dark:bg-gray-700",children:(0,h.jsxs)("div",{className:"py-8 px-10 shadow-md rounded-xl",children:[(0,h.jsxs)("div",{className:"flex-center flex-col pb-6",children:[(0,h.jsx)("img",{src:`${n.ZP}/resource/organization/logo`,alt:"logo",className:"w-14 h-14 mb-3 md:mb-7 rounded-full"}),(0,h.jsx)("h2",{className:"font-semibold text-2xl text-gray-800 dark:text-white",children:a("login.title",{name:e})})]}),(0,h.jsxs)("form",{className:"flex flex-col gap-5 w-80 md:min-w-[360px] ",onSubmit:e=>{e.preventDefault();x&&(null===_||void 0===_?void 0:_.magic_link)&&!Z?S(!0):k({...P,type:"password"})},children:[!Z&&(0,h.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,h.jsx)(g.Z,{children:"Email"}),(0,h.jsx)(u.Z,{className:"large",name:"email",value:$,type:"email",required:!0,placeholder:a("placeholder_email"),"data-type":"email",onChange:E})]}),(!O||Z)&&(0,h.jsxs)("div",{className:"",children:[(0,h.jsx)(g.Z,{children:"Password"}),(0,h.jsx)(u.Z,{className:"large",type:"password",value:R,name:"password",required:!0,"data-type":"password",onChange:E,placeholder:a("placeholder_pwd")})]}),A?(0,h.jsx)(m.Z,{type:"submit",disabled:b,children:b?"Signing":a("sign_in")}):(0,h.jsx)(m.Z,{type:"submit",children:a("continue")})]}),(0,h.jsx)(d.Z,{content:"OR"}),(0,h.jsxs)("div",{className:"socials flex flex-col gap-3",children:[Z&&(0,h.jsx)(p,{email:P.email}),!q&&(0,h.jsx)(j.Z,{})]}),"EveryOne"===L&&!q&&(0,h.jsx)(f,{})]})})}}}]);